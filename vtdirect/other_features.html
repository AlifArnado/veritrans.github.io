<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Veritrans API Documentation. Payment Gateway Indonesia, transaksi online lebih aman, mudah, cepat! Veritrans memberi solusi sistem payment gateway terbaik untuk e-commerce di Indonesia.">
    <meta name="keywords" content="Veritrans, Veritrans Indonesia, payment gateway indonesia, Pembayaran Online Indonesia, online payment Indonesia, sistem transaksi online"> 
    <link href="../stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    <title>Docs - Veritrans Indonesia</title>
		<link rel="shortcut icon" href="/favicon.ico"/>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="header navbar navbar-default navbar-fixed-top">
      <div class="custom-container">
        <div class="col-md-3 navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <h2 class="logo"><a href="https://www.veritrans.co.id" title="Home"><span>Veritrans</span></a></h2>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="https://www.veritrans.co.id/whatwedo.html" title="What We Do">what we do</a></li>
            <li><a href="https://www.veritrans.co.id/product.html" title="Our Online Payment Products">product</a></li>
            <li><a href="https://www.veritrans.co.id/pricing.html" title="Check for Our Pricing">pricing</a></li>
            <li class="dropdown hidden-xs hidden-sm">
              <a href="https://www.veritrans.co.id/about.html">about <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="https://www.veritrans.co.id/team.html" title="Team">team</a></li>
                <li><a href="https://www.veritrans.co.id/press.html" title="Press">press</a></li>
                <li><a href="https://www.veritrans.co.id/career.html" title="Career at Veritrans">career</a></li>
                <li><a href="https://www.veritrans.co.id/contact.html" title="Contact Us">contact</a></li>
                <li><a href="http://support.veritrans.co.id/" title="FAQ & How To">FAQ</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-lg hidden-md">
              <a href="#">about <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="https://www.veritrans.co.id/about.html" title="Team">about us</a></li>
                <li><a href="https://www.veritrans.co.id/team.html" title="Team">team</a></li>
                <li><a href="https://www.veritrans.co.id/press.html" title="Press">press</a></li>
                <li><a href="https://www.veritrans.co.id/career.html" title="Career at Veritrans">career</a></li>
                <li><a href="https://www.veritrans.co.id/contact.html" title="Contact Us">contact</a></li>
                <li><a href="http://support.veritrans.co.id/" title="FAQ & How To">FAQ</a></li>
              </ul>
            </li>
            <!-- <li class="dropdown">
              <a href="" class="dropdown-toggle" data-toggle="dropdown">about <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="https://www.veritrans.co.id/about.html" title="About Veritrans">about us</a></li>
                <li><a href="http://support.veritrans.co.id/hc/en-us" title="FAQ & How To">FAQ</a></li>
                <li><a href="https://www.veritrans.co.id/career.html" title="Career at Veritrans">career</a></li>
                <li><a href="https://www.veritrans.co.id/contact.html" title="Contact Us">contact</a></li>
              </ul>
            </li> -->
            <!-- <li><a href="http://docs.veritrans.co.id" title="Product Documentations">docs</a></li> -->
            <li class="dropdown">
              <a href="#">developer <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="https://www.veritrans.co.id/sandbox.html">sandbox</a></li>
                <li><a href="http://docs.veritrans.co.id/">documentation</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">community <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="http://blog.veritrans.co.id" title="Blog, News and Press Release">blog</a></li>
                <li><a href="https://www.veritrans.co.id/portfolio.html" title="Our Clients">our clients</a></li>
                <li><a href="https://www.veritrans.co.id/why-veritrans.html" title="Why Veritrans">why veritrans</a></li>
                <li><a href="https://www.veritrans.co.id/newsletter.html" title="Newsletter">newsletter</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right register-login">
            <li class="pull-left"><a href="https://my.sandbox.veritrans.co.id/register" class="register">sign up</a></li>
            <li class="pull-left"><a href="https://my.veritrans.co.id/login">sign in</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

    <div class="custom-container">
      <div class="row row-offcanvas row-offcanvas-right">
        <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
    <div class="documentation-sidebar">
        <div class="docs-logo">
            <span>DOCS</span>
        </div>
        <div class="language-toggle"> English / <a href="../id/vtdirect/other_features.html">Bahasa Indonesia</a></div>
        <ul class="sidebar">
            
                <li>
                    
                        <a class="parent" href="../welcome/welcome.html">Welcome</a>
                    
                </li>
            
                <li>
                    
                        <a class="parent">VT-Web</a>
                        <b class="caret"></b>
                        <ul class="child-menu">
                            
                            <li class=""><a href="../vtweb/introduction.html">Introduction</a></li>
                            
                            <li class=""><a href="../vtweb/getting_started.html">Getting Started</a></li>
                            
                            <li class=""><a href="../vtweb/integration.html">Integration</a></li>
                            
                            <li class=""><a href="../vtweb/other_features.html">Other Features</a></li>
                            
                            <li class=""><a href="../vtweb/going_live.html">Going Live</a></li>
                            
                        </ul>
                    
                </li>
            
                <li>
                    
                        <a class="parent">VT-Direct</a>
                        <b class="caret"></b>
                        <ul class="child-menu">
                            
                            <li class=""><a href="introduction.html">Introduction</a></li>
                            
                            <li class=""><a href="getting_started.html">Getting Started</a></li>
                            
                            <li class=""><a href="integration.html">Integration</a></li>
                            
                            <li class="active"><a href="other_features.html">Other Features</a></li>
                            
                            <li class=""><a href="other_commands.html">Other Commands</a></li>
                            
                            <li class=""><a href="going_live.html">Going Live</a></li>
                            
                        </ul>
                    
                </li>
            
                <li>
                    
                        <a class="parent">API Reference</a>
                        <b class="caret"></b>
                        <ul class="child-menu">
                            
                            <li class=""><a href="../sandbox/introduction.html">Introduction</a></li>
                            
                            <li class=""><a href="../sandbox/charge.html">Transaction Charge</a></li>
                            
                            <li class=""><a href="../sandbox/installment.html">Installment</a></li>
                            
                            <li class=""><a href="../sandbox/bin.html">BIN Promo</a></li>
                            
                            <li class=""><a href="../sandbox/other_features.html">Other Features</a></li>
                            
                            <li class=""><a href="../sandbox/other_commands.html">Other Commands</a></li>
                            
                            <li class=""><a href="../sandbox/card_list.html">Testing Card List</a></li>
                            
                            <li class=""><a href="../sandbox/status_code.html">Status Code</a></li>
                            
                        </ul>
                    
                </li>
            
                <li>
                    
                        <a class="parent" href="http://support.veritrans.co.id">FAQ</a>
                    
                </li>
            
        </ul>
    </div>
</div>
        <div class="col-xs-12 col-sm-9" id="bodier">
          <p class="pull-right visible-xs">
            <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Menu</button>
          </p>
          <div class="vtdirect-other-features">
            <h2 id="other-features">Other Features</h2>
<hr />

<h5 id="the-tutorial-below-will-assist-you-in-implementing-other-features-on-vt-direct-if-further-assistance-is-required-please-contact-us-at-supportveritranscoidmailtosupportveritranscoid-email-support-or-visit-our-support-pagehttpsupportveritranscoid-veritrans-support"><em>The tutorial below will assist you in implementing other features on VT-Direct. If further assistance is required, please contact us at <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#064;&#118;&#101;&#114;&#105;&#116;&#114;&#097;&#110;&#115;&#046;&#099;&#111;&#046;&#105;&#100;">&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#064;&#118;&#101;&#114;&#105;&#116;&#114;&#097;&#110;&#115;&#046;&#099;&#111;&#046;&#105;&#100;</a> or visit our <a title="Veritrans Support" href="http://support.veritrans.co.id">support page</a>.</em></h5>
<hr />

<p>Currently, VT-Direct has additional features for credit card payment method, which is:</p>

<ol>
  <li>Pre-Authorization &amp; Capture</li>
  <li>Installment</li>
  <li>BIN Promo</li>
  <li>One Click</li>
  <li>Two Clicks</li>
</ol>

<p>The following is a tutorial to utilise these features as needed.</p>

<!-- Nav tabs -->
<ul class="nav nav-tabs">
  <li class="active"><a href="#pre-authorization" data-toggle="tab">Pre-Authorization &amp; Capture</a></li>
  <li><a href="#installment" data-toggle="tab">Installment</a></li>
  <li><a href="#bin-promo" data-toggle="tab">BIN Promo</a></li>
  <li><a href="#one-click" data-toggle="tab">One Click</a></li>
  <li><a href="#two-click" data-toggle="tab">Two Clicks</a></li>
</ul>
<div class="tab-content">
  <div class="tab-pane active" id="pre-authorization">
    <!-- step 1-->

    <h2 id="pre-authorization--capture">Pre-Authorization &amp; Capture</h2>

    <p>Pre-authorization is useful to check if a credit card is allowed to make a transaction for a certain value. When pre-authorization is completed, you can check the credit card status and transaction has <strong>not occured</strong> yet. Transaction occurs when capture operation is issued. Capture can only be completed when pre-authorization process is successful.</p>

    <p>By default, operation <a href="integration_cc.html#step2">charge transaction</a> in Veritrans is a combination of pre-authorization and capture. If you wish to do these separately, please follow the following step. </p>

    <h3 id="pre-authorization-transaction">Pre-Authorization Transaction</h3>

    <p>Generally, pre-authorization process is similar to <a href="integration_cc.html#step2">charge transaction</a>. The difference lies on the request token parameter and charge transaction. You have to add the <code>'type'</code> attribute with the value <code>'authorize'</code> on both of the processes.</p>

    <p>Following the same example as <a href="integration.html">charge transaction</a>, additional script on request token is as follows:</p>

<pre><code class="highlight html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>

<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  
  <span class="p">...</span>

  <span class="kd">var</span> <span class="nx">card</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="s1">'card_number'</span>   <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#card-number"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="s1">'card_exp_month'</span>  <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#card-expiry-month"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="s1">'card_exp_year'</span>   <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#card-expiry-year"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="s1">'card_cvv'</span>      <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#card-cvv"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="s1">'secure'</span>       <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s1">'bank'</span>       <span class="p">:</span> <span class="s1">'bni'</span><span class="p">,</span>
      <span class="s1">'gross_amount'</span>   <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#price"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>

      <span class="c1">// Ask for pre-authorization token id</span>
      <span class="s1">'type'</span> <span class="p">:</span> <span class="s1">'authorize'</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="p">...</span>

<span class="nt">&lt;/script&gt;</span>
</code></pre>

    <p>The acquired token can be saved and used to perform pre-authorization during charge transaction. Parameters that is modified during charge transaction is as follows:</p>

<pre><code class="highlight php"><span class="cp">&lt;?php</span>
<span class="k">include_once</span><span class="p">(</span><span class="s1">'Veritrans.php'</span><span class="p">);</span>

<span class="o">...</span>

<span class="nv">$transaction_data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'payment_type'</span>      <span class="o">=&gt;</span> <span class="s1">'credit_card'</span><span class="p">,</span> 
  <span class="s1">'credit_card'</span>       <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'token_id'</span>  <span class="o">=&gt;</span> <span class="nv">$token_id</span><span class="p">,</span>
    <span class="s1">'bank'</span>    <span class="o">=&gt;</span> <span class="s1">'bni'</span><span class="p">,</span>

    <span class="c1">// Authorize instead of normal charge operation
</span>    <span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="s1">'authorize'</span>
    <span class="p">),</span>
  <span class="s1">'transaction_details'</span>   <span class="o">=&gt;</span> <span class="nv">$transaction_details</span><span class="p">,</span>
  <span class="s1">'customer_details'</span> <span class="o">=&gt;</span> <span class="nv">$customer_details</span>
  <span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nx">Veritrans_VtDirect</span><span class="o">::</span><span class="na">charge</span><span class="p">(</span><span class="nv">$transaction_data</span><span class="p">);</span>

<span class="cp">?&gt;</span>
</code></pre>

    <p>On the above example, pre-authorization response is saved in the variable <code>$result</code>. Structure and example of <em>state</em> <code>$result</code> when pre-authorization process is successful is as follows:</p>

<pre><code class="highlight php">$result = array(
    "status_code" =&gt; "200",
    "status_message" =&gt; "Success, Credit Card transaction is successful",
    "transaction_id" =&gt; "b505b192-f202-41ad-b82a-18678d0571a9",
    "order_id" =&gt; "201404211437",
    "payment_type" =&gt; "credit_card",
    "transaction_time" =&gt; "2014-04-21 14:35:32",
    "transaction_status" =&gt; "authorize",
    "fraud_status" =&gt; "noscore",
    "masked_card" =&gt; "481111-1114",
    "bank" =&gt; "bni",
    "gross_amount" =&gt; "150000.00"
);
</code></pre>

    <p>The important attribute on pre-authorization response is <code>transaction_id</code>. You need to use this attribute value to perform capture transaction.</p>

    <hr />

    <h3 id="capture-transaction">Capture Transaction</h3>

    <p>To perform capture transaction, you simply have to prepare the attribute <code>transaction_id</code> and <code>gross_amount</code>. Both these attributes is related to the previous pre-authorization process. The <code>gross_amount</code> value cannot exceed the <code>gross_amount</code> on pre-authorization. If <code>gross_amount</code> attribute is not given during capture, the <code>gross_amount</code> value on pre-authorization will be used.</p>

    <p>The following is the sample PHP code to perform capture transaction:</p>

<pre><code class="highlight php">
<span class="cp">&lt;?php</span>
<span class="k">include_once</span><span class="p">(</span><span class="s1">'Veritrans.php'</span><span class="p">);</span>

<span class="c1">// TODO: change with your actual server_key that can be found on Merchant Administration Portal (MAP)
</span><span class="nx">Veritrans_Config</span><span class="o">::</span><span class="nv">$serverKey</span> <span class="o">=</span> <span class="s2">"&lt; Your Server Key &gt;"</span><span class="p">;</span>
<span class="nx">Veritrans_Config</span><span class="o">::</span><span class="nv">$isProduction</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="c1">// Use transaction_id from Pre-authorization process
</span><span class="nv">$transaction_id</span> <span class="o">=</span> <span class="s1">'b505b192-f202-41ad-b82a-18678d0571a9'</span><span class="p">;</span>
<span class="nv">$amount</span> <span class="o">=</span> <span class="mi">150000</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nx">Veritrans_VtDirect</span><span class="o">::</span><span class="na">capture</span><span class="p">(</span><span class="nv">$transaction_id</span><span class="p">,</span> <span class="nv">$amount</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>

    <p>On the above example, the capture response is saved in the variable <code>$result</code>. Structure and example of <em>state</em> <code>$result</code> when pre-authorization process is successful is as follows:</p>

<pre><code class="highlight php">$result = array(
    "status_code" =&gt; "200",
    "status_message" =&gt; "Success, Credit Card capture transaction is successful",
    "transaction_id" =&gt; "b505b192-f202-41ad-b82a-18678d0571a9",
    "order_id" =&gt; "201404211437",
    "payment_type" =&gt; "credit_card",
    "transaction_time" =&gt; "2014-04-21 14:35:32",
    "transaction_status" =&gt; "capture",
    "fraud_status" =&gt; "noscore",
    "masked_card" =&gt; "481111-1114",
    "bank" =&gt; "bni",
    "gross_amount" =&gt; "150000.00"
);
</code></pre>

  </div>
  <div class="tab-pane" id="installment">
    <!-- step 2-->

    <h2 id="installment">Installment</h2>

    <p>To activate instalment feature, merchant has to make an agreement with the acquiring bank. Merchant also need to inquire Veritrans sales representative if the MID for installment is ready. The installment feature can be performed with normal token or 3DS token.</p>

    <p>Installment feature implementation is similar to <a href="integration_cc.html#step2">charge transaksi</a>. The difference lies on the request token and charge transaction. You have to add <code>'Installment’</code> attribute and <code>installment_term</code>. The installment attribute with the respective value which can be used in Sandbox environment:</p>

    <table>
      <tbody>
        <tr>
          <td>Attribute</td>
          <td>Data Type</td>
          <td>Required</td>
          <td>Explanation</td>
        </tr>
        <tr>
          <td><code>bank</code></td>
          <td>String(50)</td>
          <td>Yes</td>
          <td>Acquiring Bank that provides installment. In the moment, the valid value is <code>"bni"</code> or <code>"mandiri"</code></td>
        </tr>
        <tr>
          <td><code>installment_term</code></td>
          <td>Array Integer</td>
          <td>Yes</td>
          <td>Installment period. In the moment, the valid value is <code>6</code> or <code>12</code></td>
        </tr>
      </tbody>
    </table>

    <p>Using the same example in <a href="integration_cc.html#step2">charge transaction</a>, script that is modified during request token is as follows:</p>

<pre><code class="highlight html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>

<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  
  <span class="p">...</span>

  <span class="kd">var</span> <span class="nx">card</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="s1">'card_number'</span>   <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#card-number"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="s1">'card_exp_month'</span>  <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#card-expiry-month"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="s1">'card_exp_year'</span>   <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#card-expiry-year"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="s1">'card_cvv'</span>      <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#card-cvv"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="s1">'secure'</span>       <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

      <span class="c1">// Ask for 12 months installment token_id</span>
      <span class="s1">'installment'</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span> 
      <span class="s1">'installment_term'</span> <span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
      
      <span class="s1">'bank'</span>       <span class="p">:</span> <span class="s1">'bni'</span><span class="p">,</span>
      <span class="s1">'gross_amount'</span>   <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#price"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="p">...</span>

<span class="nt">&lt;/script&gt;</span>
</code></pre>

    <p>The acquired token can be saved and used to perform charge transaction. Attribute that has to be added to perform installment is <code>installment_term</code>. Parameters that is modified during charge transaction is as follows:</p>

<pre><code class="highlight php"><span class="cp">&lt;?php</span>
<span class="k">include_once</span><span class="p">(</span><span class="s1">'Veritrans.php'</span><span class="p">);</span>

<span class="o">...</span>

<span class="nv">$transaction_data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'payment_type'</span>      <span class="o">=&gt;</span> <span class="s1">'credit_card'</span><span class="p">,</span> 
  <span class="s1">'credit_card'</span>       <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'token_id'</span>  <span class="o">=&gt;</span> <span class="nv">$token_id</span><span class="p">,</span>
    <span class="s1">'bank'</span>    <span class="o">=&gt;</span> <span class="s1">'bni'</span><span class="p">,</span>
    <span class="s1">'installment_term'</span> <span class="o">=&gt;</span> <span class="mi">12</span>
    <span class="p">),</span>
  <span class="s1">'transaction_details'</span>   <span class="o">=&gt;</span> <span class="nv">$transaction_details</span><span class="p">,</span>
  <span class="s1">'customer_details'</span> <span class="o">=&gt;</span> <span class="nv">$customer_details</span><span class="p">,</span>
  <span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nx">Veritrans_VtDirect</span><span class="o">::</span><span class="na">charge</span><span class="p">(</span><span class="nv">$transaction_data</span><span class="p">);</span>

<span class="o">...</span>

<span class="cp">?&gt;</span>
</code></pre>

    <p>On the above example, the installment response is saved in the variable <code>$result</code>. Structure and example of <em>state</em> <code>$result</code> when installment process is successful is as follows:</p>

<pre><code class="highlight php">$result = array(
    "status_code" =&gt; "200",
    "status_message" =&gt; "Success, Credit Card Installment transaction is successful",
    "transaction_id" =&gt; "2a913000-4ed6-4c91-aff1-94e5ffb1b737",
    "order_id" =&gt; "201404231811",
    "payment_type" =&gt; "credit_card",
    "transaction_time" =&gt; "2014-04-23 18:11:44",
    "transaction_status" =&gt; "capture",
    "masked_card" =&gt; "481111-1114",
    "bank" =&gt; "bni",
    "gross_amount" =&gt; "10000.00"
    );

</code></pre>

  </div>
  <div class="tab-pane" id="bin-promo">
    <!-- step 3-->

    <h2 id="bin-promo">BIN Promo</h2>

    <p>BIN (Bank Identification Number) is the first <strong>6 digit</strong> number of a credit card. The issuing bank for the credit card can be identified from these numbers. BIN promo is the feature that allows merchant to give out the deal based on the promotion given by the issuing bank. Merchant can use the first <strong>1-8</strong> digits of the credit card to utilise the BIN Promo feature.</p>

    <p>To use this feature, you have to first list out the BIN that is having a promotion. The BIN list will become the transaction parameter <code>bins</code>. Transaction can only be performed by credit cards that is included in the BIN list. Use the BIN list as a value from the attribute <code>bins</code> during charge transaction.</p>

    <p>Following the same transaction in <a href="integration_cc.html#step2">integration</a>, the sample PHP script that can be used is as follows:</p>

<pre><code class="highlight php"><span class="cp">&lt;?php</span>
<span class="k">include_once</span><span class="p">(</span><span class="s1">'Veritrans.php'</span><span class="p">);</span>

<span class="o">...</span>

<span class="nv">$transaction_data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'payment_type'</span>      <span class="o">=&gt;</span> <span class="s1">'credit_card'</span><span class="p">,</span> 
  <span class="s1">'credit_card'</span>       <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'token_id'</span>  <span class="o">=&gt;</span> <span class="nv">$token_id</span><span class="p">,</span>
    <span class="s1">'bank'</span>    <span class="o">=&gt;</span> <span class="s1">'bni'</span><span class="p">,</span>
    <span class="s1">'bins'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s2">"48111111"</span><span class="p">,</span> <span class="s2">"3111"</span><span class="p">,</span> <span class="s2">"5"</span><span class="p">)</span>
    <span class="p">),</span>
  <span class="s1">'transaction_details'</span>   <span class="o">=&gt;</span> <span class="nv">$transaction_details</span><span class="p">,</span>
  <span class="s1">'customer_details'</span> <span class="o">=&gt;</span> <span class="nv">$customer_details</span><span class="p">,</span>
  <span class="p">);</span>
<span class="k">try</span><span class="p">{</span>
  <span class="nv">$result</span> <span class="o">=</span> <span class="nx">Veritrans_VtDirect</span><span class="o">::</span><span class="na">charge</span><span class="p">(</span><span class="nv">$transaction_data</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">){</span>
  <span class="k">echo</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
<span class="o">...</span>
<span class="cp">?&gt;</span>
</code></pre>

    <p>On the above example, the BIN that is listed is <code>48111111</code>, <code>3111</code>, and <code>5</code>. If a card with the BIN "411111" is used, charge transaction will fail.</p>

  </div>
  <div class="tab-pane" id="one-click">
    <!-- step 4-->

    <h2 id="one-click">One Click</h2>

    <p>One click feature allows you to use one token on a few transactions. Token represents the credit card number, expiry date, CVV, and 3D Secure authentication of the customer. This will ease the transaction because the credit card information has to be filled only once.</p>

    <p>Do note that token will be activated only after the initial transaction is performed. To use the one click feature, 3D Secure feature has to be used.</p>

    <p>In general, there are two steps required to utilise one click feature:</p>

    <ol>
      <li>Initial Transaction
        <ul>
          <li>Customer fill the credit card number, CVV, expiry date</li>
          <li>Customer perform 3D Secure authentication</li>
          <li>Merchant receives token</li>
          <li>Merchant uses token to charge transaction</li>
          <li>When transaction successful, merchant save customer’s token in the database. We name this token as <code>saved_token</code>.</li>
        </ul>
      </li>
      <li>Following Transaction
        <ul>
          <li>Merchant retrieve customer <code>saved_token</code> from database </li>
          <li>Merchant uses <code>saved_token</code> to charge transaction</li>
        </ul>
      </li>
    </ol>

    <h3 id="initial-transaction">Initial Transaction</h3>

    <p>To implement one click, you simply add the attribute <code>save_token_id</code> on initial transaction. Following the example on <a href="integration_cc.html#step2">charge transaction</a>, the modified PHP script during charge transaction is as follows:</p>

<pre><code class="highlight php"><span class="cp">&lt;?php</span>
<span class="k">include_once</span><span class="p">(</span><span class="s1">'Veritrans.php'</span><span class="p">);</span>

<span class="o">...</span>

<span class="nv">$transaction_data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'payment_type'</span>      <span class="o">=&gt;</span> <span class="s1">'credit_card'</span><span class="p">,</span> 
  <span class="s1">'credit_card'</span>       <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'token_id'</span>  <span class="o">=&gt;</span> <span class="nv">$token_id</span><span class="p">,</span>
    <span class="s1">'bank'</span>    <span class="o">=&gt;</span> <span class="s1">'bni'</span><span class="p">,</span>
    <span class="s1">'save_token_id'</span> <span class="o">=&gt;</span> <span class="kc">true</span>
    <span class="p">),</span>
  <span class="s1">'transaction_details'</span>   <span class="o">=&gt;</span> <span class="nv">$transaction_details</span><span class="p">,</span>
  <span class="s1">'customer_details'</span> <span class="o">=&gt;</span> <span class="nv">$customer_details</span><span class="p">,</span>
  <span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nx">Veritrans_VtDirect</span><span class="o">::</span><span class="na">charge</span><span class="p">(</span><span class="nv">$transaction_data</span><span class="p">);</span>

<span class="o">...</span>

<span class="cp">?&gt;</span>
</code></pre>

    <p>On the above example, one click response is saved in the variable <code>$result</code>. Structure and example of <em>state</em> <code>$result</code> when one click process is successful is as follows:</p>

<pre><code class="highlight php">array(
  "transaction_id" =&gt; "ca5e0ff5-4297-48ef-aa25-b3ab018d4ead",
  "order_id" =&gt; "order52",
  "gross_amount" =&gt; "200000.00",
  "payment_type" =&gt; "credit_card",
  "transaction_time" =&gt; "2014-03-27 17:20:53",
  "transaction_status" =&gt; "capture",
  "fraud_status" =&gt; "accept",
  "masked_card" =&gt; "481111-1114",
  "saved_token_id" =&gt; "4011117d16c884-2cc7-4624-b0a8-10273b7f6cc8",
  "saved_token_id_expired_at" =&gt; "2024-03-27 17:20:53",
  "status_code" =&gt; "200",
  "bank" =&gt; "bni",
  "status_message" =&gt; "Success, Credit Card 3D Secure transaction is successful"
);
</code></pre>

    <p>Two important attributes for a successful one click response is <code>saved_token_id</code> and <code>saved_token_id_expired</code>. <code>saved_token_id</code> is the token that you save when the customer make a following transaction. This attribute is what we referred as <code>saved_token</code> on the previous explanation. The value from <code>saved_token</code> can be used repeatedly until <code>saved_token_id_expired</code>.</p>

    <hr />

    <h3 id="following-transaction">Following Transaction</h3>

    <p>On the following transaction, customer does not have to fill in credit card information anymore and charge transaction process can be performed using <code>saved token</code>.</p>

    <p>The following example is charge following transaction using <code>saved_token_id</code>:</p>

<pre><code class="highlight php"><span class="cp">&lt;?php</span>
<span class="k">include_once</span><span class="p">(</span><span class="s1">'Veritrans.php'</span><span class="p">);</span>

<span class="o">...</span>

<span class="c1">//Retrieve saved token id for this customer from database
</span><span class="nv">$saved_token_id</span> <span class="o">=</span> <span class="s2">"&lt;saved token id&gt;"</span><span class="p">;</span>

<span class="nv">$transaction_data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'payment_type'</span>      <span class="o">=&gt;</span> <span class="s1">'credit_card'</span><span class="p">,</span> 
  <span class="s1">'credit_card'</span>       <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'token_id'</span>  <span class="o">=&gt;</span> <span class="nv">$saved_token_id</span><span class="p">,</span>
    <span class="s1">'bank'</span>    <span class="o">=&gt;</span> <span class="s1">'bni'</span><span class="p">,</span>
    <span class="p">),</span>
  <span class="s1">'transaction_details'</span>   <span class="o">=&gt;</span> <span class="nv">$transaction_details</span><span class="p">,</span>
  <span class="s1">'customer_details'</span> <span class="o">=&gt;</span> <span class="nv">$customer_details</span><span class="p">,</span>
  <span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nx">Veritrans_VtDirect</span><span class="o">::</span><span class="na">charge</span><span class="p">(</span><span class="nv">$transaction_data</span><span class="p">);</span>

<span class="o">...</span>

<span class="cp">?&gt;</span>
</code></pre>

    <p>Structure and example of <em>state</em> <code>$result</code> is the same with the standard <a href="integration_cc.html#step2">charge transaction process</a>.</p>

<pre><code class="highlight php">array(
    "transaction_id" =&gt; "05dfbd23-b767-4748-8fe9-7e30769e1857",
    "order_id" =&gt; "order53",
    "gross_amount" =&gt; "200000.00",
    "payment_type" =&gt; "credit_card",
    "transaction_time" =&gt; "2014-03-27 17:25:12",
    "transaction_status" =&gt; "capture",
    "status_code" =&gt; "200",
    "bank" =&gt; "bni",
    "status_message" =&gt; "Success, Credit Card transaction is successful"
);
</code></pre>

  </div>
  <div class="tab-pane" id="two-click">

    <h2 id="two-clicks">Two Clicks</h2>

    <p>Token on two clicks represents the customer’s card number and expiry date. Your customer simply has to fill in the CVV and 3D Secure authentication on the following transaction. The difference between one click is that two clicks feature can be used in both 3D Secure and non-3D Secure transaction.</p>

    <p>In general, there are two steps required to utilise two clicks feature:</p>

    <ol>
      <li>Initial Transaction
        <ul>
          <li>Customer fill the credit card number, CVV, expiry date</li>
          <li>Customer perform 3D Secure authentication</li>
          <li>Merchant receives token</li>
          <li>Merchant uses token to charge transaction</li>
          <li>When transaction successful, merchant save customer’s token in the database. We name this token as <code>saved_token</code>.</li>
        </ul>
      </li>
      <li>Following Transaction
        <ul>
          <li>Merchant retrieve customer <code>saved_token</code> from database </li>
          <li>Customer fill in CVV</li>
          <li>Perform 3D Secure authentication if required</li>
          <li>Merchant uses <code>saved_token</code> and CVV to acquired new token</li>
          <li>Merchant uses new token to charge transaction</li>
        </ul>
      </li>
    </ol>

    <h3 id="initial-transaction-1">Initial Transaction</h3>

    <p>Initial transaction implementation is similar to standard <a href="integration_cc.html#step2">charge transaction</a>. You simply have to add the attribute <code>saved_token_id</code> during charge transaction. When transaction is successful, the token is saved for the following transaction.</p>

<pre><code class="highlight php"><span class="cp">&lt;?php</span>
<span class="k">include_once</span><span class="p">(</span><span class="s1">'Veritrans.php'</span><span class="p">);</span>

<span class="o">...</span>

<span class="nv">$transaction_data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'payment_type'</span>      <span class="o">=&gt;</span> <span class="s1">'credit_card'</span><span class="p">,</span> 
  <span class="s1">'credit_card'</span>       <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'token_id'</span>  <span class="o">=&gt;</span> <span class="nv">$token_id</span><span class="p">,</span>
    <span class="s1">'bank'</span>    <span class="o">=&gt;</span> <span class="s1">'bni'</span><span class="p">,</span>
    <span class="s1">'save_token_id'</span> <span class="o">=&gt;</span> <span class="kc">true</span>
    <span class="p">),</span>
  <span class="s1">'transaction_details'</span>   <span class="o">=&gt;</span> <span class="nv">$transaction_details</span><span class="p">,</span>
  <span class="s1">'customer_details'</span> <span class="o">=&gt;</span> <span class="nv">$customer_details</span><span class="p">,</span>
  <span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nx">Veritrans_VtDirect</span><span class="o">::</span><span class="na">charge</span><span class="p">(</span><span class="nv">$transaction_data</span><span class="p">);</span>
<span class="nv">$status</span> <span class="o">=</span> <span class="nv">$result</span><span class="o">-&gt;</span><span class="na">transaction_status</span><span class="p">;</span>

<span class="k">if</span><span class="p">(</span><span class="nv">$status</span> <span class="o">==</span> <span class="s1">'capture'</span><span class="p">){</span>
  <span class="c1">// save 'token_id' for this customer in database
</span><span class="p">}</span>
<span class="o">...</span>

<span class="cp">?&gt;</span>
</code></pre>

    <p>On the above example, two clicks response is saved in the variable <code>$result</code>. Structure and example of <em>state</em> <code>$result</code> when two clicks process is successful is as follows:</p>

<pre><code class="highlight php">array(
  "transaction_id" =&gt; "ca5e0ff5-4297-48ef-aa25-b3ab018d4ead",
  "order_id" =&gt; "order52",
  "gross_amount" =&gt; "200000.00",
  "payment_type" =&gt; "credit_card",
  "transaction_time" =&gt; "2014-03-27 17:20:53",
  "transaction_status" =&gt; "capture",
  "fraud_status" =&gt; "accept",
  "masked_card" =&gt; "481111-1114",
  "saved_token_id" =&gt; "4011117d16c884-2cc7-4624-b0a8-10273b7f6cc8",
  "saved_token_id_expired_at" =&gt; "2024-03-27 17:20:53",
  "status_code" =&gt; "200",
  "bank" =&gt; "bni",
  "status_message" =&gt; "Success, Credit Card 3D Secure transaction is successful"
);
</code></pre>

    <p>Two important attributes for a successful two clicks response is <code>saved_token_id</code> and <code>saved_token_id_expired</code>. <code>saved_token_id</code> is the token that you save when the customer make a following transaction. This attribute is what we referred as <code>saved_token</code> on two clicks step. The value from <code>saved_token</code> can be used repeatedly until <code>saved_token_id_expired</code>.</p>

    <hr />

    <h3 id="following-transaction-1">Following Transaction</h3>

    <p>On the following transaction, we use the <code>saved_token</code> and the customer filled CVV to acquire new token. <code>two_click</code> attributes also need to be added when new request token is performed. The new token will be used for the following transaction. The new token will be automatically filled in <code>&lt;input id="token-id" name="token-id" type="hidden" /&gt;</code> by <code>veritrans.min.js</code>.</p>

    <p>Do note that you <strong>do not</strong> use <code>saved_token</code> to perform charge transaction. You use <code>saved_token</code> as one of the condition to acquire new token. You <strong>do not</strong> save new token from the customer to the database.</p>

    <p>Field number and expiry date in the form can be removed because the customer simply need to fill the CVV and perform 3D Secure authentication. Using the same example in <a href="integration_cc.html#step2">charge transaction</a>, the following example is the new request token using the <code>saved_token</code> and CVV from the customer:</p>

<pre><code class="highlight html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>

<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  
  <span class="p">...</span>

  <span class="kd">var</span> <span class="nx">card</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="s1">'card_cvv'</span> <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#card-cvv"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="s1">'token_id'</span> <span class="p">:</span> <span class="s1">'&lt;retrieve this customer saved_token from your database&gt;'</span><span class="p">,</span>


      <span class="s1">'two_click'</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s1">'secure'</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s1">'bank'</span> <span class="p">:</span> <span class="s1">'bni'</span><span class="p">,</span>
      <span class="s1">'gross_amount'</span> <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#price"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="p">...</span>

<span class="nt">&lt;/script&gt;</span>
</code></pre>

    <p>The following charge transaction on two steps is the same with the standard process <a href="integration_cc.html#step2">charge transaction</a>. You simply use the new token as the token_id.</p>

<pre><code class="highlight php"><span class="cp">&lt;?php</span>
<span class="k">include_once</span><span class="p">(</span><span class="s1">'Veritrans.php'</span><span class="p">);</span>

<span class="o">...</span>

<span class="nv">$token_id</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'token-id'</span><span class="p">];</span>

<span class="nv">$transaction_data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'payment_type'</span>      <span class="o">=&gt;</span> <span class="s1">'credit_card'</span><span class="p">,</span> 
  <span class="s1">'credit_card'</span>       <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'token_id'</span>  <span class="o">=&gt;</span> <span class="nv">$token_id</span><span class="p">,</span>
    <span class="s1">'bank'</span>    <span class="o">=&gt;</span> <span class="s1">'bni'</span><span class="p">,</span>
    <span class="p">),</span>
  <span class="s1">'transaction_details'</span>   <span class="o">=&gt;</span> <span class="nv">$transaction_details</span><span class="p">,</span>
  <span class="s1">'customer_details'</span> <span class="o">=&gt;</span> <span class="nv">$customer_details</span><span class="p">,</span>
  <span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nx">Veritrans_VtDirect</span><span class="o">::</span><span class="na">charge</span><span class="p">(</span><span class="nv">$transaction_data</span><span class="p">);</span>

<span class="o">...</span>

<span class="cp">?&gt;</span>
</code></pre>

    <p>Structure and example of <em>state</em> <code>$result</code> is the same with the standard <a href="integration_cc.html#step2">charge transaction process</a>.</p>

<pre><code class="highlight php">array(
    "transaction_id" =&gt; "05dfbd23-b767-4748-8fe9-7e30769e1857",
    "order_id" =&gt; "order53",
    "gross_amount" =&gt; "200000.00",
    "payment_type" =&gt; "credit_card",
    "transaction_time" =&gt; "2014-03-27 17:25:12",
    "transaction_status" =&gt; "capture",
    "status_code" =&gt; "200",
    "bank" =&gt; "bni",
    "status_message" =&gt; "Success, Credit Card transaction is successful"
);
</code></pre>

  </div>
</div>


			<div class="pagination">
				<ul><li class="left">« Previous: <a href="integration.html">VT-Direct : Integration</a></li><li class="right">Next: <a href="other_commands.html">VT-Direct : Other Commands</a> »</li></ul>
			</div>
          </div>
        </div><!--/span-->
      </div><!--/row-->

    </div><!--/.container-->
    <div class="custom-container footer">
  <div class="wrapper">
    <div class="row">
      <div class="col-md-12 copyright">
        <div class="content text-center">
          <span>&copy;2014 PT. Midtrans (Veritrans Indonesia). All Rights Reserved</span>
          <span class="divider">|</span>
          <a href="privacy.html" title="Privacy Policy">Privacy Policy</a>
        </div>
      </div>
    </div>
  </div>
</div>

    <script src="../javascripts/jquery-1.10.2.min.js" type="text/javascript"></script>
<script src="../javascripts/bootstrap.min.js" type="text/javascript"></script>
<script src="../javascripts/get-token.js" type="text/javascript"></script>
<script src="../javascripts/dropdown.js" type="text/javascript"></script>
<script src="../javascripts/tab_custom.js" type="text/javascript"></script>
    <script type="text/javascript" src="https://api.sandbox.veritrans.co.id/v2/assets/js/veritrans.min.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-32232768-1', 'veritrans.co.id');
      ga('send', 'pageview');

    </script>
    <script>
    $(document).ready(function() {
      $('[data-toggle=offcanvas]').click(function() {
        $('.row-offcanvas').toggleClass('active');
      });
    });
    </script>
  </body>
</html>
