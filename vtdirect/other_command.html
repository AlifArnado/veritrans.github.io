<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Veritrans API Documentation. Payment Gateway Indonesia, transaksi online lebih aman, mudah, cepat! Veritrans memberi solusi sistem payment gateway terbaik untuk e-commerce di Indonesia.">
    <meta name="keywords" content="Veritrans, Veritrans Indonesia, payment gateway indonesia, Pembayaran Online Indonesia, online payment Indonesia, sistem transaksi online"> 
    <link href="../stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    <title>Docs - Veritrans Indonesia</title>
		<link rel="shortcut icon" href="/favicon.ico"/>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
     <!-- Fixed navbar -->
<div class="header navbar navbar-default navbar-fixed-top">
  <div class="custom-container">
    <div class="col-md-3 navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <h2 class="logo"><a href="index.html" title="Home"><span>Veritrans</span></a></h2>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="whatwedo.html" title="What We Do">what we do</a></li>
        <li><a href="index.html#vt-products" title="Our Online Payment Products">products</a></li>
        <li><a href="pricing.html" title="Check for Our Pricing">pricing</a></li>
        <li><a href="about.html" title="About Veritrans">about</a></li>
        <!-- <li><a href="http://docs.veritrans.co.id" title="Product Documentations">docs</a></li> -->
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">developer <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="sandbox.html">sandbox</a></li>
            <li><a href="https://docs.google.com/document/d/1Z0s7CsXp91YD52ibWcQ7iIQ6TDtWr3XCI1uaFQF12-w/pub">documentation</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">more <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="http://docs.veritrans.co.id/faq/general.html" title="FAQ & How To">FAQ</a></li>
            <li><a href="http://blog.veritrans.co.id" title="Blog, News and Press Release">blog</a></li>
            <li><a href="career.html" title="Career at Veritrans">career</a></li>
            <li><a href="contact.html" title="Contact Us">contact</a></li>
          </ul>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right register-login">
        <li class="pull-left"><a href="https://my.veritrans.co.id/register" class="register">register</a></li>
        <li class="pull-left"><a href="https://my.veritrans.co.id/login">login</a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>

    <div class="custom-container">
      <div class="row row-offcanvas row-offcanvas-right">
        <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
	<div class="documentation-sidebar">
		<div class="docs-logo">
			<span>DOCS</span>
		</div>
		<div class="language-toggle"> English / <a href="../id/vtdirect/other_command.html">Bahasa Indonesia</a></div>
		<ul class="sidebar">
			
			<li><a class="parent">FAQ</a>
				<ul class="child-menu">
					
					<li class=""><a href="../faq/general.html">General</a></li>
					
					<li class=""><a href="../faq/pricing.html">Pricing</a></li>
					
					<li class=""><a href="../faq/fraud_and_security.html">Fraud and Security</a></li>
					
					<li class=""><a href="../faq/integration.html">Integration</a></li>
					
					<li class=""><a href="../faq/account_management.html">Account Management</a></li>
					
					<li class=""><a href="../faq/fds_response.html">Fraud Detection System (FDS) Response</a></li>
					
				</ul>
			</li>
			<li><a class="parent">How to</a>
				<ul class="child-menu">
					
					<li class=""><a href="../howto/fds.html">Fraud Detection System (FDS) Response</a></li>
					
					<li class=""><a href="../howto/cancel.html">Cancel/Void an Authorised Transaction</a></li>
					
				</ul>
			</li>
		</ul>
	</div>
</div><!--/span-->
        <div class="col-xs-12 col-sm-9" id="bodier">
          <p class="pull-right visible-xs">
            <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Menu</button>
          </p>
          <div class="vtdirect-other-command">
            <h2 id="other-commands-on-vt-direct">Other Commands on VT-Direct</h2>

<h3 id="cancel-transaction">Cancel Transaction</h3>

<p>If a transaction has not yet settled with the bank, the merchant has an option to cancel the transaction. Unless specified otherwise by Veritrans, the default cut-off time for transaction settlement is 10pm every day and it settles all transactions conducted between 8:30pm the previous day to 8:30pm of the day of settlement (24hrs). Transactions conducted within the settlement window can be cancelled as long as it is before 10pm.</p>

<h4 id="endpoint">Endpoint</h4>

<table>
  <tbody>
    <tr>
      <td>Endpoint</td>
      <td>:</td>
      <td>https://payments.veritrans.co.id/vtdirect/v1/void</td>
    </tr>
    <tr>
      <td>HTTP Method</td>
      <td>:</td>
      <td>POST</td>
    </tr>
  </tbody>
</table>

<h4 id="header">Header</h4>

<table>
  <tbody>
    <tr>
      <td>Accept</td>
      <td>:</td>
      <td>application/json</td>
    </tr>
    <tr>
      <td>Content-Type</td>
      <td>:</td>
      <td>application/json</td>
    </tr>
    <tr>
      <td>Authorization</td>
      <td>:</td>
      <td>Basic Base64(server-key:) <strong>Please look at the section on Charge transaction</strong></td>
    </tr>
  </tbody>
</table>

<h4 id="body">Body</h4>

<p>Body Raw:</p>

<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">&quot;order_id&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;transaksi001&quot;</span><span class="w"> 
</span><span class="p">}</span><span class="w">
</span></pre>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>order_id</td>
      <td>Order id of the transaction that will be cancelled</td>
      <td>Transaksi001</td>
    </tr>
  </tbody>
</table>

<h4 id="response">Response</h4>

<p>Example of a <strong>successful cancel transaction request</strong> response:</p>

<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">&quot;order_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vtdirect3&quot;</span><span class="p">,</span><span class="w">
    </span><span class="s2">&quot;transaction_status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cancel&quot;</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;VD00&quot;</span><span class="p">,</span><span class="w">
  </span><span class="s2">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="w">
  </span><span class="s2">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Success do void transaction&quot;</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Example of a <strong>failure cancel transaction request</strong> response:</p>

<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;VD01&quot;</span><span class="p">,</span><span class="w">
  </span><span class="s2">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;failure&quot;</span><span class="p">,</span><span class="w">
  </span><span class="s2">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;[Invalid order id]&quot;</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<h4 id="sample-code">Sample code</h4>

<!-- Nav tabs -->
<ul class="nav nav-tabs">
  <li class="active"><a href="#php1" data-toggle="tab">PHP</a></li>
	<li><a href="#ruby1" data-toggle="tab">Ruby</a></li>
</ul>

<div class="tab-content">
	<div class="tab-pane active" id="php1">
<pre class="highlight php"><span class="cp">&lt;?php</span>

<span class="nv">$data</span><span class="p">[</span><span class="s1">'order_id'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;order123&quot;</span><span class="p">;</span>

<span class="nv">$vt_cancel_endpoint</span> <span class="o">=</span> <span class="s2">&quot;https://payments.veritrans.co.id/vtdirect/v1/void&quot;</span><span class="p">;</span>
<span class="nv">$server_key</span> <span class="o">=</span> <span class="s2">&quot;c662f47d-8a2c-4fe7-8ad2-02bfaf1fb725&quot;</span><span class="p">;</span> <span class="c1">//change with your actual server_key
</span><span class="nv">$auth</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s1">'Authorization: Basic %s'</span><span class="p">,</span> <span class="nb">base64_encode</span><span class="p">(</span><span class="nv">$server_key</span><span class="o">.</span><span class="s1">':'</span><span class="p">));</span>

<span class="nv">$data_string</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">(</span><span class="nv">$vt_cancel_endpoint</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$data_string</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
  <span class="s1">'Accept: application/json'</span><span class="p">,</span>
  <span class="nv">$auth</span> <span class="p">)</span>
<span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">status</span> <span class="o">==</span> <span class="s2">&quot;success&quot;</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">echo</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">data</span><span class="o">-&gt;</span><span class="na">transaction_status</span><span class="p">;</span>
  <span class="c1">//do some business logic here
</span><span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
  <span class="c1">// Error while sending charge request to VT-Direct server. Check request status for further info.
</span>  <span class="c1">// Please customize the error.
</span>  <span class="k">echo</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">message</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">?&gt;</span>

</pre>	</div>
	<div class="tab-pane" id="ruby1">
<pre class="highlight ruby"><span class="n">data</span> <span class="o">=</span> <span class="no">Hash</span><span class="nf">.new</span>
<span class="n">data</span><span class="o">[</span><span class="s1">'order_id'</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;order123&quot;</span>

<span class="n">server_key</span> <span class="o">=</span> <span class="s2">&quot;c662f47d-8a2c-4fe7-8ad2-02bfaf1fb725&quot;</span><span class="p">;</span> <span class="c1">#change with your actual server_key</span>

<span class="n">conn</span> <span class="o">=</span> <span class="no">Faraday</span><span class="nf">.new</span><span class="p">(</span><span class="ss">:url</span> <span class="o">=&gt;</span> <span class="s1">'https://payments.veritrans.co.id'</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">faraday</span><span class="o">|</span>
  <span class="n">faraday</span><span class="nf">.request</span>  <span class="ss">:url_encoded</span>             <span class="c1"># form-encode POST params</span>
  <span class="n">faraday</span><span class="nf">.adapter</span>  <span class="no">Faraday</span><span class="nf">.default_adapter</span>  <span class="c1"># make requests with Net::HTTP</span>
<span class="k">end</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">conn</span><span class="nf">.post</span> <span class="k">do</span> <span class="o">|</span><span class="n">req</span><span class="o">|</span>
  <span class="n">req</span><span class="nf">.url</span> <span class="s1">'/vtdirect/v1/void'</span>
  <span class="n">req</span><span class="nf">.headers</span><span class="o">[</span><span class="s1">'Accept'</span><span class="o">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
  <span class="n">req</span><span class="nf">.headers</span><span class="o">[</span><span class="s1">'Content-Type'</span><span class="o">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
  <span class="n">req</span><span class="nf">.headers</span><span class="o">[</span><span class="s1">'Authorization'</span><span class="o">]</span> <span class="o">=</span> <span class="s1">'Basic '</span> <span class="o">+</span> <span class="no">Base64</span><span class="nf">.encode64</span><span class="p">(</span><span class="n">server_key</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span><span class="p">)</span>
  <span class="n">req</span><span class="nf">.body</span> <span class="o">=</span> <span class="n">data</span><span class="nf">.to_json</span>
<span class="k">end</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">JSON</span><span class="nf">.parse</span> <span class="n">response</span><span class="nf">.body</span>

<span class="k">if</span> <span class="n">result</span><span class="o">[</span><span class="s1">'status'</span><span class="o">]</span> <span class="o">==</span> <span class="s2">&quot;success&quot;</span>
    <span class="n">transaction_status</span> <span class="o">=</span>  <span class="n">result</span><span class="o">[</span><span class="s1">'data'</span><span class="o">][</span><span class="s1">'transaction_status'</span><span class="o">]</span>
    <span class="c1">#do some business logic here</span>
<span class="k">else</span>
  <span class="c1"># Error while sending charge request to VT-Direct server. Check request status to see error code description.</span>
	<span class="c1"># Please customize the error.</span>
<span class="k">end</span>

</pre>	</div>
</div>

<h3 id="check-transaction-status">Check Transaction Status</h3>

<p>Merchants can check the status of a particular transaction using the status API.</p>

<h4 id="endpoint-1">Endpoint</h4>

<table>
  <tbody>
    <tr>
      <td>Endpoint</td>
      <td>:</td>
      <td>https://payments.veritrans.co.id/vtdirect/v1/status</td>
    </tr>
    <tr>
      <td>HTTP Method</td>
      <td>:</td>
      <td>POST</td>
    </tr>
  </tbody>
</table>

<h4 id="header-1">Header</h4>

<table>
  <tbody>
    <tr>
      <td>Accept</td>
      <td>:</td>
      <td>application/json</td>
    </tr>
    <tr>
      <td>Content-Type</td>
      <td>:</td>
      <td>application/json</td>
    </tr>
    <tr>
      <td>Authorization</td>
      <td>:</td>
      <td>Basic Base64(server-key:) <strong>Please look at the section on Charge transaction</strong></td>
    </tr>
  </tbody>
</table>

<h4 id="body-1">Body</h4>

<p>Body Raw:</p>

<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">&quot;order_id&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;transaksi001&quot;</span><span class="w"> 
</span><span class="p">}</span><span class="w">
</span></pre>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>order_id</td>
      <td>Order id of the transaction you want to check</td>
      <td>Transaksi001</td>
    </tr>
  </tbody>
</table>

<h4 id="response-1">Response</h4>

<p>Example of a response for a <strong>transaction that has been cancelled</strong>:</p>

<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">&quot;order_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;normal42&quot;</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">&quot;transaction_status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cancel&quot;</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;VD00&quot;</span><span class="p">,</span><span class="w">
  </span><span class="s2">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="w">
  </span><span class="s2">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Success get status transaction&quot;</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Example of a response for a <strong>transaction that has been challenged</strong> by VT Fraud Detection System:</p>

<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">&quot;order_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;normal40&quot;</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">&quot;transaction_status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;challenge&quot;</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;VD00&quot;</span><span class="p">,</span><span class="w">
  </span><span class="s2">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="w">
  </span><span class="s2">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Success get status transaction&quot;</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Example of a request <strong>failure</strong> response:</p>

<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;VD01&quot;</span><span class="p">,</span><span class="w">
  </span><span class="s2">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;failure&quot;</span><span class="p">,</span><span class="w">
  </span><span class="s2">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Order id is not found&quot;</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<h4 id="sample-code-1">Sample code</h4>

<!-- Nav tabs -->
<ul class="nav nav-tabs">
  <li class="active"><a href="#php2" data-toggle="tab">PHP</a></li>
	<li><a href="#ruby2" data-toggle="tab">Ruby</a></li>
</ul>

<div class="tab-content">
	<div class="tab-pane active" id="php2">
<pre class="highlight php"><span class="cp">&lt;?php</span>

<span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
 <span class="s1">'order_id'</span> <span class="o">=&gt;</span> <span class="s2">&quot;order123&quot;</span> <span class="c1">//order_id to be checked
</span><span class="p">);</span>

<span class="nv">$vt_status_endpoint</span> <span class="o">=</span> <span class="s2">&quot;https://payments.veritrans.co.id/vtdirect/v1/status&quot;</span><span class="p">;</span>
<span class="nv">$server_key</span> <span class="o">=</span> <span class="s2">&quot;c662f47d-8a2c-4fe7-8ad2-02bfaf1fb725&quot;</span><span class="p">;</span> <span class="c1">//change with your actual server_key
</span><span class="nv">$auth</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s1">'Authorization: Basic %s'</span><span class="p">,</span> <span class="nb">base64_encode</span><span class="p">(</span><span class="nv">$server_key</span><span class="o">.</span><span class="s1">':'</span><span class="p">));</span>

<span class="nv">$data_string</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">(</span><span class="nv">$vt_status_endpoint</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$data_string</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
		<span class="s1">'Accept: application/json'</span><span class="p">,</span>
		<span class="nv">$auth</span> <span class="p">)</span>
<span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">status</span> <span class="o">==</span> <span class="s2">&quot;success&quot;</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">echo</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">data</span><span class="o">-&gt;</span><span class="na">transaction_status</span><span class="p">;</span>
	<span class="c1">//do some business logic here
</span><span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
	<span class="c1">// Error while sending charge request to VT-Direct server. Check request status for further info.
</span>	<span class="c1">// Please customize the error.
</span>	<span class="k">echo</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">message</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">?&gt;</span>

</pre>	</div>
	<div class="tab-pane" id="ruby2">
<pre class="highlight ruby"><span class="n">data</span> <span class="o">=</span> <span class="no">Hash</span><span class="nf">.new</span>
<span class="n">data</span><span class="o">[</span><span class="s1">'order_id'</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;order123&quot;</span>

<span class="n">server_key</span> <span class="o">=</span> <span class="s2">&quot;c662f47d-8a2c-4fe7-8ad2-02bfaf1fb725&quot;</span><span class="p">;</span> <span class="c1">#change with your actual server_key</span>

<span class="n">conn</span> <span class="o">=</span> <span class="no">Faraday</span><span class="nf">.new</span><span class="p">(</span><span class="ss">:url</span> <span class="o">=&gt;</span> <span class="s1">'https://payments.veritrans.co.id'</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">faraday</span><span class="o">|</span>
  <span class="n">faraday</span><span class="nf">.request</span>  <span class="ss">:url_encoded</span>             <span class="c1"># form-encode POST params</span>
  <span class="n">faraday</span><span class="nf">.adapter</span>  <span class="no">Faraday</span><span class="nf">.default_adapter</span>  <span class="c1"># make requests with Net::HTTP</span>
<span class="k">end</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">conn</span><span class="nf">.post</span> <span class="k">do</span> <span class="o">|</span><span class="n">req</span><span class="o">|</span>
  <span class="n">req</span><span class="nf">.url</span> <span class="s1">'/vtdirect/v1/status'</span>
  <span class="n">req</span><span class="nf">.headers</span><span class="o">[</span><span class="s1">'Accept'</span><span class="o">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
  <span class="n">req</span><span class="nf">.headers</span><span class="o">[</span><span class="s1">'Content-Type'</span><span class="o">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
  <span class="n">req</span><span class="nf">.headers</span><span class="o">[</span><span class="s1">'Authorization'</span><span class="o">]</span> <span class="o">=</span> <span class="s1">'Basic '</span> <span class="o">+</span> <span class="no">Base64</span><span class="nf">.encode64</span><span class="p">(</span><span class="n">server_key</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span><span class="p">)</span>
  <span class="n">req</span><span class="nf">.body</span> <span class="o">=</span> <span class="n">data</span><span class="nf">.to_json</span>
<span class="k">end</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">JSON</span><span class="nf">.parse</span> <span class="n">response</span><span class="nf">.body</span>

<span class="k">if</span> <span class="n">result</span><span class="o">[</span><span class="s1">'status'</span><span class="o">]</span> <span class="o">==</span> <span class="s2">&quot;success&quot;</span>
    <span class="n">transaction_status</span> <span class="o">=</span>  <span class="n">result</span><span class="o">[</span><span class="s1">'data'</span><span class="o">][</span><span class="s1">'transaction_status'</span><span class="o">]</span>
    <span class="c1">#do some business logic here</span>
<span class="k">else</span>
  <span class="c1"># Error while sending charge request to VT-Direct server. Check request status to see error code description.</span>
  <span class="c1"># Please customize the error.</span>
<span class="k">end</span>
</pre>	</div>
</div>


			<div class="pagination">
				<ul></ul>
			</div>
          </div>
        </div><!--/span-->
      </div><!--/row-->

    </div><!--/.container-->
    <div class="custom-container footer">
  <div class="wrapper">
    <div class="row">
      <div class="col-md-12 footer-nav">
        <div class="content text-center">
          <a href="https://www.veritrans.co.id" title="">Home</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/whatwedo.html" title="">What We Do</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/pricing.html" title="">Pricing</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/about.html" title="">About</a> <span class="divider">|</span>
          <a href="http://blog.veritrans.co.id/" title="">Blog</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/career.html" title="">Career</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/contact.html" title="">Contact</a> <span class="divider">|</span>
          <a href="https://docs.google.com/document/d/1Z0s7CsXp91YD52ibWcQ7iIQ6TDtWr3XCI1uaFQF12-w/pub" title="System Documentations">Docs</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/press.html" title="">Press</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/privacy.html" title="">Privacy Policy</a>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 copyright">
        <div class="content text-center">
          <span>©2014 PT. Midtrans (Veritrans Indonesia). All Rights Reserved</span>
        </div>
      </div>
    </div>
  </div>
</div>

    <script src="../javascripts/jquery-1.10.2.min.js" type="text/javascript"></script>
<script src="../javascripts/bootstrap.min.js" type="text/javascript"></script>
    <script>
    $(document).ready(function() {
      $('[data-toggle=offcanvas]').click(function() {
        $('.row-offcanvas').toggleClass('active');
      });
    });
    </script>
  </body>
</html>
