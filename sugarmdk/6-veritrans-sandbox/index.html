<!DOCTYPE html><!--[if lt IE 7]><html class="no-js lt-ie10 lt-ie9 lt-ie8 lt-ie7"><![endif]--><!--[if IE 7]><html class="no-js lt-ie10 lt-ie9 lt-ie8"><![endif]--><!--[if IE 8]><html class="no-js lt-ie10 lt-ie9"><![endif]--><!--[if IE 9]><html class="no-js lt-ie10"><![endif]--><!--[if (gt IE 9)|!(IE)]<!--><html class="nojs"><!--<![endif]--><head><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Veritrans Sandbox</title><meta content="" name="description" /><meta content="width=device-width, initial-scale=1" name="viewport" /><link href="../../assets/stylesheets/app-cb52da42.css" media="screen" rel="stylesheet" type="text/css" /></head><body><!--[if lte IE 7]><p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p><![endif]--><header><h1>Veritrans docs</h1></header><section><aside><menu><li><a href="/">Home</a></li><li><a href="/sugarmdk">Sugar MKD</a><ul><li><a href="/sugarmdk/1-introducing/">1. Introducing</a></li><li><a href="/sugarmdk/2-payment-manager/">2. Payment Manager</a></li><li><a href="/sugarmdk/3-handling-exception-and-error-codes/">3. Handling Exception and Error Codes</a></li><li><a href="/sugarmdk/4-order-manager/">4. Order Manager</a></li><li><a href="/sugarmdk/5-sub-merchant-manager/">5. Sub Merchant Manager</a></li><li><a href="/sugarmdk/6-veritrans-sandbox/">6. Veritrans Sandbox</a></li><li><a href="/sugarmdk/7-appendix/">7. Appendix</a></li></ul></li></menu></aside><article><h1>Veritrans Sandbox</h1>

<p>Veritrans Sandbox can be used by merchant to do test transaction and services provided by sugar-mdk, before using production environment.</p>

<h4>MDK Host Connection</h4>
<pre class="highlight text">Staging Gateway IP Address :    117.102.113.10
Staging Gateway Port :     80
</pre>
<h4>VT-Web Host Connection</h4>
<pre class="highlight text">Staging Gateway IP Address :    117.102.113.10
Staging Gateway Port :     8080
</pre>
<h4>MAP Host Connection</h4>
<pre class="highlight text">Staging Gateway IP Address :   117.102.113.10
Staging Gateway Port :    3000
</pre>
<h4>Merchant Authentication</h4>
<pre class="highlight text">Username : A100000000000001000233cc
Password : af757b7d932482672d78396539638e18ddb8510d8703a1972660f0a74d40b8fb
Merchant Id : A100000000000001000233
</pre>
<h4>SubMerchant Authentication</h4>
<pre class="highlight text">Username : A100000000000001000234cc
Password : 0a27524d58fb6394fd5586bcc6ebdf4938e36b8ba1868f2ee15b09d54e9ccb15
Merchant Id : A100000000000001000234
</pre>
<h4>MDK Properties</h4>

<p>To setup the settings needed to connect to Veritrans&#39; server, merchant need to have &ldquo;mdk.properties&rdquo; file in their classpath.
Properties that are needed inside the mdk.properties file</p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
<th style="text-align: center">Mandatory (Y/N)</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td>mdk.host</td>
<td style="text-align: center">String</td>
<td style="text-align: center">Y</td>
<td style="text-align: left">Host address and port of the Veritrans Gateway. (Use Sandbox IP and Port to do testing transaction)</td>
</tr>
<tr>
<td>web.host</td>
<td style="text-align: center">String</td>
<td style="text-align: center">Y</td>
<td style="text-align: left">Host address and port of the Veritrans VT-Web. (Use Sandbox IP and Post to do testing transaction)</td>
</tr>
<tr>
<td>map.host</td>
<td style="text-align: center">String</td>
<td style="text-align: center">Y</td>
<td style="text-align: left">Host address and port for merchant detail services. (Use Sandbox IP and Port to do testing transaction)</td>
</tr>
<tr>
<td>mdk.proxy.host</td>
<td style="text-align: center">String</td>
<td style="text-align: center">N</td>
<td style="text-align: left">Host name of proxy, if merchant need to connect through a proxy for connecting to outside network</td>
</tr>
<tr>
<td>mdk.proxy.port</td>
<td style="text-align: center">String</td>
<td style="text-align: center">N</td>
<td style="text-align: left">Port number of proxy</td>
</tr>
<tr>
<td>mdk.proxy.username</td>
<td style="text-align: center">String</td>
<td style="text-align: center">N</td>
<td style="text-align: left">User name to connect to merchant proxy server</td>
</tr>
<tr>
<td>mdk.proxy.password</td>
<td style="text-align: center">String</td>
<td style="text-align: center">N</td>
<td style="text-align: left">Password to connect to merchant proxy</td>
</tr>
</tbody></table>

<p>Sample of mdk.properties</p>

<p><strong>#ip for staging</strong></p>
<pre class="highlight text">mdk.host=http://117.102.113.10:80
web.host=http://117.102.113.10:80
map.host=https://117.102.113.10:3000
</pre>
<p><strong>#host for proxy server (leave blank if not needed)</strong></p>

<p><code>mdk.proxy.host=192.168.2.1</code></p>

<p><strong>#port for proxy server (leave blank if not needed)</strong></p>

<p><code>mdk.proxy.port=8888</code></p>

<p><strong>#username for proxy server (leave blank if not needed)</strong></p>

<p><code>mdk.proxy.username=</code></p>

<p><strong>#password for proxy server (leave blank if not needed)</strong></p>

<p><code>mdk.proxy.password=</code></p>

<h2>6.1 Test Scenario - Normal Charge</h2>

<p>On Veritrans&#39; Staging Gateway, we have provided scenarios that can be used by merchant to test the different condition that can happen when using sugar-mdk to conduct a normal transaction. Please note that each scenario is determined by the credit card number. For each scenario, the CVV can be any number, while the expiration date only needs to be above today&rsquo;s date.</p>

<h4>Test Case 1. Authorize Transaction</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give success response transaction upon executing normal credit card transaction</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute doCharge() for normal credit card transaction. Use card number &ldquo;4111111111111111&rdquo;</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">doCharge() will return : ChargeResponse with transaction status = TransactionStatus.AUTHORIZE, ChargeResponse with code = C001</td>
</tr>
</tbody></table>

<h4>Test Case 2. Challenged by Fraud Detection System(FDS) Transaction</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give challenged response transaction upon executing normal credit card transaction</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute doCharge() for normal credit card transaction. Use card number &ldquo;4012888888881881&rdquo;</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">doCharge() will return : ChargeResponse with transaction status = TransactionStatus.CHALLENGE , ChargeResponse with code = R003</td>
</tr>
</tbody></table>

<h4>Test Case 3. Denied by FDS Transaction</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give denied by FDS response</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute doCharge() for normal credit card transaction. Use card number &ldquo;5120939736834980&rdquo;</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">doCharge() will return ChargeResponse with transaction status = TransactionStatus.DENY , ChargeResponse with code = R002</td>
</tr>
</tbody></table>

<h4>Test Case 4. Denied by Bank Transaction</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give denied by Bank response transaction upon executing normal credit card transaction</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute doCharge() for normal credit card transaction. Use card number &ldquo;4444414444444441&rdquo;</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">doCharge() will return : ChargeResponse with transaction status = TransactionStatus.DENY , ChargeResponse with code = CG01</td>
</tr>
</tbody></table>

<h2>6.2 Test Scenarios - Charge with 3D Secure</h2>

<p>On Veritrans&#39; Staging Gateway, we have provided scenarios that can be used by merchant to test the different condition that can happen when using sugar-mdk to conduct a transaction with 3D Secure. Please note that each scenario is determined by the credit card number. For each scenario, the CVV can be any number, while the expiration date only needs to be above today&rsquo;s date.</p>

<h4>Test Case 1. Fully Authorized Transaction (ECI 5 transaction)</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give success response transaction upon executing normal credit card transaction</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute do3DSecureCharge () . Use card number &ldquo;4111111111111111&rdquo;</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">receive3DSecureResponse() will return : D3SecureResponse.transactionStatus = TransactionStatus.AUTHORIZE , D3SecureResponse.status = success , D3SecureResponse.resultCode = C001 , D3SecureResponse.D3eci = 05</td>
</tr>
</tbody></table>

<h4>Test Case 2. Issuer or card holder not participating, but transaction is successful (ECI 6 transaction)</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give success response as this will be considered an attempted authetification using 3DS.</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute do3DSecureCharge () . Use card number &ldquo;4012000033330026&rdquo;</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">receive3DSecureResponse() will return : D3SecureResponse.transactionStatus = TransactionStatus.AUTHORIZE , D3SecureResponse.status = success , D3SecureResponse.resultCode = C001 , D3SecureResponse.D3eci = 06</td>
</tr>
</tbody></table>

<h4>Test Case 3. Failed Attempt</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give failed attempt to authenticate 3D Secure personal authentication</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute do3DSecureCharge () . Use card number &ldquo;5555555555554444&rdquo;</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">receive3DSecureResponse() will return : D3SecureResponse.transactionStatus  = TransactionStatus.DENY , D3SecureResponse.status = failure , D3SecureResponse.resultCode = SE12</td>
</tr>
</tbody></table>

<h4>Test Case 4. Communication error</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give failure because of communication error in Veritrans service or Directory Service</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute do3DSecureCharge () . Use card number &ldquo;4012888888881881&rdquo;</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">receive3DSecureResponse () will return : D3SecureResponse.transactionStatus  = TransactionStatus.DENY , D3SecureResponse.status = failure , D3SecureResponse.resultCode = SE14</td>
</tr>
</tbody></table>

<h4>Test Case 5. 3DSecure not completed by user (either timeout or immediately close browser)</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give PENDING because 3DSecure authentification was never completed by User or has been left idle for more than 10min. The transaction status will be updated to CANCEL twice a day within the Veritrans database.</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute do3DSecureCharge () . Use card number &ldquo;4111111111111111&rdquo; . Leave the 3DS open for more than 10min, or immediately close web browser</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">No response from Veritrans to Merchant, If Merchant query (get order) the transaction: Before 10min: ( D3SecureResponse.transactionStatus = TransactionStatus.PENDING 0 . After 10min: ( D3SecureResponse.transactionStatus = TransactionStatus.PENDING ) After update by VT system: ( D3SecureResponse.transactionStatus = TransactionStatus.CANCEL )</td>
</tr>
</tbody></table>

<h2>6.3 Test Scenarios - Installment Transactions</h2>

<p>Will be updated soon.</p>

<h2>6.4 Test Scenarios - Points Transactions</h2>

<p>Will be updated soon.</p>

<h2>6.5 Test Scenarios - Cancel Credit Card Transaction</h2>

<p>On Veritrans&#39; Staging Gateway, we have provided scenarios that can be used by merchant to test the different condition that can happen when using sugar-mdk to conduct a cancellation to credit card transaction.</p>

<h4>Test Case 1. Cancel Authorized Transaction without 3D Secure</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">Description  This test will give success cancel response upon cancelling normal transaction with Transaction. AUTHORIZE</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">1)  Execute doCharge() with card number &ldquo;4111111111111111&rdquo; to get authorized transaction 2)  Note the printed order id 3)  Execute doCancel() with the particular order id and sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">The CancelResponse will contain order id of the cancelled order with TransactionStatus.CANCEL</td>
</tr>
</tbody></table>

<h4>Test Case 2. Cancel Challenge Transaction without 3D Secure</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give failed cancel response upon cancelling normal transaction with TransactionStatus.CHALLENGE</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">1)  Execute doCharge() with card number &ldquo;4012888888881881&rdquo; to get challenged transaction  2)  Note the printed order id 3)  Execute doCancel() with the particular order id and sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">The system will throw VeritransException with code &ldquo;SG07&rdquo; and with message &ldquo;Invalid order type&rdquo;</td>
</tr>
</tbody></table>

<h4>Test Case 3. Cancel Deny Transaction without 3D Secure</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give failed cancel response upon cancelling normal transaction with TransactionStatus.DENY</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">1)  Execute doCharge() with card number &ldquo;5120939736834980&rdquo; to get denied transaction 2)  Note the printed order id 3)  Execute doCancel() with the particular order id and sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">The system will throw VeritransException with code &ldquo;SG07&rdquo; and with message &ldquo;Invalid order type&rdquo;</td>
</tr>
</tbody></table>

<h4>Test Case 4. Cancel Authorized Transaction with 3D Secure</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give success cancel response upon cancelling normal transaction with Transaction. AUTHORIZE</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">1)  Execute do3DSecureCharge() with card number &ldquo;4111111111111111&rdquo; to get authorized transaction 2)  Note the printed order id 3)  Execute doCancel() with the particular order id and sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">The CancelResponse will contain order id of the cancelled order with TransactionStatus.CANCEL</td>
</tr>
</tbody></table>

<h4>Test Case 5. Cancel Transaction with Invalid Order Id</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give failed cancellation upon cancelling non-existing order id</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute doCancel() with the non-existing order id (Ex. &ldquo;abc&rdquo;) and particular sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">System will throw VeritransException with code = &ldquo;SG05&rdquo; and message = &ldquo;Resource Not Found&rdquo;</td>
</tr>
</tbody></table>

<h2>6.6 Test Scenarios - Accept Challenge Transaction</h2>

<p>On Veritrans&#39; Staging Gateway, we have provided scenarios that can be used by merchant to test the different condition that can happen when using sugar-mdk to conduct an acceptance to transaction with challenged status.</p>

<h4>Test Case 1. Accept Challenged Transaction</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give success challenge action response upon accepting challenged transaction</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">1) Execute doCharge() with card number &ldquo;4012888888881881&rdquo; to get challenged transaction 2) Note the printed order id 3) Execute doAcceptChallenge() with the particular order id and sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">The ChallengeActionResponse will have ChallengeActionStatus.SUCCESS</td>
</tr>
</tbody></table>

<h4>Test Case 2. Accept Authorized Transaction</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give failed challenge action response upon accepting authorized transaction</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">1) Execute doCharge() with card number &ldquo;4111111111111111&rdquo; to get authorized transaction 2) Note the printed order id 3) Execute doAcceptChallenge() with the particular order id and sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">System will throw ValidationException with code SG02</td>
</tr>
</tbody></table>

<h4>Test Case 3. Accept Denied Transaction</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give failed challenge action response upon accepting denied transaction</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">1) Execute doCharge() with card number &ldquo;5120939736834980&rdquo; to get denied transaction 2) Note the printed order id 3) Execute doAcceptChallenge() with the particular order id and sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">System will throw ValidationException with code SG02</td>
</tr>
</tbody></table>

<h4>Test Case 4. Accept Transaction with Invalid Order Id</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give failed acceptance upon cancelling non-existing order id</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute doAcceptChallenge() with the non-existing order id (Ex. &ldquo;abc&rdquo;) and particular sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">System will throw VeritransException with code = &ldquo;SG05&rdquo; and message = &ldquo;Resource Not Found&rdquo;</td>
</tr>
</tbody></table>

<h2>6.7 Test Scenarios - Deny Challenge Transaction</h2>

<p>On Veritrans&#39; Staging Gateway, we have provided scenarios that can be used by merchant to test the different condition that can happen when using sugar-mdk to conduct a denial to transaction with challenged status.</p>

<h4>Test Case 1. Deny Challenged Transaction</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give success challenge action response upon accepting challenged transaction</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">1) Execute doCharge() with card number &ldquo;4012888888881881&rdquo; to get challenged transaction 2) Note the printed order id 3) Execute doDenyChallenge() with the particular order id and sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">The ChallengeActionResponse will have ChallengeActionStatus.SUCCESS</td>
</tr>
</tbody></table>

<h4>Test Case 2. Deny Authorized Transaction</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give failed challenge action response upon accepting authorized transaction</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">1) Execute doCharge() with card number &ldquo;4111111111111111&rdquo; to get authorized transaction 2) Note the printed order id 3) Execute doDenyChallenge() with the particular order id and sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">The ChallengeActionResponse will have ChallengeActionStatus.FAILED</td>
</tr>
</tbody></table>

<h4>Test Case 3. Deny Denied Transaction</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give failed challenge action response upon accepting denied transaction</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">1) Execute doCharge() with card number &ldquo;5120939736834980&rdquo; to get denied transaction 2) Note the printed order id 3) Execute doDenyChallenge() with the particular order id and sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">The ChallengeActionResponse will have ChallengeActionStatus.FAILED</td>
</tr>
</tbody></table>

<h4>Test Case 4. Deny Transaction with Invalid Order Id</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give failed denial upon cancelling non-existing order id</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute doDenyChallenge() with the non-existing order id (Ex. &ldquo;abc&rdquo;) and particular sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">System will throw VeritransException with code = &ldquo;SG05&rdquo; and message = &ldquo;Resource Not Found&rdquo;</td>
</tr>
</tbody></table>

<h2>6.8 Test Scenarios - Mandiri ClickPay using SugarMDK (Redirection)</h2>

<p>On Veritrans&#39; Staging Gateway, we have provided scenarios that can be used by merchant to test the different condition that can happen when using sugar-mdk to conduct Mandiri ClickPay transaction by using the SugarMDK.</p>

<h4>Sandbox Parameters</h4>

<p>These parameters are prepared for dummy as valid parameters. Please use them to test valid Mandiri ClickPay transactions.
mandiriClickPay.cardNumber = &ldquo;4617007700000039&rdquo;</p>

<h4>Test Case 1. Authorize Transaction</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give success response transaction upon executing Mandiri ClickPay transaction.</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Create ChargeRequest with transactionType = transactionType.MANDIRI_CLICKPAY -&gt; Execute doMandiriClickCharge() to conduct transaction -&gt; Redirect user to VT Mandiri ClickPay website. Enter in &ldquo;000000&rdquo; as the token response</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">Redirect URL will show : ChargeResponse with transaction status = TransactionStatus.SETTLEMENT , ChargeResponse with code = I001 , Response Message = Success.</td>
</tr>
</tbody></table>

<h4>Test Case 2. Denied Transaction Invalid Card Number (wrong card or unregistered to M. ClickPay)</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give denied response transaction upon executing normal Mandiri ClickPay transaction</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute doMandiriClickCharge() for normal Mandiri ClickPay transaction -&gt; Use card number &ldquo;4111999900000028&rdquo; -&gt; Redirect user to VT Mandiri ClickPay website. Enter in &ldquo;000000&rdquo; as the token response</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">Redirect URL will show : ChargeResponse with transaction status = TransactionStatus.DENY , ChargeResponse with code = IC29 , Response Message = Invalid User Not Registered For Internet Banking</td>
</tr>
</tbody></table>

<h4>Test Case 3. Denied Transaction Invalid Token Response</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give denied response transaction upon executing normal Mandiri ClickPay transaction</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute doMandiriClickCharge() for normal Mandiri ClickPay transaction -&gt; Redirect user to VT Mandiri ClickPay website. Use token response &ldquo;001100&rdquo;</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">Redirect URL will show : ChargeResponse with transaction status = TransactionStatus.DENY , ChargeResponse with code = IC28 , Response Message = Invalid Token Response</td>
</tr>
</tbody></table>

<h4>Test Case 4. Denied Transaction Invalid Parameter</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give denied response transaction upon executing normal Mandiri ClickPay transaction</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute doMandiriClickCharge() for normal Mandiri ClickPay transaction -&gt; Use null value for card number</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">Redirect URL will show :ChargeResponse with code = SG02 , Response Message = Validation Exception :[Invalid Mandiri card: blank value]</td>
</tr>
</tbody></table>

<h4>Test Case 5. Denied Transaction Invalid Amount</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give denied response transaction upon executing normal Mandiri ClickPay transaction</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute doMandiriClickCharge() for normal Mandiri ClickPay transaction -&gt; Use grossAmount &ldquo;1000&rdquo; And sum of items subtotal  equal to &ldquo;10000&rdquo;</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">Redirect URL will show : ChargeResponse with code = SG02 , Response Message = Validation Exception :Invalid Item Price Not match with Amount</td>
</tr>
</tbody></table>

<h4>Test Case 6. Timeout Transaction</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will five timeout response upon executing normal Mandiri ClickPay transaction</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Create ChargeRequest with transactionType = transactionType.MANDIRI_CLICKPAY -&gt; Execute doMandiriClickCharge() to conduct transaction -&gt; Redirect user to VT Mandiri ClickPay website. -&gt; Let the Mandiri ClickPay website idle for 5 minutes until the web timer countdown is finished</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">Redirect URL will show : ChargeResponse with transaction status = TransactionStatus.DENY , ChargeResponse with code = I005 , Response Message = Session Timeout</td>
</tr>
</tbody></table>

<h2>6.9 Test Scenarios - Mandiri ClickPay using SugarMDK (no Redirect)</h2>

<p>On Veritrans&#39; Staging Gateway, we have provided scenarios that can be used by merchant to test the different condition that can happen when using sugar-mdk to conduct Mandiri ClickPay transaction by using the SugarMDK.</p>

<h4>Sandbox Parameters</h4>

<p>These parameters are prepared for dummy as valid parameters. Please use them to test valid Mandiri ClickPay transactions.</p>
<pre class="highlight text">mandiriClickPay.cardNumber = &quot;4617007700000039&quot;
mandiriClickPay.tokenResponse = &quot;000000&quot;
</pre>
<h4>Test Case 1. Authorize Transaction</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give success response transaction upon executing Mandiri ClickPay transaction.</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Create ChargeRequest with transactionType = transactionType.MANDIRI_CLICKPAY -&gt; Execute doCharge() to conduct transaction</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">doCharge() will return : ChargeResponse with transaction status = TransactionStatus.AUTHORIZE , ChargeResponse with code = I001 , Response Message = Success</td>
</tr>
</tbody></table>

<h4>Test Case 2. Denied Transaction Invalid Card Number</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give denied response transaction upon executing normal Mandiri ClickPay transaction</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute doCharge() for normal Mandiri ClickPay transaction. Use card number &ldquo;4111999900000028&rdquo;</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">doCharge() will return ChargeResponse with transaction status = TransactionStatus.DENY , ChargeResponse with code = IC29 , Response Message = Invalid User Not Registered For Internet Banking</td>
</tr>
</tbody></table>

<h4>Test Case 3. Denied Transaction Invalid Token Response</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give denied response transaction upon executing normal Mandiri ClickPay transaction</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute doCharge() for normal Mandiri ClickPay transaction. Use token response &ldquo;001100&rdquo;</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">doCharge() will return ChargeResponse with transaction status = TransactionStatus.DENY , ChargeResponse with code = IC28 , Response Message = Invalid Token Response</td>
</tr>
</tbody></table>

<h4>Test Case 4. Denied Transaction Invalid Parameter</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give denied response transaction upon executing normal Mandiri ClickPay transaction</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute doCharge() for normal Mandiri ClickPay transaction. Use null value for card number</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">doCharge() will return VeritransException object ChargeResponse with code = SG02 , Response Message = Validation Exception :[Invalid Mandiri card: blank value]</td>
</tr>
</tbody></table>

<h4>Test Case 5. Denied Transaction Invalid Amount</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give denied response transaction upon executing normal Mandiri ClickPay transaction</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute doCharge() for normal Mandiri ClickPay transaction. Use grossAmount &ldquo;1000&rdquo; And sum of items subtotal  equal to &ldquo;10000&rdquo;</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">doCharge() will return VeritransException object ChargeResponse with code = SG02 , Response Message = Validation Exception :Invalid Item Price Not match with Amount</td>
</tr>
</tbody></table>

<h2>6.10 Test Scenarios - CIMB Clicks</h2>

<p>On Veritrans&#39; Staging Gateway, we have provided scenarios that can be used by merchant to test the different condition that can happen when using sugar-mdk to conduct a transaction with BCA KlikPay.</p>

<h4>Login Account</h4>

<p>CIMB User ID will be provided by Veritrans.</p>

<h4>Test Case 1. Success Transaction</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Value</th>
</tr>
</thead><tbody>
<tr>
<td>MerchantId</td>
<td style="text-align: center">A100000000000001000234</td>
</tr>
<tr>
<td>WebPageSelector</td>
<td style="text-align: center">01</td>
</tr>
<tr>
<td>OrderId</td>
<td style="text-align: center">12300001111</td>
</tr>
<tr>
<td>Amount</td>
<td style="text-align: center">50000</td>
</tr>
<tr>
<td>Currency</td>
<td style="text-align: center">IDR</td>
</tr>
<tr>
<td>ProdDesc</td>
<td style="text-align: center">BOOKS</td>
</tr>
<tr>
<td>Name</td>
<td style="text-align: center">John</td>
</tr>
<tr>
<td>Email</td>
<td style="text-align: center">john@gmail.com</td>
</tr>
<tr>
<td>Phone</td>
<td style="text-align: center">08567077998</td>
</tr>
<tr>
<td>Address</td>
<td style="text-align: center">Jakarta</td>
</tr>
<tr>
<td>PostalCode</td>
<td style="text-align: center">12345</td>
</tr>
<tr>
<td>TransactionDate</td>
<td style="text-align: center">20/03/2013 10:30:30</td>
</tr>
<tr>
<td>RedirectURL</td>
<td style="text-align: center">http://www.rakuten.co.id/klik/finish</td>
</tr>
</tbody></table>

<p>Sample Code for Test Case 1</p>
<pre class="highlight html">  <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;http://117.102.113.10:8080/web1/clickRedirect.action&quot;</span> <span class="na">method=</span><span class="s">&quot;post&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;MerchantId&quot;</span> <span class="na">value=</span><span class="s">&quot;A100000000000001000234&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;WebPageSelector&quot;</span> <span class="na">value=</span><span class="s">&quot;01&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;OrderId&quot;</span> <span class="na">value=</span><span class="s">&quot;12300001111&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Amount&quot;</span> <span class="na">value=</span><span class="s">&quot;50000&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Currency&quot;</span> <span class="na">value=</span><span class="s">&quot;IDR&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;ProdDesc &quot;</span> <span class="na">value=</span><span class="s">&quot; BOOKS&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Name&quot;</span> <span class="na">value=</span><span class="s">&quot;John&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Email&quot;</span> <span class="na">value=</span><span class="s">&quot;john@gmail.com&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Phone&quot;</span> <span class="na">value=</span><span class="s">&quot;08567077998&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Address&quot;</span> <span class="na">value=</span><span class="s">&quot;Jakarta&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;PostalCode&quot;</span> <span class="na">value=</span><span class="s">&quot;12345&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;TransactionDate&quot;</span> <span class="na">value=</span><span class="s">&quot;20/03/2013 10:30:30&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;RedirectURL&quot;</span> <span class="na">value=</span><span class="s">&quot;http://www.rakuten.co.id/klik/finish&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
</pre>
<p><strong>Expected Result</strong>
Redirected to CIMB Clicks Page</p>

<p><img src="/assets/images/CimbClicksPage-43eb1aad.png" align="left" title="&lsquo;image&rsquo;" alt="&lsquo;images&rsquo;"/></p>

<p><strong>Response Parameter Expected Result</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Value</th>
</tr>
</thead><tbody>
<tr>
<td>MerchantId</td>
<td style="text-align: center">A100000000000001000234</td>
</tr>
<tr>
<td>WebPageSelector</td>
<td style="text-align: center">01</td>
</tr>
<tr>
<td>OrderId</td>
<td style="text-align: center">12300001111</td>
</tr>
<tr>
<td>Amount</td>
<td style="text-align: center">50000</td>
</tr>
<tr>
<td>Currency</td>
<td style="text-align: center">IDR</td>
</tr>
<tr>
<td>ProdDesc</td>
<td style="text-align: center">BOOKS</td>
</tr>
<tr>
<td>Name</td>
<td style="text-align: center">John</td>
</tr>
<tr>
<td>Email</td>
<td style="text-align: center">john@gmail.com</td>
</tr>
<tr>
<td>Phone</td>
<td style="text-align: center">08567077998</td>
</tr>
<tr>
<td>Address</td>
<td style="text-align: center">Jakarta</td>
</tr>
<tr>
<td>PostalCode</td>
<td style="text-align: center">12345</td>
</tr>
<tr>
<td>TransactionDate</td>
<td style="text-align: center">20/03/2013 10:30:30</td>
</tr>
<tr>
<td>TransactionStatus</td>
<td style="text-align: center">SETTLEMENT</td>
</tr>
<tr>
<td>ResponseCode</td>
<td style="text-align: center">I001</td>
</tr>
<tr>
<td>ResponseMessage</td>
<td style="text-align: center">Success.</td>
</tr>
</tbody></table>

<h4>Test Case 2. Failed Transaction (Invalid MerchantId)</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Value</th>
</tr>
</thead><tbody>
<tr>
<td>MerchantId</td>
<td style="text-align: center">abc</td>
</tr>
<tr>
<td>WebPageSelector</td>
<td style="text-align: center">01</td>
</tr>
<tr>
<td>OrderId</td>
<td style="text-align: center">12300001112</td>
</tr>
<tr>
<td>Amount</td>
<td style="text-align: center">50000</td>
</tr>
<tr>
<td>Currency</td>
<td style="text-align: center">IDR</td>
</tr>
<tr>
<td>ProdDesc</td>
<td style="text-align: center">BOOKS</td>
</tr>
<tr>
<td>Name</td>
<td style="text-align: center">John</td>
</tr>
<tr>
<td>Email</td>
<td style="text-align: center">john@gmail.com</td>
</tr>
<tr>
<td>Phone</td>
<td style="text-align: center">08567077998</td>
</tr>
<tr>
<td>Address</td>
<td style="text-align: center">Jakarta</td>
</tr>
<tr>
<td>PostalCode</td>
<td style="text-align: center">12345</td>
</tr>
<tr>
<td>TransactionDate</td>
<td style="text-align: center">20/03/2013 10:30:30</td>
</tr>
<tr>
<td>RedirectURL</td>
<td style="text-align: center">http://www.rakuten.co.id/klik/finish</td>
</tr>
</tbody></table>

<p>Sample Code for Test Case 2</p>
<pre class="highlight html">  <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;http://117.102.113.10:8080/web1/clickRedirect.action&quot;</span> <span class="na">method=</span><span class="s">&quot;post&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;MerchantId&quot;</span> <span class="na">value=</span><span class="s">&quot;abc&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;WebPageSelector&quot;</span> <span class="na">value=</span><span class="s">&quot;01&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;OrderId&quot;</span> <span class="na">value=</span><span class="s">&quot;12300001112&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Amount&quot;</span> <span class="na">value=</span><span class="s">&quot;50000&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Currency&quot;</span> <span class="na">value=</span><span class="s">&quot;IDR&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;ProdDesc &quot;</span> <span class="na">value=</span><span class="s">&quot; BOOKS&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Name&quot;</span> <span class="na">value=</span><span class="s">&quot;John&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Email&quot;</span> <span class="na">value=</span><span class="s">&quot;john@gmail.com&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Phone&quot;</span> <span class="na">value=</span><span class="s">&quot;08567077998&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Address&quot;</span> <span class="na">value=</span><span class="s">&quot;Jakarta&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;PostalCode&quot;</span> <span class="na">value=</span><span class="s">&quot;12345&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;TransactionDate&quot;</span> <span class="na">value=</span><span class="s">&quot;20/03/2013 10:30:30&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;RedirectURL&quot;</span> <span class="na">value=</span><span class="s">&quot;http://www.rakuten.co.id/klik/finish&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
</pre>
<p><strong>Response Parameter Expected Result</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Value</th>
</tr>
</thead><tbody>
<tr>
<td>MerchantId</td>
<td style="text-align: center">abc</td>
</tr>
<tr>
<td>WebPageSelector</td>
<td style="text-align: center">01</td>
</tr>
<tr>
<td>OrderId</td>
<td style="text-align: center">12300001112</td>
</tr>
<tr>
<td>Amount</td>
<td style="text-align: center">50000</td>
</tr>
<tr>
<td>Currency</td>
<td style="text-align: center">IDR</td>
</tr>
<tr>
<td>ProdDesc</td>
<td style="text-align: center">BOOKS</td>
</tr>
<tr>
<td>Name</td>
<td style="text-align: center">John</td>
</tr>
<tr>
<td>Email</td>
<td style="text-align: center">john@gmail.com</td>
</tr>
<tr>
<td>Phone</td>
<td style="text-align: center">08567077998</td>
</tr>
<tr>
<td>Address</td>
<td style="text-align: center">Jakarta</td>
</tr>
<tr>
<td>PostalCode</td>
<td style="text-align: center">12345</td>
</tr>
<tr>
<td>TransactionDate</td>
<td style="text-align: center">20/03/2013 10:30:30</td>
</tr>
<tr>
<td>TransactionStatus</td>
<td style="text-align: center">DENY</td>
</tr>
<tr>
<td>ResponseCode</td>
<td style="text-align: center">I004</td>
</tr>
<tr>
<td>ResponseMessage</td>
<td style="text-align: center">Invalid Parameter</td>
</tr>
</tbody></table>

<h4>Test Case 3. Failed Transaction (Duplicate OrderId)</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Value</th>
</tr>
</thead><tbody>
<tr>
<td>MerchantId</td>
<td style="text-align: center">A100000000000001000234</td>
</tr>
<tr>
<td>WebPageSelector</td>
<td style="text-align: center">01</td>
</tr>
<tr>
<td>OrderId</td>
<td style="text-align: center">12300001111</td>
</tr>
<tr>
<td>Amount</td>
<td style="text-align: center">50000</td>
</tr>
<tr>
<td>Currency</td>
<td style="text-align: center">IDR</td>
</tr>
<tr>
<td>ProdDesc</td>
<td style="text-align: center">BOOKS</td>
</tr>
<tr>
<td>Name</td>
<td style="text-align: center">John</td>
</tr>
<tr>
<td>Email</td>
<td style="text-align: center">john@gmail.com</td>
</tr>
<tr>
<td>Phone</td>
<td style="text-align: center">08567077998</td>
</tr>
<tr>
<td>Address</td>
<td style="text-align: center">Jakarta</td>
</tr>
<tr>
<td>PostalCode</td>
<td style="text-align: center">12345</td>
</tr>
<tr>
<td>TransactionDate</td>
<td style="text-align: center">20/03/2013 10:30:30</td>
</tr>
<tr>
<td>RedirectURL</td>
<td style="text-align: center">http://www.rakuten.co.id/klik/finish</td>
</tr>
</tbody></table>

<p>Sample Code for Test Case 3</p>
<pre class="highlight html">  <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;http://117.102.113.10:8080/web1/clickRedirect.action&quot;</span> <span class="na">method=</span><span class="s">&quot;post&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;MerchantId&quot;</span> <span class="na">value=</span><span class="s">&quot;A100000000000001000234&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;WebPageSelector&quot;</span> <span class="na">value=</span><span class="s">&quot;01&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;OrderId&quot;</span> <span class="na">value=</span><span class="s">&quot;12300001111&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Amount&quot;</span> <span class="na">value=</span><span class="s">&quot;50000&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Currency&quot;</span> <span class="na">value=</span><span class="s">&quot;IDR&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;ProdDesc &quot;</span> <span class="na">value=</span><span class="s">&quot; BOOKS&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Name&quot;</span> <span class="na">value=</span><span class="s">&quot;John&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Email&quot;</span> <span class="na">value=</span><span class="s">&quot;john@gmail.com&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Phone&quot;</span> <span class="na">value=</span><span class="s">&quot;08567077998&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Address&quot;</span> <span class="na">value=</span><span class="s">&quot;Jakarta&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;PostalCode&quot;</span> <span class="na">value=</span><span class="s">&quot;12345&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;TransactionDate&quot;</span> <span class="na">value=</span><span class="s">&quot;20/03/2013 10:30:30&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;RedirectURL&quot;</span> <span class="na">value=</span><span class="s">&quot;http://www.rakuten.co.id/klik/finish&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
</pre>
<p><strong>Response Parameter Expected Result</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Value</th>
</tr>
</thead><tbody>
<tr>
<td>MerchantId</td>
<td style="text-align: center">A100000000000001000234</td>
</tr>
<tr>
<td>WebPageSelector</td>
<td style="text-align: center">01</td>
</tr>
<tr>
<td>OrderId</td>
<td style="text-align: center">12300001111</td>
</tr>
<tr>
<td>Amount</td>
<td style="text-align: center">50000</td>
</tr>
<tr>
<td>Currency</td>
<td style="text-align: center">IDR</td>
</tr>
<tr>
<td>ProdDesc</td>
<td style="text-align: center">BOOKS</td>
</tr>
<tr>
<td>Name</td>
<td style="text-align: center">John</td>
</tr>
<tr>
<td>Email</td>
<td style="text-align: center">john@gmail.com</td>
</tr>
<tr>
<td>Phone</td>
<td style="text-align: center">08567077998</td>
</tr>
<tr>
<td>Address</td>
<td style="text-align: center">Jakarta</td>
</tr>
<tr>
<td>PostalCode</td>
<td style="text-align: center">12345</td>
</tr>
<tr>
<td>TransactionDate</td>
<td style="text-align: center">20/03/2013 10:30:30</td>
</tr>
<tr>
<td>TransactionStatus</td>
<td style="text-align: center">DENY</td>
</tr>
<tr>
<td>ResponseCode</td>
<td style="text-align: center">NH02</td>
</tr>
<tr>
<td>ResponseMessage</td>
<td style="text-align: center">Invalid OrderId (Because the order id is already used)</td>
</tr>
</tbody></table>

<h4>Test Case 4. Failed Transaction (Invalid Amount)</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Value</th>
</tr>
</thead><tbody>
<tr>
<td>MerchantId</td>
<td style="text-align: center">A100000000000001000234</td>
</tr>
<tr>
<td>WebPageSelector</td>
<td style="text-align: center">01</td>
</tr>
<tr>
<td>OrderId</td>
<td style="text-align: center">12300001113</td>
</tr>
<tr>
<td>Amount</td>
<td style="text-align: center">ABCD</td>
</tr>
<tr>
<td>Currency</td>
<td style="text-align: center">IDR</td>
</tr>
<tr>
<td>ProdDesc</td>
<td style="text-align: center">BOOKS</td>
</tr>
<tr>
<td>Name</td>
<td style="text-align: center">John</td>
</tr>
<tr>
<td>Email</td>
<td style="text-align: center">john@gmail.com</td>
</tr>
<tr>
<td>Phone</td>
<td style="text-align: center">08567077998</td>
</tr>
<tr>
<td>Address</td>
<td style="text-align: center">Jakarta</td>
</tr>
<tr>
<td>PostalCode</td>
<td style="text-align: center">12345</td>
</tr>
<tr>
<td>TransactionDate</td>
<td style="text-align: center">20/03/2013 10:30:30</td>
</tr>
<tr>
<td>RedirectURL</td>
<td style="text-align: center">http://www.rakuten.co.id/klik/finish</td>
</tr>
</tbody></table>

<p>Sample Code for Test Case 4</p>
<pre class="highlight html">  <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;http://117.102.113.10:8080/web1/clickRedirect.action&quot;</span> <span class="na">method=</span><span class="s">&quot;post&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;MerchantId&quot;</span> <span class="na">value=</span><span class="s">&quot;A100000000000001000234&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;WebPageSelector&quot;</span> <span class="na">value=</span><span class="s">&quot;01&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;OrderId&quot;</span> <span class="na">value=</span><span class="s">&quot;12300001113&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Amount&quot;</span> <span class="na">value=</span><span class="s">&quot;ABCD&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Currency&quot;</span> <span class="na">value=</span><span class="s">&quot;IDR&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;ProdDesc &quot;</span> <span class="na">value=</span><span class="s">&quot; BOOKS&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Name&quot;</span> <span class="na">value=</span><span class="s">&quot;John&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Email&quot;</span> <span class="na">value=</span><span class="s">&quot;john@gmail.com&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Phone&quot;</span> <span class="na">value=</span><span class="s">&quot;08567077998&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Address&quot;</span> <span class="na">value=</span><span class="s">&quot;Jakarta&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;PostalCode&quot;</span> <span class="na">value=</span><span class="s">&quot;12345&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;TransactionDate&quot;</span> <span class="na">value=</span><span class="s">&quot;20/03/2013 10:30:30&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;RedirectURL&quot;</span> <span class="na">value=</span><span class="s">&quot;http://www.rakuten.co.id/klik/finish&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
</pre>
<p><strong>Response Parameter Expected Result</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Value</th>
</tr>
</thead><tbody>
<tr>
<td>MerchantId</td>
<td style="text-align: center">A100000000000001000234</td>
</tr>
<tr>
<td>WebPageSelector</td>
<td style="text-align: center">01</td>
</tr>
<tr>
<td>OrderId</td>
<td style="text-align: center">12300001113</td>
</tr>
<tr>
<td>Amount</td>
<td style="text-align: center">ABCD</td>
</tr>
<tr>
<td>Currency</td>
<td style="text-align: center">IDR</td>
</tr>
<tr>
<td>ProdDesc</td>
<td style="text-align: center">BOOKS</td>
</tr>
<tr>
<td>Name</td>
<td style="text-align: center">John</td>
</tr>
<tr>
<td>Email</td>
<td style="text-align: center">john@gmail.com</td>
</tr>
<tr>
<td>Phone</td>
<td style="text-align: center">08567077998</td>
</tr>
<tr>
<td>Address</td>
<td style="text-align: center">Jakarta</td>
</tr>
<tr>
<td>PostalCode</td>
<td style="text-align: center">12345</td>
</tr>
<tr>
<td>TransactionDate</td>
<td style="text-align: center">20/03/2013 10:30:30</td>
</tr>
<tr>
<td>TransactionStatus</td>
<td style="text-align: center">DENY</td>
</tr>
<tr>
<td>ResponseCode</td>
<td style="text-align: center">I004</td>
</tr>
<tr>
<td>ResponseMessage</td>
<td style="text-align: center">Invalid Parameter</td>
</tr>
</tbody></table>

<h4>Test Case 5. Failed Transaction (Invalid Currency)</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Value</th>
</tr>
</thead><tbody>
<tr>
<td>MerchantId</td>
<td style="text-align: center">A100000000000001000234</td>
</tr>
<tr>
<td>WebPageSelector</td>
<td style="text-align: center">01</td>
</tr>
<tr>
<td>OrderId</td>
<td style="text-align: center">12300001114</td>
</tr>
<tr>
<td>Amount</td>
<td style="text-align: center">50000</td>
</tr>
<tr>
<td>Currency</td>
<td style="text-align: center">USD</td>
</tr>
<tr>
<td>ProdDesc</td>
<td style="text-align: center">BOOKS</td>
</tr>
<tr>
<td>Name</td>
<td style="text-align: center">John</td>
</tr>
<tr>
<td>Email</td>
<td style="text-align: center">john@gmail.com</td>
</tr>
<tr>
<td>Phone</td>
<td style="text-align: center">08567077998</td>
</tr>
<tr>
<td>Address</td>
<td style="text-align: center">Jakarta</td>
</tr>
<tr>
<td>PostalCode</td>
<td style="text-align: center">12345</td>
</tr>
<tr>
<td>TransactionDate</td>
<td style="text-align: center">20/03/2013 10:30:30</td>
</tr>
<tr>
<td>RedirectURL</td>
<td style="text-align: center">http://www.rakuten.co.id/klik/finish</td>
</tr>
</tbody></table>

<p>Sample Code for Test Case 5</p>
<pre class="highlight html">  <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;http://117.102.113.10:8080/web1/clickRedirect.action&quot;</span> <span class="na">method=</span><span class="s">&quot;post&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;MerchantId&quot;</span> <span class="na">value=</span><span class="s">&quot;A100000000000001000234&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;WebPageSelector&quot;</span> <span class="na">value=</span><span class="s">&quot;01&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;OrderId&quot;</span> <span class="na">value=</span><span class="s">&quot;12300001114&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Amount&quot;</span> <span class="na">value=</span><span class="s">&quot;50000&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Currency&quot;</span> <span class="na">value=</span><span class="s">&quot;USD&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;ProdDesc &quot;</span> <span class="na">value=</span><span class="s">&quot; BOOKS&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Name&quot;</span> <span class="na">value=</span><span class="s">&quot;John&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Email&quot;</span> <span class="na">value=</span><span class="s">&quot;john@gmail.com&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Phone&quot;</span> <span class="na">value=</span><span class="s">&quot;08567077998&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;Address&quot;</span> <span class="na">value=</span><span class="s">&quot;Jakarta&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;PostalCode&quot;</span> <span class="na">value=</span><span class="s">&quot;12345&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;TransactionDate&quot;</span> <span class="na">value=</span><span class="s">&quot;20/03/2013 10:30:30&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;RedirectURL&quot;</span> <span class="na">value=</span><span class="s">&quot;http://www.rakuten.co.id/klik/finish&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
</pre>
<p><strong>Response Parameter Expected Result</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Value</th>
</tr>
</thead><tbody>
<tr>
<td>MerchantId</td>
<td style="text-align: center">A100000000000001000234</td>
</tr>
<tr>
<td>WebPageSelector</td>
<td style="text-align: center">01</td>
</tr>
<tr>
<td>OrderId</td>
<td style="text-align: center">12300001113</td>
</tr>
<tr>
<td>Amount</td>
<td style="text-align: center">50000</td>
</tr>
<tr>
<td>Currency</td>
<td style="text-align: center">USD</td>
</tr>
<tr>
<td>ProdDesc</td>
<td style="text-align: center">BOOKS</td>
</tr>
<tr>
<td>Name</td>
<td style="text-align: center">John</td>
</tr>
<tr>
<td>Email</td>
<td style="text-align: center">john@gmail.com</td>
</tr>
<tr>
<td>Phone</td>
<td style="text-align: center">08567077998</td>
</tr>
<tr>
<td>Address</td>
<td style="text-align: center">Jakarta</td>
</tr>
<tr>
<td>PostalCode</td>
<td style="text-align: center">12345</td>
</tr>
<tr>
<td>TransactionDate</td>
<td style="text-align: center">20/03/2013 10:30:30</td>
</tr>
<tr>
<td>TransactionStatus</td>
<td style="text-align: center">DENY</td>
</tr>
<tr>
<td>ResponseCode</td>
<td style="text-align: center">I004</td>
</tr>
<tr>
<td>ResponseMessage</td>
<td style="text-align: center">Invalid Parameter</td>
</tr>
</tbody></table>

<h2>6.11 Test Scenarios - BCA KlikPay</h2>

<p>On Veritrans&#39; Staging Gateway, we have provided scenarios that can be used by merchant to test the different condition that can happen when using sugar-mdk to conduct a transaction with BCA KlikPay.</p>

<h4>Login Account</h4>
<pre class="highlight text">Email: klikpay@gmail.com
Password: password
</pre>
<h4>How to settle transaction in BCA KlikPay website</h4>

<ol>
<li> The transaction will redirect to BCA KlikPay website (http://117.102..113.10:8080/klikpay/)</li>
<li> Login with the given username and password</li>
<li> Ensure the correct transaction information is shown then click &ldquo;Kirim&rdquo; button</li>
<li> For dummy, we ignore the OTP code. Then follow by clicking &ldquo;Bayar&rdquo; button</li>
<li> When success, the page will be redirected to the given redirectUrl parameter in the chargeRequest</li>
</ol>

<h4>Test Case 1. Success Transaction (PayType.FULL)</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give success response transaction upon executing BCA KlikPay transaction.</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Create ChargeRequest with payType : PayType.FULL and list of full transaction items. Execute doBcaKlikPayCharge() to conduct transaction. Redirect user to BCA KlikPay website. Enter username and password. Settle the transaction.</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">BCA KlikPay website will redirect to redirect url and flag Veritrans for the success flag</td>
</tr>
</tbody></table>

<h4>Test Case 2. Success Transaction (PayType.INSTALLMENT)</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give success response transaction upon executing BCA KlikPay transaction.</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Create ChargeRequest with payType : PayType.INSTALLMENT and list of installment transaction items. Execute doBcaKlikPayCharge() to conduct transaction. Redirect user to BCA KlikPay website. Enter username and password. Settle the transaction.</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">BCA KlikPay website will redirect to redirect url and flag Veritrans for the success flag</td>
</tr>
</tbody></table>

<h4>Test Case 3. Success Transaction (PayType.FULL_INSTALLMENT)</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give success response transaction upon executing BCA KlikPay transaction.</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Create ChargeRequest with payType : PayType.FULL_INSTALLMENT and list of combination between full and installment transaction items. Execute doBcaKlikPayCharge() to conduct transaction. Redirect user to BCA KlikPay website. Enter username and password. Settle the transaction.</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">BCA KlikPay website will redirect to redirect url and flag Veritrans for the success flag</td>
</tr>
</tbody></table>

<h4>Test Case 4. Merchant Id is invalid</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give denied response transaction upon executing BCA KlikPay transaction.</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Create ChargeRequest with merchant id: merchantId &ldquo;A0010000010099&rdquo;. Execute doBcaKlikPayCharge() to conduct transaction</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">VeritransException with: Code: SG02 , Message: ValidationException: [Invalid merchant id]</td>
</tr>
</tbody></table>

<h4>Test Case 5. Amount is invalid</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give denied response transaction upon executing BCA KlikPay transaction.</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Create ChargeRequest with grossAmount not match with total of item subtotals.. Execute doBcaKlikPayCharge() to conduct transaction</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">VeritransException with: Code: SG02 , Message: ValidationException: [Invalid Item Price Not match with Amount]</td>
</tr>
</tbody></table>

<h2>6.12 Test Scenarios - KlikBCA</h2>

<p>On Veritrans&#39; Staging Gateway, we have provided scenarios that can be used by merchant to test the different condition that can happen when using sugar-mdk to conduct a KlikBCA transaction.</p>

<h4>Dummy KlikBCA Website</h4>

<p>Please use the Dummy Website (http://117.102.113.10:8080/klikbca/ ) to try a settlement of a KlikBCA transaction by a consumer. The login credentials are below:</p>

<p>User ID: user01
  Internet Banking PIN : 123456</p>

<p>Please follow the instructions below to complete settlement after you run the test codes below:</p>

<ol>
<li> Go to Dummy Website at http://117.102.113.10:8080/klikbca/</li>
<li> Enter user details above to login to KlikBCA</li>
<li> Click on &ldquo;e-Commerce Payment&rdquo; on the left navigation bar</li>
<li> Choose &ldquo;Market Place&rdquo; as the category, and then &ldquo;Rakuten Belanja Online&rdquo; as the Company. Then press &ldquo;continue&rdquo;</li>
<li> Select the transaction that you would like to complete payment and then click &ldquo;Continue&rdquo;</li>
<li> Enter in APPLI 1 code (put in any random 8 digit number) and then click &ldquo;Submit&rdquo;</li>
<li> Transaction is complete</li>
</ol>

<h4>Test Case 1. Success Transaction</h4>
<pre class="highlight java"><span class="n">String</span> <span class="n">username</span>   <span class="o">=</span> <span class="s">&quot;A100000000000001000233cc&quot;</span><span class="o">;</span>
<span class="n">String</span> <span class="n">merchantId</span> <span class="o">=</span> <span class="s">&quot;A100000000000001000233&quot;</span><span class="o">;</span>
<span class="n">String</span> <span class="n">password</span>   <span class="o">=</span> <span class="s">&quot;af757b7d932482672d78396539638e18ddb8510d8703a1972660f0a74d40b8fb&quot;</span><span class="o">;</span>
<span class="n">VeritransGateway</span> <span class="n">gateway</span><span class="o">;</span>
<span class="n">PaymentManager</span>   <span class="n">paymentManager</span><span class="o">;</span>
<span class="n">SubMerchant</span> <span class="n">subMerchant</span><span class="o">;</span>

<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testOrderIdBlank</span><span class="p">(</span><span class="o">)</span>
<span class="o">{</span>
    <span class="n">ChargeRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ChargeRequest</span><span class="o">();</span>

    <span class="k">try</span> <span class="o">{</span>
        <span class="n">paymentManager</span><span class="o">.</span><span class="na">doCharge</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">subMerchant</span><span class="o">);</span>
        <span class="n">fail</span><span class="o">(</span><span class="s">&quot;fail order id blank&quot;</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">VeritransException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">assertTrue</span><span class="o">(</span><span class="n">ex</span><span class="o">.</span><span class="na">getMessage</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span><span class="s">&quot;Invalid order id&quot;</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testSuccessTransaction</span><span class="p">(</span><span class="o">)</span>
<span class="o">{</span>
    <span class="n">ChargeRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ChargeRequest</span><span class="o">();</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setOrderId</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()));</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getOrderId</span><span class="o">());</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setGrossAmount</span><span class="o">(</span><span class="mi">1000000L</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setEmail</span><span class="o">(</span><span class="s">&quot;eko.khannedy@veritrans.co.id&quot;</span><span class="o">);</span>

    <span class="n">List</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="n">items</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;();</span>

    <span class="n">Item</span> <span class="n">item</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Item</span><span class="o">();</span>
    <span class="n">item</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="s">&quot;1&quot;</span><span class="o">);</span>
    <span class="n">item</span><span class="o">.</span><span class="na">setPrice</span><span class="o">(</span><span class="mi">100000L</span><span class="o">);</span>
    <span class="n">item</span><span class="o">.</span><span class="na">setQuantity</span><span class="o">(</span><span class="mi">10</span><span class="o">);</span>
    <span class="n">item</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&quot;Mie Ayam&quot;</span><span class="o">);</span>
    <span class="n">item</span><span class="o">.</span><span class="na">setSubTotal</span><span class="o">(</span><span class="mi">1000000L</span><span class="o">);</span>

    <span class="n">items</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setItems</span><span class="o">(</span><span class="n">items</span><span class="o">);</span>

    <span class="n">Address</span> <span class="n">address</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Address</span><span class="o">();</span>
    <span class="n">address</span><span class="o">.</span><span class="na">setFirstName</span><span class="o">(</span><span class="s">&quot;Eko Kurniawan&quot;</span><span class="o">);</span>
    <span class="n">address</span><span class="o">.</span><span class="na">setLastName</span><span class="o">(</span><span class="s">&quot;Khannedy&quot;</span><span class="o">);</span>
    <span class="n">address</span><span class="o">.</span><span class="na">setAddress1</span><span class="o">(</span><span class="s">&quot;address1&quot;</span><span class="o">);</span>
    <span class="n">address</span><span class="o">.</span><span class="na">setAddress2</span><span class="o">(</span><span class="s">&quot;RT 01 RW 01&quot;</span><span class="o">);</span>
    <span class="n">address</span><span class="o">.</span><span class="na">setCity</span><span class="o">(</span><span class="s">&quot;Subang&quot;</span><span class="o">);</span>
    <span class="n">address</span><span class="o">.</span><span class="na">setPostalCode</span><span class="o">(</span><span class="s">&quot;41271&quot;</span><span class="o">);</span>
    <span class="n">address</span><span class="o">.</span><span class="na">setPhone</span><span class="o">(</span><span class="s">&quot;08978847686&quot;</span><span class="o">);</span>
    <span class="n">address</span><span class="o">.</span><span class="na">setCountryCode</span><span class="o">(</span><span class="s">&quot;IDN&quot;</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setShippingAddress</span><span class="o">(</span><span class="n">address</span><span class="o">);</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setIpAddress</span><span class="o">(</span><span class="s">&quot;192.168.1.1&quot;</span><span class="o">);</span>

    <span class="n">KlikBca</span> <span class="n">klikBca</span> <span class="o">=</span> <span class="k">new</span> <span class="n">KlikBca</span><span class="o">();</span>
    <span class="n">klikBca</span><span class="o">.</span><span class="na">setUserId</span><span class="o">(</span><span class="s">&quot;user01&quot;</span><span class="o">);</span>
    <span class="n">klikBca</span><span class="o">.</span><span class="na">setDescription</span><span class="o">(</span><span class="s">&quot;Payment Description&quot;</span><span class="o">);</span>
    <span class="n">request</span><span class="o">.</span><span class="na">setKlikBca</span><span class="o">(</span><span class="n">klikBca</span><span class="o">);</span>

    <span class="n">request</span><span class="o">.</span><span class="na">setType</span><span class="o">(</span><span class="n">TransactionType</span><span class="o">.</span><span class="na">BCA_KLIKBCA</span><span class="o">);</span>

    <span class="k">try</span> <span class="o">{</span>
        <span class="n">ChargeResponse</span> <span class="kt">char</span><span class="n">geResponse</span> <span class="o">=</span> <span class="n">paymentManager</span><span class="o">.</span><span class="na">doCharge</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">subMerchant</span><span class="o">);</span>

        <span class="n">Gson</span> <span class="n">gson</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GsonBuilder</span><span class="o">().</span><span class="na">setPrettyPrinting</span><span class="o">().</span><span class="na">create</span><span class="o">();</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">gson</span><span class="o">.</span><span class="na">toJson</span><span class="o">(</span><span class="n">subMerchant</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">gson</span><span class="o">.</span><span class="na">toJson</span><span class="o">(</span><span class="n">request</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">gson</span><span class="o">.</span><span class="na">toJson</span><span class="o">(</span><span class="kt">char</span><span class="n">geResponse</span><span class="o">));</span>

        <span class="n">assertTrue</span><span class="o">(</span><span class="kt">char</span><span class="n">geResponse</span><span class="o">.</span><span class="na">getData</span><span class="o">().</span><span class="na">getTransactionStatus</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">TransactionStatus</span><span class="o">.</span><span class="na">PENDING</span><span class="o">));</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">VeritransException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">fail</span><span class="o">(</span><span class="n">ex</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre>
<h4>Test Case 1. Sample Expected Result (this output is in JSON, but the actual response will be in XML format):</h4>
<pre class="highlight ruby">    <span class="no">Request</span> <span class="p">:</span>
    <span class="p">{</span>
      <span class="s2">&quot;orderId&quot;</span><span class="p">:</span> <span class="s2">&quot;3fb805a0d02c7a78&quot;</span><span class="p">,</span>
      <span class="s2">&quot;grossAmount&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
      <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;staging@rakuten.com&quot;</span><span class="p">,</span>
      <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="o">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;item1&quot;</span><span class="p">,</span>
          <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
          <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;item name&quot;</span><span class="p">,</span>
          <span class="s2">&quot;subTotal&quot;</span><span class="p">:</span> <span class="mi">200</span>
        <span class="p">}</span>
      <span class="o">]</span><span class="p">,</span>
      <span class="s2">&quot;shippingAddress&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;firstName&quot;</span><span class="p">:</span> <span class="s2">&quot;Eko&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lastName&quot;</span><span class="p">:</span> <span class="s2">&quot;Khannedy&quot;</span><span class="p">,</span>
        <span class="s2">&quot;address1&quot;</span><span class="p">:</span> <span class="s2">&quot;address1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;address2&quot;</span><span class="p">:</span> <span class="s2">&quot;address2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;city&quot;</span><span class="p">:</span> <span class="s2">&quot;Jakarta&quot;</span><span class="p">,</span>
        <span class="s2">&quot;postalCode&quot;</span><span class="p">:</span> <span class="s2">&quot;14045&quot;</span><span class="p">,</span>
        <span class="s2">&quot;phone&quot;</span><span class="p">:</span> <span class="s2">&quot;089876765432&quot;</span><span class="p">,</span>
        <span class="s2">&quot;countryCode&quot;</span><span class="p">:</span> <span class="s2">&quot;IDN&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;card&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;cardNumber&quot;</span><span class="p">:</span> <span class="s2">&quot;5426400901000023&quot;</span><span class="p">,</span>
        <span class="s2">&quot;expiredMonth&quot;</span><span class="p">:</span> <span class="s2">&quot;10&quot;</span><span class="p">,</span>
        <span class="s2">&quot;expiredYear&quot;</span><span class="p">:</span> <span class="s2">&quot;2015&quot;</span><span class="p">,</span>
        <span class="s2">&quot;expired&quot;</span><span class="p">:</span> <span class="s2">&quot;102015&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cvv&quot;</span><span class="p">:</span> <span class="s2">&quot;872&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;klikBca&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;userId&quot;</span><span class="p">:</span> <span class="s2">&quot;user01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;item name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;notificationUrl&quot;</span><span class="p">:</span> <span class="s2">&quot;http://rakuten.co.id/notification/klik-bca&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;BCA_KLIKBCA&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bank&quot;</span><span class="p">:</span> <span class="s2">&quot;BNI&quot;</span><span class="p">,</span>
      <span class="s2">&quot;ipAddress&quot;</span><span class="p">:</span> <span class="s2">&quot;192.168.1.1&quot;</span>
    <span class="p">}</span>

    <span class="no">Response</span> <span class="p">:</span>
    <span class="p">{</span>
      <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;transactionType&quot;</span><span class="p">:</span> <span class="s2">&quot;BCA_KLIKBCA&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bank&quot;</span><span class="p">:</span> <span class="s2">&quot;BCA&quot;</span><span class="p">,</span>
        <span class="s2">&quot;orderId&quot;</span><span class="p">:</span> <span class="s2">&quot;3fb805a0d02c7a78&quot;</span><span class="p">,</span>
        <span class="s2">&quot;grossAmount&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
        <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;staging@rakuten.com&quot;</span><span class="p">,</span>
        <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="o">[</span>
          <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;item1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
            <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;item name&quot;</span><span class="p">,</span>
            <span class="s2">&quot;subTotal&quot;</span><span class="p">:</span> <span class="mi">200</span>
          <span class="p">}</span>
        <span class="o">]</span><span class="p">,</span>
        <span class="s2">&quot;shippingAddress&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;firstName&quot;</span><span class="p">:</span> <span class="s2">&quot;Eko&quot;</span><span class="p">,</span>
          <span class="s2">&quot;lastName&quot;</span><span class="p">:</span> <span class="s2">&quot;Khannedy&quot;</span><span class="p">,</span>
          <span class="s2">&quot;address1&quot;</span><span class="p">:</span> <span class="s2">&quot;address1&quot;</span><span class="p">,</span>
          <span class="s2">&quot;address2&quot;</span><span class="p">:</span> <span class="s2">&quot;address2&quot;</span><span class="p">,</span>
          <span class="s2">&quot;city&quot;</span><span class="p">:</span> <span class="s2">&quot;Jakarta&quot;</span><span class="p">,</span>
          <span class="s2">&quot;postalCode&quot;</span><span class="p">:</span> <span class="s2">&quot;14045&quot;</span><span class="p">,</span>
          <span class="s2">&quot;phone&quot;</span><span class="p">:</span> <span class="s2">&quot;089876765432&quot;</span><span class="p">,</span>
          <span class="s2">&quot;countryCode&quot;</span><span class="p">:</span> <span class="s2">&quot;IDN&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;transactionStatus&quot;</span><span class="p">:</span> <span class="s2">&quot;PENDING&quot;</span><span class="p">,</span>
        <span class="s2">&quot;transactionTime&quot;</span><span class="p">:</span> <span class="s2">&quot;Mar 29, 2013 8:22:03 PM&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
      <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;I001&quot;</span><span class="p">,</span>
      <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Success.&quot;</span>
    <span class="p">}</span>
</pre>
<p><img src="/assets/images/klikBCAExpectedResult-ca7eea33.png" align="left" title="&lsquo;image&rsquo;" alt="&lsquo;images&rsquo;"/></p>

<h4>Test Case 2. Cancel KlikBCA Transaction</h4>
<pre class="highlight java"><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testCancelInternetBankingSubMerchant</span><span class="p">(</span><span class="o">)</span>
<span class="o">{</span>
    <span class="c1">// gateway</span>
    <span class="n">gateway</span> <span class="o">=</span> <span class="n">VeritransGatewayFactory</span><span class="o">.</span><span class="na">createInstance</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">password</span><span class="o">);</span>
    <span class="n">paymentManager</span> <span class="o">=</span> <span class="n">gateway</span><span class="o">.</span><span class="na">getPaymentManager</span><span class="o">();</span>
    <span class="n">Gson</span> <span class="n">gson</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GsonBuilder</span><span class="o">().</span><span class="na">setPrettyPrinting</span><span class="o">().</span><span class="na">create</span><span class="o">();</span>

    <span class="n">SubMerchant</span> <span class="n">subMerchant</span> <span class="o">=</span> <span class="n">prepareSubMerchant</span><span class="o">();</span>

    <span class="c1">// get sub merchant</span>

    <span class="c1">// create cancel request</span>
    <span class="n">CancelRequest</span> <span class="n">cancelRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CancelRequest</span><span class="o">();</span>

    <span class="c1">// set order id and sub merchant to cancel request</span>
    <span class="n">cancelRequest</span><span class="o">.</span><span class="na">setInternetBanking</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="n">cancelRequest</span><span class="o">.</span><span class="na">setOrderId</span><span class="o">(</span><span class="s">&quot;3fb805a0d02c7a78&quot;</span><span class="o">);</span>
    <span class="n">cancelRequest</span><span class="o">.</span><span class="na">setSubMerchant</span><span class="o">(</span><span class="n">subMerchant</span><span class="o">);</span>

    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Cancel Request : &quot;</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">gson</span><span class="o">.</span><span class="na">toJson</span><span class="o">(</span><span class="n">cancelRequest</span><span class="o">));</span>

    <span class="c1">// do cancel request and get response</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="n">CancelResponse</span> <span class="n">cancelResponse</span> <span class="o">=</span> <span class="n">paymentManager</span><span class="o">.</span><span class="na">doCancel</span><span class="o">(</span><span class="n">cancelRequest</span><span class="o">);</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Cancel Response : &quot;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">gson</span><span class="o">.</span><span class="na">toJson</span><span class="o">(</span><span class="n">cancelResponse</span><span class="o">));</span>

        <span class="n">assertEquals</span><span class="o">(</span><span class="n">cancelResponse</span><span class="o">.</span><span class="na">getData</span><span class="o">().</span><span class="na">getTransactionStatus</span><span class="o">(),</span> <span class="n">TransactionStatus</span><span class="o">.</span><span class="na">CANCEL</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">VeritransException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Error Code : &quot;</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getCode</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Error Status : &quot;</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getStatus</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Error Message : &quot;</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre>
<h4>Test Case 2. Sample Expected Result (this output is in JSON, but the actual response will be in XML format)</h4>
<pre class="highlight ruby">  <span class="no">Cancel</span> <span class="no">Request</span> <span class="p">:</span>
  <span class="p">{</span>
    <span class="s2">&quot;orderId&quot;</span><span class="p">:</span> <span class="s2">&quot;3fb805a0d02c7a78&quot;</span><span class="p">,</span>
    <span class="s2">&quot;subMerchant&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;merchant_id&quot;</span><span class="p">:</span> <span class="s2">&quot;A100000000000001000012&quot;</span><span class="p">,</span>
      <span class="s2">&quot;merchant_ccid&quot;</span><span class="p">:</span> <span class="s2">&quot;A100000000000001000012cc&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hash_seed&quot;</span><span class="p">:</span> <span class="s2">&quot;8645c50adf5db6f583534018c8b27b524735634e407d018178da3dc88253ec71&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;isInternetBanking&quot;</span><span class="p">:</span> <span class="kp">true</span>
  <span class="p">}</span>

  <span class="no">Cancel</span> <span class="no">Response</span> <span class="p">:</span>
  <span class="p">{</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;orderId&quot;</span><span class="p">:</span> <span class="s2">&quot;3fb805a0d02c7a78&quot;</span><span class="p">,</span>
      <span class="s2">&quot;transactionStatus&quot;</span><span class="p">:</span> <span class="s2">&quot;CANCEL&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;I001&quot;</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Success.&quot;</span>
  <span class="p">}</span>
</pre>
<h4>Test Case 2. KlikBCA Expected Result</h4>

<p><img src="/assets/images/KLIKBCAEXPECTEDRESULT2-9fa991c7.png" align="left" title="&lsquo;image&rsquo;" alt="&lsquo;images&rsquo;"/></p>

<h4>Test Case 3. Cancel Settlement KlikBCA Transaction</h4>

<p><img src="/assets/images/CancelSettlementKlikBCA-012a6887.png" align="left" title="&lsquo;image&rsquo;" alt="&lsquo;images&rsquo;"/></p>

<h4>Test Case 3. Sample Expected Result</h4>
<pre class="highlight ruby">  <span class="no">Cancel</span> <span class="no">Request</span> <span class="p">:</span>
  <span class="p">{</span>
    <span class="s2">&quot;orderId&quot;</span><span class="p">:</span> <span class="s2">&quot;3fd372661f452836&quot;</span><span class="p">,</span>
    <span class="s2">&quot;subMerchant&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;merchant_id&quot;</span><span class="p">:</span> <span class="s2">&quot;A100000000000001000012&quot;</span><span class="p">,</span>
      <span class="s2">&quot;merchant_ccid&quot;</span><span class="p">:</span> <span class="s2">&quot;A100000000000001000012cc&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hash_seed&quot;</span><span class="p">:</span> <span class="s2">&quot;8645c50adf5db6f583534018c8b27b524735634e407d018178da3dc88253ec71&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;isInternetBanking&quot;</span><span class="p">:</span> <span class="kp">true</span>
  <span class="p">}</span>

  <span class="no">Cancel</span> <span class="no">Response</span> <span class="p">:</span>
  <span class="no">Error</span> <span class="no">Code</span> <span class="p">:</span> <span class="no">SG01</span>
  <span class="no">Error</span> <span class="no">Status</span> <span class="p">:</span> <span class="n">failure</span>
  <span class="no">Error</span> <span class="no">Message</span> <span class="p">:</span> <span class="no">Cannot</span> <span class="n">cancel</span> <span class="n">settled</span> <span class="n">transaction</span>
</pre>
<h4>Test Case 4. Cancel KlikBCA Transaction After Inquiry.</h4>

<p><img src="/assets/images/cancelKlikBCA_afterInquiry-1ebf2977.png" align="left" title="&lsquo;image&rsquo;" alt="&lsquo;images&rsquo;"/></p>

<h4>Test Case 4. Sample Expected Result.</h4>
<pre class="highlight ruby">  <span class="no">Cancel</span> <span class="no">Request</span> <span class="p">:</span>
  <span class="p">{</span>
    <span class="s2">&quot;orderId&quot;</span><span class="p">:</span> <span class="s2">&quot;3feae2967d479177&quot;</span><span class="p">,</span>
    <span class="s2">&quot;subMerchant&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;merchant_id&quot;</span><span class="p">:</span> <span class="s2">&quot;A100000000000001000012&quot;</span><span class="p">,</span>
      <span class="s2">&quot;merchant_ccid&quot;</span><span class="p">:</span> <span class="s2">&quot;A100000000000001000012cc&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hash_seed&quot;</span><span class="p">:</span> <span class="s2">&quot;8645c50adf5db6f583534018c8b27b524735634e407d018178da3dc88253ec71&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;isInternetBanking&quot;</span><span class="p">:</span> <span class="kp">true</span>
  <span class="p">}</span>

  <span class="no">Cancel</span> <span class="no">Response</span> <span class="p">:</span>
  <span class="p">{</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;orderId&quot;</span><span class="p">:</span> <span class="s2">&quot;3feae2967d479177&quot;</span><span class="p">,</span>
      <span class="s2">&quot;transactionStatus&quot;</span><span class="p">:</span> <span class="s2">&quot;CANCEL&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;I001&quot;</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Success.&quot;</span>
  <span class="p">}</span>
</pre>
<h4>Test Case 4. KlikBCA Expected Result.</h4>

<p><img src="/assets/images/klikBCAExpecterdResult4-3be60c4f.png" align="left" title="&lsquo;image&rsquo;" alt="&lsquo;images&rsquo;"/></p>

<h4>Test Case 5. Receive KlikBCA Success Transaction Notification</h4>
<pre class="highlight java"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">handle</span><span class="p">(</span><span class="n">String</span> <span class="n">target</span><span class="o">,</span> <span class="n">Request</span> <span class="n">baseRequest</span><span class="o">,</span>
                   <span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span>
<span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">ServletException</span>
<span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">&quot;text/html;charset=utf-8&quot;</span><span class="o">);</span>
    <span class="n">response</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="n">HttpServletResponse</span><span class="o">.</span><span class="na">SC_OK</span><span class="o">);</span>
    <span class="n">baseRequest</span><span class="o">.</span><span class="na">setHandled</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="n">PaymentManager</span> <span class="n">paymentManager</span> <span class="o">=</span> <span class="n">gateway</span><span class="o">.</span><span class="na">getPaymentManager</span><span class="o">();</span>

    <span class="n">InternetBankingResponse</span> <span class="n">bankingResponse</span> <span class="o">=</span>
        <span class="n">paymentManager</span><span class="o">.</span><span class="na">receiveInternetBangkingResponse</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>

    <span class="n">Gson</span> <span class="n">gson</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GsonBuilder</span><span class="o">().</span><span class="na">setPrettyPrinting</span><span class="o">().</span><span class="na">create</span><span class="o">();</span>

    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">gson</span><span class="o">.</span><span class="na">toJson</span><span class="o">(</span><span class="n">bankingResponse</span><span class="o">));</span>
<span class="o">}</span>
</pre>
<h4>Test Case 5. Sample Expected Response Result.</h4>
<pre class="highlight ruby">  <span class="p">{</span>
    <span class="s2">&quot;merchantId&quot;</span><span class="p">:</span> <span class="s2">&quot;A100000000000001000012&quot;</span><span class="p">,</span>
    <span class="s2">&quot;orderId&quot;</span><span class="p">:</span> <span class="s2">&quot;3fec5bd660479bf6&quot;</span><span class="p">,</span>
    <span class="s2">&quot;webPageSelector&quot;</span><span class="p">:</span> <span class="s2">&quot;05&quot;</span><span class="p">,</span>
    <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="s2">&quot;200&quot;</span><span class="p">,</span>
    <span class="s2">&quot;currency&quot;</span><span class="p">:</span> <span class="s2">&quot;IDR&quot;</span><span class="p">,</span>
    <span class="s2">&quot;transactionDate&quot;</span><span class="p">:</span> <span class="s2">&quot;Mar 29, 2013 10:34:55 PM&quot;</span><span class="p">,</span>
    <span class="s2">&quot;transactionType&quot;</span><span class="p">:</span> <span class="s2">&quot;BCA_KLIKBCA&quot;</span><span class="p">,</span>
    <span class="s2">&quot;transactionStatus&quot;</span><span class="p">:</span> <span class="s2">&quot;SETTLEMENT&quot;</span><span class="p">,</span>
    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;I001&quot;</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Success&quot;</span>
  <span class="p">}</span>
</pre>
<h2>6.13 Test Scenarios- Get Order by Id</h2>

<p>On Veritrans&#39; Staging Gateway, we have provided scenarios that can be used by merchant to test the different condition that can happen when using sugar-mdk to get certain order related to certain merchant by its order id.</p>

<h4>Test Case 1. Get an Authorized Order by Id from Transaction without 3D Secure</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give success order response upon getting existing order related to certain sub-merchant</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute doCharge() with card number &ldquo;4111111111111111&rdquo; to get authorized transaction. Note the printed order id. Execute get() with the particular order id and sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">The OrderResponse will be returned containing the customer information, shipping information, transaction detail, and list of items. The TransactionDetail should have the following value: orderId = <the printed order id> , TransactionStatus = TransactionStatus.AUTHORIZE</td>
</tr>
</tbody></table>

<h4>Test Case 2. Get a Challenged Order by Id from Transaction without 3D Secure</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give success order response upon getting existing order related to certain sub-merchant</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute doCharge() with card number &ldquo;4012888888881881&rdquo; to get authorized transaction. Note the printed order id. Execute get() with the particular order id and sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">The OrderResponse will be returned containing the customer information, shipping information, transaction detail, and list of items. The TransactionDetail should have the following value: orderId = <the printed order id> , TransactionStatus = TransactionStatus.CHALLENGE</td>
</tr>
</tbody></table>

<h4>Test Case 3. Get a Denied Order by Id from Transaction without 3D Secure</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give success order response upon getting existing order related to certain sub-merchant</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute doCharge() with card number &ldquo;5120939736834980&rdquo; to get denied transaction. Note the printed order id. Execute get() with the particular order id and sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">The OrderResponse will be returned containing the customer information, shipping information, transaction detail, and list of items. The TransactionDetail should have the following value: orderId = <the printed order id> , TransactionStatus = TransactionStatus.DENY</td>
</tr>
</tbody></table>

<h4>Test Case 4. Get a Cancelled Order by Id from Transaction without 3D Secure</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give success order response upon getting existing order related to certain sub-merchant</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute doCharge() with card number &ldquo;4111111111111111&rdquo; to get authorized transaction. Note the printed order id. Execute doCancel() for the order id and sub-merchant. Execute get() with the particular order id and sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">The OrderResponse will be returned containing the customer information, shipping information, transaction detail, and list of items. The TransactionDetail should have the following value: orderId = <the printed order id> , TransactionStatus = TransactionStatus.CANCEL</td>
</tr>
</tbody></table>

<h4>Test Case 5. Get an Authorized Order by Id from Transaction with 3D Secure</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give success order response upon getting existing order related to certain sub-merchant</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute do3DSecureCharge() with card number &ldquo;4111111111111111&rdquo; to get authorized transaction. Note the printed order id. Execute get() with the particular order id and sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">The OrderResponse will be returned containing the customer information, shipping information, transaction detail, and list of items. The TransactionDetail should have the following value: orderId = <the printed order id> , TransactionStatus = TransactionStatus.AUTHORIZE</td>
</tr>
</tbody></table>

<h4>Test Case 6. Get a Cancelled Order by Id from Transaction with 3D Secure</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give success order response upon getting existing order related to certain sub-merchant</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute do3DSecureCharge() with card number &ldquo;4111111111111111&rdquo; to get authorized transaction. Note the printed order id. Execute doCancel() for the order id and sub-merchant. Execute get() with the particular order id and sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">The OrderResponse will be returned containing the customer information, shipping information, transaction detail, and list of items. The TransactionDetail should have the following value: orderId = <the printed order id> , TransactionStatus = TransactionStatus.CANCEL</td>
</tr>
</tbody></table>

<h4>Test Case 7. Get an Order by Id with Invalid Order Id</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give failed order response upon getting not existing order</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute get() with the random order id (Ex. &ldquo;abc&rdquo;) and particular sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">System will throw VeritransException with code = &ldquo;SG05&rdquo; and message = &ldquo;Resource Not Found&rdquo;</td>
</tr>
</tbody></table>

<h2>6.14 Test Scenarios - Get Order by Date Range, Transaction Status, and Merchant Id</h2>

<h4>Test Case 1 Get all credit card transaction that is executed today</h4>
<pre class="highlight java"><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetByOrderParameterStartEndDateAToday</span><span class="p">(</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span>
<span class="o">{</span>
    <span class="n">VeritransGateway</span> <span class="n">veritransGateway</span> <span class="o">=</span> <span class="n">VeritransGatewayFactory</span><span class="o">.</span><span class="na">createInstance</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">password</span><span class="o">);</span>
    <span class="n">OrderManager</span>     <span class="n">orderManager</span>     <span class="o">=</span> <span class="n">veritransGateway</span><span class="o">.</span><span class="na">getOrderManager</span><span class="o">();</span>

    <span class="n">OrderSearchParameter</span> <span class="n">orderSearch</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OrderSearchParameter</span><span class="o">();</span>

    <span class="c1">//Set start date of when the order occurred, it will show the orders that that occurs after startDate value</span>
    <span class="c1">//Set start date from March 27 to March 29</span>


    <span class="c1">//Set end date of when the order occured, it will show the orders that that occurs before the endDate value</span>
    <span class="n">orderSearch</span><span class="o">.</span><span class="na">setSubMerchantId</span><span class="o">(</span><span class="s">&quot;A100000000000001000234&quot;</span><span class="o">);</span>
    <span class="n">orderSearch</span><span class="o">.</span><span class="na">setStartDate</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">());</span>
    <span class="n">orderSearch</span><span class="o">.</span><span class="na">setEndDate</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">());</span>

    <span class="n">OrderSearchResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">orderManager</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">orderSearch</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
    <span class="n">Gson</span>   <span class="n">gson</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Gson</span><span class="o">();</span>
    <span class="n">String</span> <span class="n">jsonString</span> <span class="o">=</span> <span class="n">gson</span><span class="o">.</span><span class="na">toJson</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">jsonString</span><span class="o">);</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">getPayments</span><span class="o">().</span><span class="na">size</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">OrderSearchResponse</span><span class="o">.</span><span class="na">Payment</span> <span class="n">payment</span> <span class="o">:</span><span class="n">response</span><span class="o">.</span><span class="na">getPayments</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payment</span><span class="o">.</span><span class="na">getTransactionTime</span><span class="o">());</span>
            <span class="n">SimpleDateFormat</span> <span class="n">sf</span>  <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;dd/MM/yyyy hh:mm:ss&quot;</span><span class="o">);</span>
            <span class="n">SimpleDateFormat</span> <span class="n">sf2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;dd/MM/yyyy&quot;</span><span class="o">);</span>
            <span class="n">Date</span> <span class="n">paymentDate</span>     <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">payment</span><span class="o">.</span><span class="na">getTransactionTime</span><span class="o">());</span>

            <span class="n">String</span> <span class="n">payDate</span> <span class="o">=</span> <span class="n">sf2</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">paymentDate</span><span class="o">);</span>
            <span class="n">String</span> <span class="n">nowDate</span> <span class="o">=</span> <span class="n">sf2</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">());</span>

            <span class="n">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="n">payDate</span><span class="o">,</span> <span class="n">nowDate</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Didn't find orders with given date parameters&quot;</span><span class="o">);</span>
        <span class="n">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">getPayments</span><span class="o">().</span><span class="na">size</span><span class="o">(),</span> <span class="mi">0</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre><pre class="highlight ruby">  <span class="no">Result</span>
  <span class="p">{</span>
      <span class="s2">&quot;payments&quot;</span><span class="p">:</span> <span class="o">[</span>
          <span class="p">{</span>
              <span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="s2">&quot;132709&quot;</span><span class="p">,</span>
              <span class="s2">&quot;gross_amount&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
              <span class="s2">&quot;service_type_cd&quot;</span><span class="p">:</span> <span class="s2">&quot;click&quot;</span><span class="p">,</span>
              <span class="s2">&quot;customer_email&quot;</span><span class="p">:</span> <span class="s2">&quot;dharma@veritran.co.id&quot;</span><span class="p">,</span>
              <span class="s2">&quot;customer_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Dharma Utomo&quot;</span><span class="p">,</span>
              <span class="s2">&quot;last_detail_txn_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Authorize&quot;</span><span class="p">,</span>
              <span class="s2">&quot;mstatus&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
              <span class="s2">&quot;red_status&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
              <span class="s2">&quot;customer_phone&quot;</span><span class="p">:</span> <span class="s2">&quot;0215737777&quot;</span><span class="p">,</span>
              <span class="s2">&quot;transaction_time&quot;</span><span class="p">:</span> <span class="s2">&quot;30/03/2013 02:29:53&quot;</span><span class="p">,</span>
              <span class="s2">&quot;last_success_txn_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Authorize&quot;</span><span class="p">,</span>
              <span class="s2">&quot;acquirer_code&quot;</span><span class="p">:</span> <span class="s2">&quot;03&quot;</span><span class="p">,</span>
              <span class="s2">&quot;last_click_transaction_type&quot;</span><span class="p">:</span> <span class="s2">&quot;ac&quot;</span>
          <span class="p">},</span>
          <span class="p">{</span>
              <span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="s2">&quot;90123890&quot;</span><span class="p">,</span>
              <span class="s2">&quot;gross_amount&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
              <span class="s2">&quot;service_type_cd&quot;</span><span class="p">:</span> <span class="s2">&quot;click&quot;</span><span class="p">,</span>
              <span class="s2">&quot;customer_email&quot;</span><span class="p">:</span> <span class="s2">&quot;dharma@veritran.co.id&quot;</span><span class="p">,</span>
              <span class="s2">&quot;customer_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Dharma Utomo&quot;</span><span class="p">,</span>
              <span class="s2">&quot;last_detail_txn_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Authorize&quot;</span><span class="p">,</span>
              <span class="s2">&quot;mstatus&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
              <span class="s2">&quot;red_status&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
              <span class="s2">&quot;customer_phone&quot;</span><span class="p">:</span> <span class="s2">&quot;0215737777&quot;</span><span class="p">,</span>
              <span class="s2">&quot;transaction_time&quot;</span><span class="p">:</span> <span class="s2">&quot;30/03/2013 02:13:07&quot;</span><span class="p">,</span>
              <span class="s2">&quot;last_success_txn_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Authorize&quot;</span><span class="p">,</span>
              <span class="s2">&quot;acquirer_code&quot;</span><span class="p">:</span> <span class="s2">&quot;03&quot;</span><span class="p">,</span>
              <span class="s2">&quot;last_click_transaction_type&quot;</span><span class="p">:</span> <span class="s2">&quot;ac&quot;</span>
          <span class="p">},</span>
          <span class="p">{</span>
              <span class="s2">&quot;order_id&quot;</span><span class="p">:</span> <span class="s2">&quot;912083021&quot;</span><span class="p">,</span>
              <span class="s2">&quot;gross_amount&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
              <span class="s2">&quot;service_type_cd&quot;</span><span class="p">:</span> <span class="s2">&quot;click&quot;</span><span class="p">,</span>
              <span class="s2">&quot;customer_email&quot;</span><span class="p">:</span> <span class="s2">&quot;dharma@veritran.co.id&quot;</span><span class="p">,</span>
              <span class="s2">&quot;customer_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Dharma Utomo&quot;</span><span class="p">,</span>
              <span class="s2">&quot;last_detail_txn_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Authorize&quot;</span><span class="p">,</span>
              <span class="s2">&quot;mstatus&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
              <span class="s2">&quot;red_status&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
              <span class="s2">&quot;customer_phone&quot;</span><span class="p">:</span> <span class="s2">&quot;0215737777&quot;</span><span class="p">,</span>
              <span class="s2">&quot;transaction_time&quot;</span><span class="p">:</span> <span class="s2">&quot;30/03/2013 02:10:48&quot;</span><span class="p">,</span>
              <span class="s2">&quot;last_success_txn_type&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
              <span class="s2">&quot;acquirer_code&quot;</span><span class="p">:</span> <span class="s2">&quot;03&quot;</span><span class="p">,</span>
              <span class="s2">&quot;last_click_transaction_type&quot;</span><span class="p">:</span> <span class="s2">&quot;authorize&quot;</span>
          <span class="p">},</span>
  <span class="nf">......</span>
</pre>
<h2>6.15 Test Scenarios - Create Sub-merchant</h2>

<h4>Test Case 1. Create Sub-merchant (success)</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give updated sub-merchant upon updating certain property of sub-merchant</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Create new instance of Submerchant : Fill in the name = RakutenSubmerchant11 , ownerName = John , phone = +62211711 , email = rakutensubmerchant11@mail.com , npwp = 11111111111111  , sectorType = SectorType.HIGH<em>RISK</em>HIGH_VOLUME</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">Returned a submerchant object with a generated id, username, password and parent</td>
</tr>
</tbody></table>

<p>Returned a submerchant will name, ownerName, phone, email, npwp, sectorType as defined in the Action</p>

<h4>Test Case 2. Create Sub-merchant (email exist)</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give updated sub-merchant upon updating certain property of sub-merchant</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Create new instance of Submerchant : Fill in the name = RakutenSubmerchant12 , ownerName = John2 , phone = +62211711 , email = rakutensubmerchant11@mail.com , npwp = 11111111111111  , sectorType = SectorType.HIGH<em>RISK</em>HIGH_VOLUME</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">Returned a VeritransException with code SG02 and message Email has already been taken</td>
</tr>
</tbody></table>

<h2>6.16 Test Scenarios - Update Sub-merchant</h2>

<p>On Veritrans&#39; Staging Gateway, we have provided scenarios that can be used by merchant to test the different condition that can happen when using sugar-mdk to update certain merchant&rsquo;s properties.</p>

<h4>Test Case 1. Update Certain Property of Sub-merchant</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give updated sub-merchant upon updating certain property of sub-merchant</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Use merchantId = &ldquo;A100000000000001000234&rdquo;. Execute get() with the merchant id. Execute setName(&ldquo;RakutenChildUpdated&rdquo;) with the returned sub-merchant. Execute update() for the sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">Returned SubMerchant will have following value: name = &ldquo;RakutenChildUpdated&rdquo;</td>
</tr>
</tbody></table>

<h4>Test Case 2. Update Certain Property of Sub-merchant with Invalid Value</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give updated sub-merchant upon updating certain property of sub-merchant</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Use merchantId = &ldquo;A100000000000001000234&rdquo;. Execute get() with the merchant id. Execute setName(&ldquo;&rdquo;) with the returned sub-merchant. Execute update() for the sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">Returned SubMerchant will have the name value remains unchanged.</td>
</tr>
</tbody></table>

<h4>Test Case 3. Update Merchant Id of Sub-merchant</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give updated sub-merchant upon updating certain property of sub-merchant</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Use merchantId = &ldquo;A100000000000001000234&rdquo;. Execute get() with the merchant id. Execute setId(&ldquo;A100000000000001000225&rdquo;) with the returned sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">System will throw VeritransException with code = &ldquo;SG03&rdquo;  and with message = &ldquo;SubMerchant Manager Error&rdquo;</td>
</tr>
</tbody></table>

<h2>6.17 Test Scenarios- Get Sub-merchant</h2>

<p>On Veritrans&#39; Staging Gateway, we have provided scenarios that can be used by merchant to test the different condition that can happen when using sugar-mdk to get a certain merchant by its merchant id.</p>

<h4>Test Case 1. Get Certain Sub-merchant</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will return sub-merchant upon getting sub-merchant with certain merchant id</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Use merchantId = &ldquo;A100000000000001000234&rdquo;. Execute get() with the merchant id</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">Returned SubMerchant will have following value: merchantId = &ldquo;A100000000000001000234&rdquo;</td>
</tr>
</tbody></table>

<h4>Test Case 2. Get Certain Sub-merchant with Invalid Merchant Id</h4>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will throw system exception upon getting non-existing sub-merchant</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Use merchantId = &ldquo;abc&rdquo;. Execute get() with the merchant id</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">System will throw VeritransException with code = &ldquo;SG05&rdquo; and message = &ldquo;Resource Not Found&rdquo;</td>
</tr>
</tbody></table>

<h2>6.18 Test Scenarios- Bug Fix Mar 25, 2013</h2>

<p>This section covers test scenarios that have been added to address unexpected result on sugar-mdk, as a result of testing by Rakuten.</p>

<h4>Additional Scenarios for PaymentManager.doCancel()</h4>

<p><strong>Test Case 1. Cancel Response should give correct code response</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give success cancel response upon cancelling normal transaction with Transaction. AUTHORIZE</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">1)  Execute doCharge() with card number &ldquo;4111111111111111&rdquo; to get authorized transaction 2)  Note the printed order id 3)  Execute doCancel() with the particular order id and sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">The CancelResponse will contain order id of the cancelled order with TransactionStatus.CANCEL.</td>
</tr>
</tbody></table>

<p>The CancelResponse will contain code &ldquo;C001&rdquo;</p>

<p><strong>Test Case 2a. Cancel transaction should have proper validation (ChargeRequest cannot have blank orderId)</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give failed cancel transaction, because the mandatory field is not provided</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">1)  Execute doCharge() with card number &ldquo;4111111111111111&rdquo;  to get authorized transaction 2)  Note the printed order id 3)  Execute doCancel() with the particular sub-merchant, set orderId with &ldquo;&rdquo; (empty string) or null</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">This transaction will throw ValidationException with the message &ldquo;Order ID cannot be blank or null&rdquo;  and code SG02</td>
</tr>
</tbody></table>

<p><strong>Test Case 2b. Cancel transaction should have proper validation (ChargeRequest cannot have null submerchant)</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give failed cancel transaction, because the mandatory field is not provided</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">1)  Execute doCharge() with card number &ldquo;4111111111111111&rdquo; to get authorized transaction. 2)  Note the printed order id  3)  Execute doCancel() with the orderId, set submerchant as &ldquo;null&rdquo;</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">This transaction will throw ValidationException with the message &ldquo;Submerchant cannot be null&rdquo; and code SG02</td>
</tr>
</tbody></table>

<p><strong>Test Case 3a. Cancel transaction of 3D Secure transaction with the result of &ldquo;Attempt authentication&rdquo; SE12</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give failed cancel transaction because it is trying to cancel an order with the incorrect status</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">1)  Execute do3DSecureCharge() with card number &ldquo;5555555555554444&rdquo; to get failed transaction with response code &ldquo;SE12&rdquo;.  2)  Note the printed order id. 3)  Execute doCancel() with the particular order id and sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">The transaction will throw VeritransException with code &ldquo;SG07&rdquo; and message &ldquo;Invalid Order Type&rdquo;</td>
</tr>
</tbody></table>

<p><strong>Test Case 3b. Cancel transaction of 3D Secure transaction with the result of &ldquo;Communication Error&rdquo; SE14</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give failed cancel transaction because it is trying to cancel an order with the incorrect status</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">1)  Execute do3DSecureCharge() with card number &ldquo;4012888888881881&rdquo; to get failed transaction with response code &ldquo;SE14&rdquo;. 2)  Note the printed order id. 3)  Execute doCancel() with the particular order id and sub-merchant</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">The transaction will throw VeritransException with code &ldquo;SG07&rdquo; and message &ldquo;Invalid Order Type&rdquo;</td>
</tr>
</tbody></table>

<h4>Additional Scenarios for PaymentManager.doCharge()</h4>

<p><strong>Test Case 1. Phone number should accept &ldquo;+ and -&rdquo;</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give success charge response upon executing normal credit card. The charge request will have a value of billing phone number that contains &ldquo;-&rdquo; on it</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">1)  Set phone number of billing address with the value &ldquo;+62200-77667&rdquo;. 2)  Execute doCharge() with card number &ldquo;4111111111111111&rdquo; to get authorized transaction</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">The ChargeResponse will have value of transactionStatus TransactionStatus.AUTHORIZE</td>
</tr>
</tbody></table>

<p>The ChargeResponse will contain code &ldquo;C001&rdquo;</p>

<h4>Additional Scenarios for PaymentManager.do3DSecureCharge()</h4>

<p><strong>Test Case 1. D3SecureResponse should return transactionTime property</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th style="text-align: center">Data Type</th>
</tr>
</thead><tbody>
<tr>
<td>Description</td>
<td style="text-align: center">This test will give success response transaction upon executing normal credit card transaction</td>
</tr>
<tr>
<td>Action</td>
<td style="text-align: center">Execute do3DSecureCharge () . Use card number &ldquo;4111111111111111&rdquo;</td>
</tr>
<tr>
<td>Expected Result</td>
<td style="text-align: center">receive3DSecureResponse() will return : D3SecureResponse.transactionStatus = TransactionStatus.AUTHORIZE , D3SecureResponse.status = success , D3SecureResponse.resultCode = C001 , D3SecureResponse.D3eci = 05 , D3SecureResponse.transactionTime = {The time of the payment process occurs}</td>
</tr>
</tbody></table>
</article></section><section><footer>&copy; Veritrans Documentation portal ^2014</footer></section><script src="../../assets/javascripts/app-b3406078.js" type="text/javascript"></script></body></html>