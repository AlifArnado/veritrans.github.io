<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <!-- Bing Validate -->
    <meta name="msvalidate.01" content="846642D2B12ABB4747D70776D2056651"/>
    <!-- Google Webmaster Validate -->
    <meta name="google-site-verification" content="uUeOdHBzl0nbyvdyeRHKGIHPxnIpJDTTnWv-QfgkxRs" />
    <meta property="og:title" content="Docs || Online Payment Gateway for Indonesia eCommerce"/>
    <meta property="og:site_name" content="Veritrans"/>
    <meta property="og:description" content="Payment Gateway Solution for eCommerce merchants in Indonesia to send and receive online payment with credit/debit card, internet and mobile banking"/>
    <meta property="fb:app_id" content="404252079606310"/>
    <meta property="og:image" content="http://veritrans.co.id/images/veritrans-og.png"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Veritrans API Documentation. Payment Gateway Indonesia, transaksi online lebih aman, mudah, cepat! Veritrans memberi solusi sistem payment gateway terbaik untuk e-commerce di Indonesia.">
    <meta name="keywords" content="Veritrans, Veritrans Indonesia, payment gateway indonesia, Pembayaran Online Indonesia, online payment Indonesia, sistem transaksi online"> 
    <meta name="google-site-verification" content="uUeOdHBzl0nbyvdyeRHKGIHPxnIpJDTTnWv-QfgkxRs" />
    <meta name="msvalidate.01" content="846642D2B12ABB4747D70776D2056651">
    
    <link href="../../stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    
    <title>Docs - Veritrans Indonesia</title>
		<link rel="icon" type="image/x-icon" href="/favicon/veritrans.ico" />
    
    <!-- Start Alexa Certify Javascript -->
    <script type="text/javascript">
    _atrk_opts = { atrk_acct:"0VtQk1a4SBe05T", domain:"veritrans.co.id",dynamic: true};
    (function() { var as = document.createElement('script'); as.type = 'text/javascript'; as.async = true; as.src = "https://d31qbv1cthcecs.cloudfront.net/atrk.js"; var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(as, s); })();
    </script>
    <noscript><img src="https://d5nxst8fruw4z.cloudfront.net/atrk.gif?account=0VtQk1a4SBe05T" style="display:none" height="1" width="1" alt="" /></noscript>
    <!-- End Alexa Certify Javascript -->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <nav class="navbar navbar-fixed-top with-shadow">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand logo" href="https://veritrans.co.id"></a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav">
        <li><a class="uppercase" href="https://www.veritrans.co.id/payment_channels.html">Payments</a></li>
        <li><a class="uppercase" href="https://www.veritrans.co.id/product_pricing.html">Product & Pricing</a></li>
        <li><a class="uppercase" href="https://www.veritrans.co.id/promo.html">Promo</a></li>
      </ul>

      <ul class="nav navbar-nav navbar-right">
        <li class="active">
          <a href="http://docs.veritrans.co.id">Docs</a>
        </li>
        <li>
          <a href="https://www.veritrans.co.id/contact.html">Contact</a>
        </li>
        <li>
          <a href="https://blog.veritrans.co.id">Blog</a>
        </li>
        <li>
          <a href="https://veritrans.co.id/career.html">Career</a>
        </li>
        <li>
          <a id="logInHeader" class="uppercase text-bold" href="#" data-toggle="modal" data-target="#login-modal">
            Log In
          </a>
        </li>
        <li>
          <a id="signUpHeader" href="https://my.sandbox.veritrans.co.id/register" class="btn btn-yellow">
             Sign Up
          </a>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>
<div class="nav-overlay visible-sm visible-xs"></div>
<!-- LOGIN MODAL -->
<div id="login-modal" class="modal fade">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-body">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <div class="row">
          <div class="col-sm-6 col-xs-12">
            <div class="production-box">
              <!-- <img src="images/banner-about.png"> -->
              <h5>PRODUCTION</h5>
              <p class="text-left">Jika Anda sudah terintegrasi dengan Veritrans. Log In untuk masuk ke Merchant Administration Portal Anda.</p>
              <a class="btn btn-trans-blue btn-med" href="https://my.veritrans.co.id">LOG IN<span class="arr-out">→</span></a>
            </div>
          </div>
          <div class="col-sm-6 col-xs-12">
            <div class="sandbox-box">
              <!-- <img src="images/banner-sandbox.png"> -->
              <h5>SANDBOX</h5>
              <p>Environment testing Veritrans untuk keperluan development dan uji coba Merchant Administration Portal. <a href="https://my.sandbox.veritrans.co.id" class="text-blue">Log In<span class="arr-out">→</span></a></p>
            </div>
          </div>
        </div>
        <br/><br/>
        <div class="row">
          <div class="col-xs-12 text-left">
            <div class="register-box">
              Belum terdaftar? <a id="signUpModal" href="https://my.sandbox.veritrans.co.id/register" class="text-blue signup-modal">Sign Up<span class="arr-out">→</span></a>
            </div>
          </div>
        </div>  
      </div>
    </div>
  </div>
</div>

    <div class="custom-container container">
      <div class="row row-offcanvas row-offcanvas-right">
        <div class="col-xs-6 col-sm-4 col-md-3 sidebar-offcanvas" id="sidebar" role="navigation">

    <div class="documentation-sidebar affix">
        <div class="docs-logo">
            <span>DOCS</span>
        </div>
        <div class="language-toggle"> English / <a href="../../id/vtdirect/integration_cc.html">Bahasa Indonesia</a></div>
        <ul class="sidebar">
            
                <li>
                    
                        <a class="parent">Getting Started</a>
                        <b class="caret"></b>
                        <ul class="child-menu">
                            
                            <li class=""><a href="../welcome/index.html">Introduction</a></li>
                            
                            <li class=""><a href="../welcome/preparation.html">Preparation</a></li>
                            
                            <li class=""><a href="../welcome/pluginlibrary.html">Library & Plugin</a></li>
                            
                        </ul>
                    
                </li>
            
                <li>
                    
                        <a class="parent">VT-Web</a>
                        <b class="caret"></b>
                        <ul class="child-menu">
                            
                            <li class=""><a href="../vtweb/integration.html">Integration</a></li>
                            
                            <li class=""><a href="../vtweb/other_features.html">Other Features</a></li>
                            
                            <li class=""><a href="../vtweb/going_live.html">Going Live</a></li>
                            
                        </ul>
                    
                </li>
            
                <li>
                    
                        <a class="parent">VT-Direct</a>
                        <b class="caret"></b>
                        <ul class="child-menu">
                            
                            <li class="active"><a href="integration.html">Integration</a></li>
                            
                            <li class=""><a href="other_features.html">Other Features</a></li>
                            
                            <li class=""><a href="other_commands.html">Other Commands</a></li>
                            
                            <li class=""><a href="going_live.html">Going Live</a></li>
                            
                        </ul>
                    
                </li>
            
                <li>
                    
                        <a class="parent" href="../vtlink/index.html">VT-Link</a>
                    
                </li>
            
                <li>
                    
                        <a class="parent" href="../mobile/index.html">Mobile</a>
                    
                </li>
            
                <li>
                    
                        <a class="parent">API Reference</a>
                        <b class="caret"></b>
                        <ul class="child-menu">
                            
                            <li class=""><a href="../api/introduction.html">Introduction</a></li>
                            
                            <li class=""><a href="../api/methods.html">API Methods</a></li>
                            
                            <li class=""><a href="../api/status_code.html">Status Code</a></li>
                            
                        </ul>
                    
                </li>
            
                <li>
                    
                        <a class="parent" href="../api/test_credentials.html">Testing</a>
                    
                </li>
            
                <li>
                    
                        <a class="parent" href="../dashboard/index.html">Dashboard</a>
                    
                </li>
            
                <li>
                    
                        <a class="parent" href="http://support.veritrans.co.id">FAQ</a>
                    
                </li>
            
        </ul>
        <p class="question">
            Something is missing from the docs?<br>
            <a href="https://github.com/veritrans/veritrans.github.io">Open an issue or contribute to the docs on Github</a>
        </p>
    </div>
</div>

        <div class="col-xs-12 col-sm-8 col-md-9" id="bodier">
          <p class="pull-right visible-xs">
            <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Menu</button>
          </p>
          <div class="en-vtdirect-integration-cc">
            <h2 id="vt-direct-integration-credit-card">VT-Direct Integration (Credit Card)</h2>
<hr />

<h5 id="every-payment-method-has-different-integration-steps-available-the-objective-of-this-documentation-is-to-assist-you-in-integrating-with-vt-direct-credit-card-payment-method-for-more-inquiries-please-contact-us-at-supportveritranscoidmailtosupportveritranscoid-email-support-or-visit-our--support-web-pagehttpsupportveritranscoid-veritrans-support"><em>Every payment method has different integration steps available. The objective of this documentation is to assist you in integrating with VT-Direct credit card payment method. For more inquiries, please contact us at <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#064;&#118;&#101;&#114;&#105;&#116;&#114;&#097;&#110;&#115;&#046;&#099;&#111;&#046;&#105;&#100;">&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#064;&#118;&#101;&#114;&#105;&#116;&#114;&#097;&#110;&#115;&#046;&#099;&#111;&#046;&#105;&#100;</a> or visit our  <a title="Veritrans Support" href="http://support.veritrans.co.id">support web page</a>.</em></h5>
<hr />
<p><br /></p>

<div class="row">
  <div class="col-md-2 col-sm-3 col-xs-12">
    <div class="thumbnail">
    <a href="integration_cc.html"><img src="../../images/cc_icon.jpg" /></a>
    </div>
  </div>
  <div class="col-md-2 col-sm-3 col-xs-12">
    <div class="thumbnail">
    <a href="integration_mandiri.html"><img src="../../images/mc_icon_gray.jpg" /></a>
    </div>
  </div>
  <div class="col-md-2 col-sm-3 col-xs-12">
    <div class="thumbnail">
    <a href="integration_cimb.html"><img src="../../images/cic_icon_gray.jpg" /></a>
    </div>
  </div>
  <div class="col-md-2 col-sm-3 col-xs-12">
    <div class="thumbnail">
    <a href="integration_va.html"><img src="../../images/va_icon_gray.png" /></a>
    </div>
  </div>
  <div class="col-md-2 col-sm-3 col-xs-12">
    <div class="thumbnail">
    <a href="integration_bripay.html"><img src="../../images/bri_icon_gray.jpg" /></a>
    </div>
  </div>
  <div class="col-md-2 col-sm-3 col-xs-12">
    <div class="thumbnail">
    <a href="integration_tcash.html"><img src="../../images/tcash_icon_gray.jpg" /></a>
    </div>
  </div>
  <div class="col-md-2 col-sm-3 col-xs-12">
    <div class="thumbnail">
    <a href="integration_xltunai.html"><img src="../../images/xltunai_icon_gray.jpg" /></a>
    </div>
  </div>
  <div class="col-md-2 col-sm-3 col-xs-12">
      <div class="thumbnail">
      <a href="integration_mbill.html"><img src="../../images/mbill_icon_grey.jpg" /></a>
      </div>
  </div>
  <div class="col-md-2 col-sm-3 col-xs-12">
    <div class="thumbnail">
    <a href="integration_bbmmoney.html"><img src="../../images/icon_bbmmoney_gray.png" /></a>
    </div>
  </div>
  <div class="col-sm-2 col-xs-12">
      <div class="thumbnail">
      <a href="integration_indomrt.html"><img src="../../images/indomrt_icon_grey.png" /></a>
      </div>
  </div>
  <div class="col-md-2 col-sm-3 col-xs-12">
      <div class="thumbnail">
        <a href="integration_dompetku.html"><img src="../../images/dompetku_icon_gray.png" /></a>
      </div>
  </div>
</div>
<hr />
<p><br /></p>

<h3 id="integration-steps-vt-direct-credit-card">Integration Steps VT-Direct Credit Card</h3>

<ol>
  <li>Acquire Token</li>
  <li>Perform Charge Transaction</li>
  <li>Check Transaction Status
<br /><br /></li>
</ol>

<!-- Nav tabs -->
<ul class="nav nav-tabs">
  <li class="active"><a href="#step1" data-toggle="tab"><span>Step 1</span>Acquire Token</a></li>
  <li><a href="#step2" data-toggle="tab"><span>Step 2</span>Perform Charge Transaction</a></li>
  <li><a href="#step3" data-toggle="tab"><span>Step 3</span>Check Transaction Status</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="step1">
    <!-- step 1-->
    <!-- One -->
    <p><br /></p>

    <h2 id="acquire-token">Acquire Token</h2>

    <p><img alt="vtdirect_intro1" class="img-responsive img-thumbnail" src="../../images/vtdirect_introduction_1.png" /></p>

    <p><em>VT-Direct Process (Step 1 - 3)</em>
<br /><br />
This phase comprises of step 1-3 of VT-Direct Process diagram. On this step, we will try to acquire token ID for a transaction. Token ID is a unique value that is associated with the customer payment information (credit card number, expiry date, CVV) during a transaction. You need token ID to perform charge transaction on the next step.</p>

    <p>To acquire token, there are three components that need to be prepared:</p>

    <ol>
      <li><a href="#payment-form">Payment Form</a></li>
      <li><a href="#javascript">Veritrans Javascript Library</a></li>
      <li><a href="#additional-script">Additional Script</a></li>
    </ol>

    <p><br /></p>

    <h3 id="payment-form">Payment Form</h3>

    <p>Our payment form is saved as a HTML file named <code>form_vtdirect.html</code>. The example that we provided is very simple and can be modified according to your need.</p>

    <p>On credit card payment method, there are at least 4 fields to be filled:</p>

    <ol>
      <li>Credit card number</li>
      <li>Credit card expiry month</li>
      <li>Credit card expiry year</li>
      <li>CVV (Card Verification Value)</li>
    </ol>

    <p>The following is a sample from the file <code>form_vtdirect.html</code>:
<br /><br /></p>

<pre><code class="highlight html"><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>VT-Direct Form Example<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Checkout<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"checkout.php"</span> <span class="na">method=</span><span class="s">"POST"</span> <span class="na">id=</span><span class="s">"payment-form"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;label&gt;</span>Card Number<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"card-number"</span> <span class="na">size=</span><span class="s">"20"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"4811111111111114"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>

      <span class="nt">&lt;label&gt;</span>Expiration (MM/YYYY)<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"card-expiry-month"</span> <span class="na">size=</span><span class="s">"2"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"01"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;span&gt;</span> / <span class="nt">&lt;/span&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"card-expiry-year"</span> <span class="na">size=</span><span class="s">"4"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"2020"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
      
      <span class="nt">&lt;label&gt;</span>CVV<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"card-cvv"</span> <span class="na">size=</span><span class="s">"3"</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">value=</span><span class="s">"123"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
      
      <span class="c">&lt;!-- Additional Field --&gt;</span>
      <span class="nt">&lt;label&gt;</span>Harga<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"price"</span> <span class="na">name=</span><span class="s">"price"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"200500"</span><span class="nt">/&gt;</span>

      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"token-id"</span> <span class="na">name=</span><span class="s">"token-id"</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"submit-button"</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Pay<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;/form&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>

    <p><br /></p>

    <h3 id="javascript">Veritrans Javascript Library</h3>

    <p>This library allows customer credit card to be securely sent to Veritrans server. After the credit card information is sent, Veritrans server will send back a token ID. For security purposes, we forbid the merchant to implement their own Javascript. If more feature needs to be added in Javascript library, please contact <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#064;&#118;&#101;&#114;&#105;&#116;&#114;&#097;&#110;&#115;&#046;&#099;&#111;&#046;&#105;&#100;">Veritrans support</a>.</p>

    <p>To utilize this library, you just need to add a line of HTML code at <code>form_vtdirect.html</code> with the tag <code>&lt;head&gt;</code>.
<br /><br /></p>

<pre><code class="highlight html">
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://api.sandbox.veritrans.co.id/v2/assets/js/veritrans.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

</code></pre>

    <p><br />
If you are using sandbox account, please fill the <code>form_vtdirect.html</code> file as followed:
<br /><br /></p>

<pre><code class="highlight html"><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>VT-Direct Form Example<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://api.sandbox.veritrans.co.id/v2/assets/js/veritrans.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/head&gt;</span>

  ...

<span class="nt">&lt;/html&gt;</span>
</code></pre>
    <p><br /></p>

    <h3 id="additional-script">Additional Script</h3>

    <p>Additional script is used to connect the content form with <code>veritrans.min.js</code>. The first script that is used is <strong>jQuery</strong>. jQuery will ease the HTML access and event addition when the form is submitted. To utilize jQuery, the code below needs to be added at the tag <code>head</code> on the file <code>form_vtdirect.html</code>:
<br /><br /></p>

<pre><code class="highlight html"><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>

    <p><br />
The second script that is used is <strong>jQuery fancybox</strong>. jQuery fancybox helps make a dynamic 3D secure confirmation form. You can download the jQuery fancy box <a href="https://github.com/fancyapps/fancyBox">here</a>. Extract the library and add the following code at the tag <code>head</code> on the file <code>form_vtdirect.html</code>:
<br /><br /></p>

<pre><code class="highlight html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"fancybox/jquery.fancybox.pack.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"fancybox/jquery.fancybox.css"</span> <span class="na">type=</span><span class="s">"text/css"</span> <span class="na">media=</span><span class="s">"screen"</span> <span class="nt">/&gt;</span>
</code></pre>

    <p><br />
Make sure the javascript file path and CSS fancy box follows in accordance to your project folder structure.</p>

    <p>The last script is used to integrate all the previous components that we created. On this script, we have to make sure that <strong>client key</strong> and <strong>Veritrans API URL</strong> is accurate. You can acquire the client key from <a href="https://my.sandbox.veritrans.co.id/settings/config_info">Merchant Administration Portal</a>. Veritrans API URL for Sandbox environment is:
<br /><br /></p>

<pre><code class="highlight plaintext">https://api.sandbox.veritrans.co.id/v2/token
</code></pre>

    <p><br />
To improve the security of online transaction, we recommend you to activate the 3D Secure feature. There are 2 information components that need to be added for this feature to be utilized: acquiring bank (Merchant’s Bank) and transaction value.</p>

    <p>If you are using sandbox environment, the acquiring bank is BNI and the transaction value is Rp 200.000,00. The sample script that we add in the tag <code>body</code> at the file <code>form_vtdirect.html</code>:
<br /><br /></p>

<pre><code class="highlight html"><span class="c">&lt;!-- Javascript to generate token and show 3DSecure Dialog --&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="c1">// Sandbox API URL. TODO: Change with Production API URL when you're ready to go live.</span>
  <span class="nx">Veritrans</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="s2">"https://api.sandbox.veritrans.co.id/v2/token"</span><span class="p">;</span>

  <span class="c1">// TODO: Change with your actual client key that can be found at Merchant Administration Portal &gt;&gt; Settings &gt;&gt; Access Key</span>
  <span class="nx">Veritrans</span><span class="p">.</span><span class="nx">client_key</span> <span class="o">=</span> <span class="s2">"&lt; Your Client Key&gt;"</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">card</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="s1">'card_number'</span>     <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#card-number"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="s1">'card_exp_month'</span>  <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#card-expiry-month"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="s1">'card_exp_year'</span>   <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#card-expiry-year"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="s1">'card_cvv'</span>        <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#card-cvv"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>

      <span class="c1">// Set 'secure', 'bank', and 'gross_amount', if the merchant wants transaction to be processed with 3D Secure</span>
      <span class="s1">'secure'</span>       <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s1">'bank'</span>       <span class="p">:</span> <span class="s1">'bni'</span><span class="p">,</span>
      <span class="s1">'gross_amount'</span>   <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#price"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="c1">// handler when user click the 'Pay' button.</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'#submit-button'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"disabled"</span><span class="p">,</span> <span class="s2">"disabled"</span><span class="p">);</span> 
    <span class="nx">Veritrans</span><span class="p">.</span><span class="nx">token</span><span class="p">(</span><span class="nx">card</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">redirect_url</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// 3Dsecure transaction. Open 3Dsecure dialog</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Open Dialog 3Dsecure'</span><span class="p">);</span>
      <span class="nx">openDialog</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">redirect_url</span><span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status_code</span> <span class="o">==</span> <span class="s1">'200'</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// success 3d secure or success normal</span>
      <span class="c1">//close 3d secure dialog if any</span>
      <span class="nx">closeDialog</span><span class="p">();</span>

      <span class="c1">// store token data in input #token_id and then submit form to merchant server</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#token-id"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">token_id</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#payment-form"</span><span class="p">).</span><span class="nx">submit</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="c1">// failed request token</span>
      <span class="c1">//close 3d secure dialog if any</span>
      <span class="nx">closeDialog</span><span class="p">();</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'#submit-button'</span><span class="p">).</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s1">'disabled'</span><span class="p">);</span>
      <span class="c1">// Show status message.</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'#message'</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status_message</span><span class="p">);</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">));</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="c1">// Open 3DSecure dialog box</span>
  <span class="kd">function</span> <span class="nx">openDialog</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">fancybox</span><span class="p">.</span><span class="nx">open</span><span class="p">({</span>
          <span class="na">href</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
          <span class="na">type</span><span class="p">:</span> <span class="s1">'iframe'</span><span class="p">,</span>
          <span class="na">autoSize</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="na">width</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span>
          <span class="na">height</span><span class="p">:</span> <span class="mi">420</span><span class="p">,</span>
          <span class="na">closeBtn</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="na">modal</span><span class="p">:</span> <span class="kc">true</span>
      <span class="p">});</span>
  <span class="p">}</span>

  <span class="c1">// Close 3DSecure dialog box</span>
  <span class="kd">function</span> <span class="nx">closeDialog</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">fancybox</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>

    <p><br />
When the customer click <code>Pay</code>, javascript will accumulate the field <code>card_number</code>, <code>card_exp_month</code>, <code>card_exp_year</code>, <code>cvv</code>,  and <code>amount</code> from HTML form. These <em>fields</em> will then be sent securely to Veritrans server. If the <em>field</em> values are valid, Veritrans server will return a token ID that can be used to charge the transaction.</p>

    <p>When the token ID is acquired, <em>hidden field</em> <code>token_id</code> will be automatically filled and sent to the merchant’s server. Do note that sensitive data from the customer will not be sent to the merchant’s server (Attribute <code>name</code> not included). Merchant’s server will only receive data <code>amount</code> and <code>token_id</code>.</p>

    <p>JQuery and jQuery fancy box usage is optional. You can use other javascript framework or your own script to display 3D Secure dialog.</p>

    <p>The sample credit card that can be used for 3DS transaction is:
<br /><br /></p>

    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Visa</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Card Number</td>
          <td>4811 1111 1111 1114</td>
        </tr>
        <tr>
          <td>CVV</td>
          <td>123</td>
        </tr>
        <tr>
          <td>Exp. Month</td>
          <td>01</td>
        </tr>
        <tr>
          <td>Exp. Year</td>
          <td>2020</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p>Information about cards that can be used for testing can be found in <a href="../api/test_credentials.html">Testing menu</a>.</p>

  </div>
  <!-- end of step 1-->

  <div class="tab-pane" id="step2">
    <!-- step 2-->

    <!-- Two -->
    <p><br /></p>

    <h2 id="charge-transaction">Charge Transaction</h2>

    <p><img alt="vtdirect_intro2" class="img-responsive img-thumbnail" src="../../images/vtdirect_introduction_2.png" /></p>

    <p><em>VT-Direct Process (Step 4 - 6)</em>
<br /><br />
This step explains how charge transaction occurs in VT-Direct. Charge transaction implementation is assumed to be the PHP file named <code>checkout.php</code>. In <code>checkout.php</code>, <code>token_id</code> and the <code>price</code> attribute can be accessed charge transaction. These two attributes will be sent by <code>form_checkout.html</code> during <strong>Acquire Token</strong>.</p>

    <p>To perform charge transaction, there are six components that need to be prepared:</p>

    <ol>
      <li>Token ID</li>
      <li>Transaction Value</li>
      <li>Acquiring bank</li>
      <li>Server key</li>
      <li>Order ID</li>
      <li>Transaction Data
        <ul>
          <li>Customer Data</li>
          <li>Item Data (Optional)</li>
        </ul>
      </li>
    </ol>

    <p><br />
The first three components can be obtained from <em>field</em> in <code>form_checkout.html</code>. Server key can be obtained at <a href="https://my.sandbox.veritrans.co.id/settings/config_info">Merchant Administration Portal</a>. Order ID is an unique value for a transaction which can be set by the merchant.</p>

    <p>Transaction data consists of information about purchased item and customer information. Transaction data will be stored in Veritrans server and can be obtained anytime. This data is optional in nature. In general, transaction data can be obtained by adding the fields in <code>form_checkout.html</code>. Details about structure and transaction data information can be found <a href="../api/methods.html">here</a>.</p>

    <p>Sample script <code>checkout.php</code> to perform charge transaction (simple transaction data):
<br /><br /></p>

<pre><code class="highlight php"><span class="cp">&lt;?php</span>

<span class="k">include_once</span><span class="p">(</span><span class="s1">'Veritrans.php'</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'token-id'</span><span class="p">]))</span> 
<span class="p">{</span>
  <span class="k">echo</span> <span class="s2">"Empty token-id."</span><span class="p">;</span>
  <span class="k">exit</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// TODO: change with your actual server_key that can be found on Merchant Administration Portal (MAP)
</span><span class="nx">Veritrans_Config</span><span class="o">::</span><span class="nv">$serverKey</span> <span class="o">=</span> <span class="s2">"&lt; Your Server Key&gt;"</span><span class="p">;</span>
<span class="nx">Veritrans_Config</span><span class="o">::</span><span class="nv">$isProduction</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="c1">// token_id represents the credit card that will be charged.
// token_id can be obtained from the request through veritrans.min.js
</span>
<span class="nv">$token_id</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'token-id'</span><span class="p">];</span>

<span class="nv">$transaction_details</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'order_id'</span>    <span class="o">=&gt;</span> <span class="nb">rand</span><span class="p">(),</span>
  <span class="s1">'gross_amount'</span>  <span class="o">=&gt;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'price'</span><span class="p">]</span>
<span class="p">);</span>

<span class="c1">//Data that will be sent to request charge transaction with credit card.
</span><span class="nv">$transaction_data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'payment_type'</span>      <span class="o">=&gt;</span> <span class="s1">'credit_card'</span><span class="p">,</span> 
  <span class="s1">'credit_card'</span>       <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'token_id'</span>  <span class="o">=&gt;</span> <span class="nv">$token_id</span><span class="p">,</span>
    <span class="s1">'bank'</span>    <span class="o">=&gt;</span> <span class="s1">'bni'</span>
    <span class="p">),</span>
  <span class="s1">'transaction_details'</span>   <span class="o">=&gt;</span> <span class="nv">$transaction_details</span><span class="p">,</span>
  <span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nx">Veritrans_VtDirect</span><span class="o">::</span><span class="na">charge</span><span class="p">(</span><span class="nv">$transaction_data</span><span class="p">);</span>

<span class="cp">?&gt;</span>
</code></pre>

    <p><br />
Sample script <code>checkout.php</code> to perform charge transaction (full transaction data):
<br /><br /></p>

<pre><code class="highlight php"><span class="cp">&lt;?php</span>

<span class="k">include_once</span><span class="p">(</span><span class="s1">'Veritrans.php'</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'token-id'</span><span class="p">]))</span> 
<span class="p">{</span>
  <span class="k">echo</span> <span class="s2">"Empty token-id."</span><span class="p">;</span>
  <span class="k">exit</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// TODO: change with your actual server_key that can be found on Merchant Administration Portal (MAP)
</span><span class="nx">Veritrans_Config</span><span class="o">::</span><span class="nv">$serverKey</span> <span class="o">=</span> <span class="s2">"&lt; Your Server Key&gt;"</span><span class="p">;</span>
<span class="nx">Veritrans_Config</span><span class="o">::</span><span class="nv">$isProduction</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="c1">// token_id represents the credit card that will be charged.
// token_id can be obtained from the request through veritrans.min.js
</span><span class="nv">$token_id</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'token-id'</span><span class="p">];</span>

<span class="nv">$transaction_details</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'order_id'</span>    <span class="o">=&gt;</span> <span class="nb">rand</span><span class="p">(),</span>
  <span class="s1">'gross_amount'</span>  <span class="o">=&gt;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'price'</span><span class="p">]</span>
<span class="p">);</span>

<span class="nv">$item1_details</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="s1">'a1'</span><span class="p">,</span>
    <span class="s1">'price'</span> <span class="o">=&gt;</span> <span class="mi">500000</span><span class="p">,</span>
    <span class="s1">'quantity'</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'Apple'</span>
    <span class="p">);</span>

<span class="nv">$item2_details</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="s1">'a2'</span><span class="p">,</span>
    <span class="s1">'price'</span> <span class="o">=&gt;</span> <span class="mi">100500</span><span class="p">,</span>
    <span class="s1">'quantity'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'Orange'</span>
    <span class="p">);</span>

<span class="nv">$item_details</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span><span class="nv">$item1_details</span><span class="p">,</span> <span class="nv">$item2_details</span><span class="p">);</span>

<span class="nv">$billing_address</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'first_name'</span>    <span class="o">=&gt;</span> <span class="s2">"Andri"</span><span class="p">,</span>
    <span class="s1">'last_name'</span>     <span class="o">=&gt;</span> <span class="s2">"Litani"</span><span class="p">,</span>
    <span class="s1">'address'</span>       <span class="o">=&gt;</span> <span class="s2">"Mangga 20"</span><span class="p">,</span>
    <span class="s1">'city'</span>          <span class="o">=&gt;</span> <span class="s2">"Jakarta"</span><span class="p">,</span>
    <span class="s1">'postal_code'</span>   <span class="o">=&gt;</span> <span class="s2">"16602"</span><span class="p">,</span>
    <span class="s1">'phone'</span>         <span class="o">=&gt;</span> <span class="s2">"081122334455"</span><span class="p">,</span>
    <span class="s1">'country_code'</span>  <span class="o">=&gt;</span> <span class="s1">'IDN'</span>
    <span class="p">);</span>

<span class="nv">$shipping_address</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'first_name'</span>    <span class="o">=&gt;</span> <span class="s2">"Obet"</span><span class="p">,</span>
    <span class="s1">'last_name'</span>     <span class="o">=&gt;</span> <span class="s2">"Supriadi"</span><span class="p">,</span>
    <span class="s1">'address'</span>       <span class="o">=&gt;</span> <span class="s2">"Manggis 90"</span><span class="p">,</span>
    <span class="s1">'city'</span>          <span class="o">=&gt;</span> <span class="s2">"Jakarta"</span><span class="p">,</span>
    <span class="s1">'postal_code'</span>   <span class="o">=&gt;</span> <span class="s2">"16601"</span><span class="p">,</span>
    <span class="s1">'phone'</span>         <span class="o">=&gt;</span> <span class="s2">"08113366345"</span><span class="p">,</span>
    <span class="s1">'country_code'</span>  <span class="o">=&gt;</span> <span class="s1">'IDN'</span>
    <span class="p">);</span>

<span class="nv">$customer_details</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'first_name'</span>    <span class="o">=&gt;</span> <span class="s2">"Andri"</span><span class="p">,</span>
    <span class="s1">'last_name'</span>     <span class="o">=&gt;</span> <span class="s2">"Litani"</span><span class="p">,</span>
    <span class="s1">'email'</span>         <span class="o">=&gt;</span> <span class="s2">"Andri@Litani.com"</span><span class="p">,</span>
    <span class="s1">'phone'</span>         <span class="o">=&gt;</span> <span class="s2">"081122334455"</span><span class="p">,</span>
    <span class="s1">'billing_address'</span>  <span class="o">=&gt;</span> <span class="nv">$billing_address</span><span class="p">,</span>
    <span class="s1">'shipping_address'</span> <span class="o">=&gt;</span> <span class="nv">$shipping_address</span>
    <span class="p">);</span>

<span class="c1">// Data that will be send for credit card charge transaction request.
</span><span class="nv">$transaction_data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'payment_type'</span>    <span class="o">=&gt;</span> <span class="s1">'credit_card'</span><span class="p">,</span> 
  <span class="s1">'credit_card'</span>     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'token_id'</span>      <span class="o">=&gt;</span> <span class="nv">$token_id</span><span class="p">,</span>
    <span class="s1">'bank'</span>          <span class="o">=&gt;</span> <span class="s1">'bni'</span>
    <span class="p">),</span>
  <span class="s1">'transaction_details'</span>   <span class="o">=&gt;</span> <span class="nv">$transaction_details</span><span class="p">,</span>
  <span class="s1">'item_details'</span>          <span class="o">=&gt;</span> <span class="nv">$items</span><span class="p">,</span>
  <span class="s1">'customer_details'</span>      <span class="o">=&gt;</span> <span class="nv">$customer_details</span>
  <span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nx">Veritrans_VtDirect</span><span class="o">::</span><span class="na">charge</span><span class="p">(</span><span class="nv">$transaction_data</span><span class="p">);</span>

<span class="cp">?&gt;</span>
</code></pre>

    <p><br /></p>

    <h3 id="error-during-charge-transaction">Error During Charge Transaction</h3>

    <p>Under a certain case, charged transaction on VT-Direct may fail. Veritrans will return an error message if failure occurred. The reason of failure can be inspected from the status code displayed on the error message. The status code that generally occurs are:
<br /><br /></p>

    <table>
      <thead>
        <tr>
          <th>Error Code</th>
          <th>Explanation</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>400</code> Validation error</td>
          <td>Format or content of the transaction data is invalid; Example: Wrong variable type, invalid payment method.</td>
        </tr>
        <tr>
          <td><code>401</code> Access Denied</td>
          <td>Invalid client or server key.</td>
        </tr>
        <tr>
          <td><code>402</code> Access Denied</td>
          <td>Merchant does not have access to utilise a certain method of payment.</td>
        </tr>
        <tr>
          <td><code>406</code> Duplicate Order ID</td>
          <td>Order ID has previously been used and paid.</td>
        </tr>
        <tr>
          <td><code>410</code> Account Inactive</td>
          <td>Merchant account has been inactive for a long period of time.</td>
        </tr>
        <tr>
          <td><code>411</code> Token error</td>
          <td>Token missing, invalid, or expired.</td>
        </tr>
      </tbody>
    </table>

    <p><br />
The complete list of status codes can be found at <a href="../api/status_code.html">API Reference - Status Code</a>.</p>

    <p>When charge transaction process is completed, you can check the transaction status. The steps to examine transaction status will be discussed on the next steps.</p>

  </div>
  <!-- end of step 2-->

  <div class="tab-pane" id="step3">
    <!-- step 3-->

    <!-- three -->
    <p><br /></p>

    <h2 id="transaction-status">Transaction Status</h2>

    <p>Veritrans' server will return a response for every charge transaction in JSON form. Veritrans PHP Library will convert JSON into a PHP object automatically. The sample JSON script that is returned by Veritrans is as followed:
<br /><br /></p>

    <h3 id="success-response">Success Response</h3>

<pre><code class="highlight php">$result = array(
    "transaction_id" =&gt; "93c6a0ff-b270-4b00-adba-f1738ff90261",
    "order_id" =&gt; "201303131610",
    "gross_amount" =&gt; 10000.00,
    "payment_type" =&gt; "credit_card",
    "transaction_time" =&gt; "2014-03-13 16:10:15",
    "transaction_status" =&gt; "capture",
    "fraud_status" =&gt; "accept",
    "masked_card" =&gt; "481111-1114",
    "status_code" =&gt; "200",
    "bank" =&gt; "bni",
    "eci" =&gt; "05",
    "approval_code" =&gt; "140540",
    "status_message" =&gt; "Success, Credit Card transaction is successful"
);
</code></pre>
    <p><br /></p>

    <h3 id="failure-response">Failure Response</h3>

<pre><code class="highlight php">$result = array(
    "transaction_id" =&gt; "f5507d7c-a46f-4a00-97a1-8a0b29d34ab3",
    "order_id" =&gt; "201303121701",
    "payment_type" =&gt; "credit_card",
    "transaction_time" =&gt; "2014-07-15 16:01:30",
    "transaction_status" =&gt; "deny",
    "fraud_status" =&gt; "accept",
    "masked_card" =&gt; "491111-1113",
    "gross_amount" =&gt; "10000.00"
    "status_code" =&gt; "202",
    "bank" =&gt; "bni",
    "status_message" =&gt; "Deny by Bank [BNI] with code [05] and message [Do not honour]"
);
</code></pre>

    <p><br />
One of the most important information details in the JSON response is the status code, which can be found in <code>status_code</code> attribute. There are three types of status code:</p>

    <ol>
      <li>Status code <strong>200</strong>: Transaction successful.</li>
      <li>Status code <strong>202</strong>: Transaction rejected by bank or by Fraud Detection System (FDS).</li>
      <li>Status code <strong>201</strong>: Transaction challenge. You have to make a confirmation at Merchant Administration Portal (MAP).</li>
    </ol>

    <p>You can add the following PHP code at the last line of the file <code>checkout.php</code> to send transaction status to your customer:
<br /><br /></p>

<pre><code class="highlight php"><span class="cp">&lt;?php</span>

<span class="k">include_once</span><span class="p">(</span><span class="s1">'Veritrans.php'</span><span class="p">);</span>

<span class="o">...</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nx">Veritrans_VtDirect</span><span class="o">::</span><span class="na">charge</span><span class="p">(</span><span class="nv">$transaction_data</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">status_code</span> <span class="o">==</span> <span class="s2">"200"</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">//success
</span>  <span class="k">echo</span> <span class="s2">"Transaction Successful. &lt;br /&gt;"</span><span class="p">;</span>
  <span class="k">echo</span> <span class="s2">"Transaction status for order id "</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">order_id</span><span class="o">.</span><span class="s2">": "</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">transaction_status</span><span class="p">;</span>
  <span class="k">echo</span> <span class="s2">"&lt;h3&gt;Transaction detail:&lt;/h3&gt;"</span><span class="p">;</span>
  <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">status_code</span> <span class="o">==</span> <span class="s2">"202"</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">//deny
</span>  <span class="k">echo</span> <span class="s2">"Transaction Denied. &lt;br /&gt;"</span><span class="p">;</span>
  <span class="k">echo</span> <span class="s2">"Transaction status for order id "</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">order_id</span><span class="o">.</span><span class="s2">": "</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">transaction_status</span><span class="p">;</span>

  <span class="k">echo</span> <span class="s2">"&lt;h3&gt;Transaction detail:&lt;/h3&gt;"</span><span class="p">;</span>
  <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">status_code</span> <span class="o">==</span> <span class="s2">"201"</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">//challenge
</span>  <span class="k">echo</span> <span class="s2">"Transaction Challenged. &lt;br /&gt;"</span><span class="p">;</span>
  <span class="k">echo</span> <span class="s2">"Transaction status for order id "</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">order_id</span><span class="o">.</span><span class="s2">": "</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">transaction_status</span><span class="p">;</span>

  <span class="k">echo</span> <span class="s2">"&lt;h3&gt;Transaction detail:&lt;/h3&gt;"</span><span class="p">;</span>
  <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
  <span class="c1">//error
</span>  <span class="k">echo</span> <span class="s2">"Error occurred on the sent transaction data.&lt;br /&gt;"</span><span class="p">;</span>
  <span class="k">echo</span> <span class="s2">"&lt;h3&gt;Result:&lt;/h3&gt;"</span><span class="p">;</span>
  <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre>
    <p><br /></p>

    <p>At this point, the payment process of a transaction is complete. If the <code>status_code</code> value is <code>200</code>, the customer’s credit card has been charged to your account. In addition to sending the transaction status to the customer, you can also use the code above to update the respective database. Example, to mark if the respective <code>order_id</code> has been paid.</p>

    <p>Transaction status can also be found in Merchant Administration Portal (MAP). You have to login to MAP to see the detail of the transaction. The other alternative to check on the transaction status is to use the command <a href="other_commands.html">VT-Direct — Acquiring Transaction Status</a>.</p>

  </div>
  <!-- end of step 3-->
</div>
<!-- end of tab-content-->



      			<div class="pagination">
      				<ul><li class="left">« Previous: <a href="../vtweb/going_live.html">VT-Web : Going Live</a></li><li class="right">Next: <a href="other_features.html">VT-Direct : Other Features</a> »</li></ul>
      			</div>
          </div>
        </div><!--/span-->
      </div><!--/row-->
    </div><!--/.container-->
    
    <footer>
  <div class="container">
    <div class="row footer-content">
      <div class="col-lg-3 col-md-3 col-sm-4 col-xs-6">
        <h4 class="text-gray">Veritrans</h4>
        <ul>
          <li>
            <a href="https://www.veritrans.co.id/">Home</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/payment_channels.html">Payment Channels</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/product_pricing.html">Product &amp; Pricing</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/promo.html">Promo</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/case_study.html">Case Study</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/aegis.html">Aegis</a>
          </li>
        </ul>
        <!-- <h4 class="text-gray">Shopping</h4>
        <ul>
          <li>
            <a href="event.html">Promo</a>
          </li>
          <li>
            <a href="directory.html">Directory</a>
          </li>
        </ul> -->
      </div>
      <div class="col-lg-2 col-md-3 col-sm-4 col-xs-6">
        <h4 class="text-gray">Devs</h4>
        <ul>
          <li>
            <a href="http://docs.veritrans.co.id">Documentations</a>
          </li>
          <li>
            <a href="#" data-toggle="modal" data-target="#underConstruction">Dev Notes</a>
          </li>
        </ul>
        <h4 class="text-gray about-footer">About</h4>
        <ul>
          <li>
            <a href="https://www.veritrans.co.id/about.html">Team</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/career.html">Career</a>
          </li>
        </ul>
      </div>
      <div class="col-lg-2 col-md-3 col-sm-4 col-xs-6">
        <h4 class="text-gray">Help</h4>
        <ul>
          <li>
            <a href="https://blog.veritrans.co.id">Blog</a>
          </li>
          <li>
            <a href="http://support.veritrans.co.id">FAQ</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/contact.html">Contact</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/privacy_policy.html">Privacy Policy</a>
          </li>
        </ul>
      </div>
      <div class="col-lg-2 col-md-3 col-sm-4 col-xs-6 find-us-footer">
        <h4 class="text-gray">Find Us</h4>
        <ul>
          <li>
            <a href="https://www.facebook.com/veritransID">Facebook</a>
          </li>
          <li>
            <a href="https://twitter.com/veritransid">Twitter</a>
          </li>
          <li>
            <a href="https://instagram.com/veritransid">Instagram</a>
          </li>
          <li>
            <a href="https://www.linkedin.com/company/pt-midtrans">LinkedIn</a>
          </li>
          <li>
            <a href="https://www.youtube.com/channel/UCtPNqTFgR1aXpEFA9B_djnw">YouTube</a>
          </li>
        </ul>
      </div>
      <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
        <h4 class="text-gray with-subtitle">
          Subscribe
        </h4>
        <small>
          tips &amp; berita terbaru seputar eCommerce
        </small>
        <div id="mc_embed_signup">
          <form action="//veritrans.us9.list-manage.com/subscribe/post?u=4ed5f88335112571098a4a51c&amp;id=12315939d2" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
            <div id="mc_embed_signup_scroll">
              <div class="mc-field-group">
                  <input type="email" value="" name="EMAIL" class="required email search-input" id="mce-EMAIL" placeholder="EMAIL" pattern="/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/" required/>
              </div>
              <div id="mce-responses" class="clear">
                  <div class="response" id="mce-error-response" style="display:none"></div>
                  <div class="response" id="mce-success-response" style="display:none"></div>
            </div>   
              <div style="position: absolute; left: -5000px;"><input type="text" name="b_4ed5f88335112571098a4a51c_12315939d2" tabindex="-1" value=""></div>
              <div class="clear"><input type="submit" value="submit" name="subscribe" id="mc-embedded-subscribe" class="btn btn-search"/></div>
              </div>
          </form>
        </div>
      </div>
    </div>
    <div class="copyright text-center">
      <br/>
      &copy; 2015 PT Midtrans
      <br/>
      <br/>
    </div>
  </div>
</footer>
<div class="modal fade" id="underConstruction" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title text-center" id="myModalLabel">Sorry!</h4>
      </div>
      <div class="modal-body text-center">
        We're still building this web page.<br/>
        Be the first to know when it's done by <a class="dotted" href="https://veritrans.us9.list-manage.com/subscribe/post?u=4ed5f88335112571098a4a51c&id=12315939d2">subscribing</a> to our newsletter.
      </div>
    </div>
  </div>
</div>
<script language="javascript" type="text/javascript">
  function popitup(url) {
    newwindow=window.open(url,'name','height=430,width=540');
    if (window.focus) {newwindow.focus()}
    return false;
  }
</script>


    <script src="../../javascripts/jquery-1.10.2.min.js" type="text/javascript"></script>
<script src="../../javascripts/bootstrap.min.js" type="text/javascript"></script>
<script src="../../javascripts/dropdown.js" type="text/javascript"></script>
<script src="../../javascripts/tab_custom.js" type="text/javascript"></script>
<script src="../../javascripts/useragent.js" type="text/javascript"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-32232768-12', 'auto');
      ga('send', 'pageview');
    </script>
    <script>
      $(document).ready(function() {
        $('[data-toggle=offcanvas]').click(function() {
          $('.row-offcanvas').toggleClass('active');
        });
        $(function () {
          $('[data-toggle="tooltip"]').tooltip();
        });
      });
    </script>
  </body>
</html><!-- Veritrans.3.0-20150423 -->
