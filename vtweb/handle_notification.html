<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Veritrans API Documentation. Payment Gateway Indonesia, transaksi online lebih aman, mudah, cepat! Veritrans memberi solusi sistem payment gateway terbaik untuk e-commerce di Indonesia.">
    <meta name="keywords" content="Veritrans, Veritrans Indonesia, payment gateway indonesia, Pembayaran Online Indonesia, online payment Indonesia, sistem transaksi online"> 
    <link href="../stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    <title>Docs - Veritrans Indonesia</title>
		<link rel="shortcut icon" href="/favicon.ico"/>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <!-- Fixed navbar -->
<div class="header navbar navbar-default navbar-fixed-top">
  <div class="custom-container">
    <div class="col-md-3 navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <h2 class="logo"><a href="https://www.veritrans.co.id/" title="Home"><span>Veritrans</span></a></h2>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="https://www.veritrans.co.id/whatwedo.html">what we do</a></li>
				<li><a href="https://www.veritrans.co.id/index.html#vt-products" title="Our Online Payment Products">products</a></li>
        <li><a href="https://www.veritrans.co.id/pricing.html">pricing</a></li>
        <li><a href="https://www.veritrans.co.id/about.html">about</a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">developer <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="https://www.veritrans.co.id/sandbox.html">sandbox</a></li>
            <li><a href="http://docs.veritrans.co.id/">documentation</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">more <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="http://docs.veritrans.co.id/faq/general.html" title="FAQ & How To">FAQ</a></li>
            <li><a href="http://blog.veritrans.co.id" title="Blog, News and Press Release">blog</a></li>
            <li><a href="https://www.veritrans.co.id/career.html" title="Career at Veritrans">career</a></li>
            <li><a href="https://www.veritrans.co.id/contact.html" title="Contact Us">contact</a></li>
          </ul>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right register-login">
        <li class="pull-left"><a href="https://my.veritrans.co.id/register" class="register">register</a></li>
        <li class="pull-left"><a href="https://my.veritrans.co.id/login">login</a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>

    <div class="custom-container">
      <div class="row row-offcanvas row-offcanvas-right">
        <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
	<div class="documentation-sidebar">
		<div class="docs-logo">
			<span>DOCS</span>
		</div>
		<div class="language-toggle"> English / <a href="../id/vtweb/handle_notification.html">Bahasa Indonesia</a></div>
		<ul class="sidebar">
			<li><a class="parent">Payment API</a>
				<ul class="child-menu">
					
					<li class=""><a href="../payment_api/introduction.html">Introduction</a></li>
					
					<li class=""><a href="../payment_api/payment_type.html">Payment Methods</a></li>
					
					<li class=""><a href="../payment_api/payment_method.html">Payment Type</a></li>
					
				</ul>
			</li>
			<li><a class="parent">VT-Web</a>
				<ul class="child-menu">
					
					<li class=""><a href="introduction.html">Introduction</a></li>
					
					<li class=""><a href="getting_started.html">Getting Started</a></li>
					
					<li class=""><a href="get_redirect_url.html">Obtaining Redirect URL</a></li>
					
					<li class=""><a href="redirect.html">Redirect</a></li>
					
					<li class="active"><a href="handle_notification.html">Handling Notification</a></li>
					
					<li class=""><a href="sample_code.html">Sample Code</a></li>
					
					<li class=""><a href="status_code.html">Status Code</a></li>
					
				</ul>
			</li>
			<li><a class="parent">VT-Direct</a>
				<ul class="child-menu">
					
					<li class=""><a href="../vtdirect/introduction.html">Introduction</a></li>
					
					<li class=""><a href="../vtdirect/getting_started.html">Getting Started</a></li>
					
					<li class=""><a href="../vtdirect/integration.html">Integration</a></li>
					
					<li class=""><a href="../vtdirect/going_live.html">Going Live</a></li>
					
					<li class=""><a href="../vtdirect/other_commands.html">Other Commands</a></li>
					
					<li class=""><a href="../vtdirect/other_features.html">Other Features</a></li>
					
					<li class=""><a href="../vtdirect/payment_options.html">Payment Options</a></li>
					
					<li class=""><a href="../vtdirect/examples.html">Examples</a></li>
					
					<li class=""><a href="../vtdirect/status_code.html">Status Code</a></li>
					
				</ul>
			</li>
			<li><a class="parent">Sandbox</a>
				<ul class="child-menu">
					
					<li class=""><a href="../sandbox/difference.html">Sandbox and Production Differences</a></li>
					
					<li class=""><a href="../sandbox/testing_vtweb.html">Testing VTWeb on Sandbox</a></li>
					
					<li class=""><a href="../sandbox/card_list.html">Credit Card for Testing</a></li>
					
				</ul>
			</li>
			<li><a class="parent">How to</a>
				<ul class="child-menu">
					
					<li class=""><a href="../howto/fds.html">Fraud Detection System</a></li>
					
					<li class=""><a href="../howto/cancel.html">Cancel Transaction</a></li>
					
				</ul>
			</li>
			<li><a class="parent">FAQ</a>
				<ul class="child-menu">
					
					<li class=""><a href="../faq/general.html">General Information</a></li>
					
					<li class=""><a href="../faq/pricing.html">Pricing</a></li>
					
					<li class=""><a href="../faq/fraud_and_security.html">Fraud dan Security</a></li>
					
					<li class=""><a href="../faq/integration.html">Integrasi</a></li>
					
					<li class=""><a href="../faq/account_management.html">Manajemen Akun</a></li>
					
					<li class=""><a href="../faq/fds_response.html">Fraud Detection System (FDS) Response</a></li>
					
				</ul>
			</li>
		</ul>
	</div>
</div><!--/span-->
        <div class="col-xs-12 col-sm-9" id="bodier">
          <p class="pull-right visible-xs">
            <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Menu</button>
          </p>
          <div class="vtweb-handle-notification">
            <h2>Handling Notification</h2>

<p>Veritrans will send HTTP(S) POST notification to merchant’s server after customer completed the payment process. Notification will be send no matter what the outcome of the payment process, succeed or failed.</p>

<p>URL address for HTTP(S) POST notification can be configured in MAP under <em>Settings → Configuration → Payment Notification URL</em> field. Merchant can use the notification to update payment status of a transaction in real time because Veritrans sends the notification right after customer completed the payment process.</p>

<p><img title="config payment" class="img-responsive" src="../images/vtweb-config-payment.png" /></p>

<p>Sample notification content in JSON format:</p>
<h3>Success Response</h3>

<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="err">transaction_id</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;93c6a0ff-b270-4b00-adba-f1738ff90261&quot;</span><span class="p">,</span><span class="w">
    </span><span class="err">order_id</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;201303131610&quot;</span><span class="p">,</span><span class="w">
    </span><span class="err">gross_amount</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;100000000.00&quot;</span><span class="p">,</span><span class="w">
    </span><span class="err">payment_type</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;credit_card&quot;</span><span class="p">,</span><span class="w">
    </span><span class="err">transaction_time</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2014-03-13 16:10:15&quot;</span><span class="p">,</span><span class="w">
    </span><span class="err">transaction_status</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;capture&quot;</span><span class="p">,</span><span class="w">
    </span><span class="err">fraud_status</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;accept&quot;</span><span class="p">,</span><span class="w">
    </span><span class="err">masked_card</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;401111-1112&quot;</span><span class="p">,</span><span class="w">
    </span><span class="err">status_code</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;200&quot;</span><span class="p">,</span><span class="w">
    </span><span class="err">status_message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OK, Credit Card transaction is successful&quot;</span><span class="p">,</span><span class="w">
    </span><span class="err">notification_key</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1a794e3f-f023-4cda-92b7-dcb7a22a46ff&quot;</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<h3>Deny Response</h3>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="err">transaction_id</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ee946272-44b9-4e19-8ae7-ffd12c2cbb18&quot;</span><span class="p">,</span><span class="w">
    </span><span class="err">order_id</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;201303131612&quot;</span><span class="p">,</span><span class="w">
    </span><span class="err">gross_amount</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;100000000.00&quot;</span><span class="p">,</span><span class="w">
    </span><span class="err">payment_type</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;credit_card&quot;</span><span class="p">,</span><span class="w">
    </span><span class="err">transaction_time</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2014-03-13 16:12:35&quot;</span><span class="p">,</span><span class="w">
    </span><span class="err">transaction_status</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;deny&quot;</span><span class="p">,</span><span class="w">
    </span><span class="err">fraud_status</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;challenge&quot;</span><span class="p">,</span><span class="w">
    </span><span class="err">masked_card</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;431111-1119&quot;</span><span class="p">,</span><span class="w">
    </span><span class="err">status_code</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;202&quot;</span><span class="p">,</span><span class="w">
    </span><span class="err">status_message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Deny by Bank [MANDIRI] with code [05] and    message [Do not honour]&quot;</span><span class="p">,</span><span class="w">
    </span><span class="err">notification_key</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1a794e3f-f023-4cda-92b7-dcb7a22a46ff&quot;</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>PHP Sample on accepting HTTP(POST) notification:</p>

<pre class="highlight php"><span class="cp">&lt;?php</span>
<span class="c1">// TODO: change with your actual server_key that can be found on Merchant Administration Portal (MAP)
</span><span class="nv">$server_key</span> <span class="o">=</span> <span class="s2">&quot;1a794e3f-f023-4cda-92b7-dcb7a22a46ff&quot;</span><span class="p">;</span>

<span class="c1">//Contoh untuk menangani HTTP (POST) notifikasi yang dikirim Veritrans
</span><span class="nv">$json_result</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span><span class="s1">'php://input'</span><span class="p">);</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$json_result</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="nb">error_log</span><span class="p">(</span><span class="s2">&quot;Menerima notifikasi dari Veritrans: &quot;</span><span class="p">);</span>
<span class="nb">error_log</span><span class="p">(</span><span class="nv">$json_result</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">notification_key</span> <span class="o">==</span> <span class="nx">server_key</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span><span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">status_code</span> <span class="o">==</span> <span class="s2">&quot;200&quot;</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="c1">//OK, trancaction is success
</span>		<span class="nb">error_log</span><span class="p">(</span><span class="s2">&quot;Status transaksi untuk order id &quot;</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">order_id</span><span class="o">.</span><span class="s2">&quot;: &quot;</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">status_code</span><span class="p">);</span>

		<span class="c1">//TODO: Update merchant's database (Ex: update status order).
</span>	<span class="p">}</span>
	<span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">status_code</span> <span class="o">==</span> <span class="s2">&quot;201&quot;</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="c1">//Pending, transaction is success but the processing has not been completed.
</span>		<span class="nb">error_log</span><span class="p">(</span><span class="s2">&quot;Status transaksi untuk order id &quot;</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">order_id</span><span class="o">.</span><span class="s2">&quot;: &quot;</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">status_code</span><span class="p">);</span>

		<span class="c1">//TODO: Update merchant's database (Ex: update status order).
</span>	<span class="p">}</span>
	<span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">status_code</span> <span class="o">==</span> <span class="s2">&quot;202&quot;</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="c1">//Denied, request is success but transaction is denied by bank or Veritrans fraud detection system.
</span>		<span class="nb">error_log</span><span class="p">(</span><span class="s2">&quot;Status transaksi untuk order id &quot;</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">order_id</span><span class="o">.</span><span class="s2">&quot;: &quot;</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">status_code</span><span class="p">);</span>

		<span class="c1">//TODO: Update merchant's database (Ex: update status order).
</span>	<span class="p">}</span>
	<span class="k">else</span>
	<span class="p">{</span>
		<span class="c1">//error. You can see all the possibilities of the status_code and the explanation on the Veritrans Payment API Documentation
</span>		<span class="nb">error_log</span><span class="p">(</span><span class="s2">&quot;Terjadi kesalahan. Status code: &quot;</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">status_code</span><span class="p">);</span>
	<span class="p">}</span>	
<span class="p">}</span>
<span class="cp">?&gt;</span>

</pre>
<p>
	In this step, payment process has been completed. When HTTP(S) POST notification contains success response (<code>transaction_status = ’capture’</code>), it means that customer’s credit card has been charged to merchant’s account. Merchant can perform database update, for example to mark that the transaction with <code>order_id</code> has been paid. Merchant can login to MAP to see the transaction details.
</p>

<p><img title="payment info" class="img-responsive" src="../images/payment-info.png" />  </p>

<h5 id="transaction-details-in-map">Transaction details in MAP</h5>



			<div class="pagination">
				<ul><li class="left">« Previous: <a href="redirect.html">VT-Web: Redirect</a></li><li class="right">Next: <a href="sample_code.html">VT-Web: Sample Code</a> »</li></ul>
			</div>
          </div>
        </div><!--/span-->
      </div><!--/row-->

    </div><!--/.container-->
    <div class="custom-container footer">
  <div class="wrapper">
    <div class="row">
      <div class="col-md-12 footer-nav">
        <div class="content text-center">
          <a href="https://www.veritrans.co.id" title="">Home</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/whatwedo.html" title="">What We Do</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/pricing.html" title="">Pricing</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/about.html" title="">About</a> <span class="divider">|</span>
          <a href="http://blog.veritrans.co.id/" title="">Blog</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/career.html" title="">Career</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/contact.html" title="">Contact</a> <span class="divider">|</span>
          <a href="http://docs.veritrans.co.id/" title="">Docs</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/press.html" title="">Press</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/privacy.html" title="">Privacy Policy</a>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 copyright">
        <div class="content text-center">
          <span>©2014 PT. Midtrans (Veritrans Indonesia). All Rights Reserved</span>
        </div>
      </div>
    </div>
  </div>
</div>

    <script src="../javascripts/jquery-1.10.2.min.js" type="text/javascript"></script>
<script src="../javascripts/bootstrap.min.js" type="text/javascript"></script>
    <script>
    $(document).ready(function() {
      $('[data-toggle=offcanvas]').click(function() {
        $('.row-offcanvas').toggleClass('active');
      });
    });
    </script>
  </body>
</html>
