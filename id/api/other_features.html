<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Veritrans API Documentation. Payment Gateway Indonesia, transaksi online lebih aman, mudah, cepat! Veritrans memberi solusi sistem payment gateway terbaik untuk e-commerce di Indonesia.">
    <meta name="keywords" content="Veritrans, Veritrans Indonesia, payment gateway indonesia, Pembayaran Online Indonesia, online payment Indonesia, sistem transaksi online"> 
    <link href="../../stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
<link href="../../stylesheets/new.css" media="screen" rel="stylesheet" type="text/css" />
    <link href='https://fonts.googleapis.com/css?family=Lato:100,300,400,700' rel='stylesheet' type='text/css'>
    <title>Docs - Veritrans Indonesia</title>
		<link rel="shortcut icon" href="/favicon.ico"/>

    <!-- Start Alexa Certify Javascript -->
    <script type="text/javascript">
    _atrk_opts = { atrk_acct:"0VtQk1a4SBe05T", domain:"veritrans.co.id",dynamic: true};
    (function() { var as = document.createElement('script'); as.type = 'text/javascript'; as.async = true; as.src = "https://d31qbv1cthcecs.cloudfront.net/atrk.js"; var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(as, s); })();
    </script>
    <noscript><img src="https://d5nxst8fruw4z.cloudfront.net/atrk.gif?account=0VtQk1a4SBe05T" style="display:none" height="1" width="1" alt="" /></noscript>
    <!-- End Alexa Certify Javascript -->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <nav class="navbar navbar-fixed-top with-shadow">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand logo" href="https://www.veritrans.co.id/"></a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav">
        <li><a class="uppercase" href="https://www.veritrans.co.id/payment_channels.html">Payments</a></li>
        <li><a class="uppercase" href="https://www.veritrans.co.id/https://www.veritrans.co.id/pricing.html">Product</a></li>

        <li><a class="uppercase" href="https://www.veritrans.co.id/event.html">Promo</a></li>
        <!-- <li>
          <a class="uppercase" href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Shopping <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a class="uppercase" href="event.html">Event &amp; Promo</a></li>
            <li><a class="uppercase" href="directory.html">Directory</a></li>
          </ul>
        </li> -->
      </ul>

      <ul class="nav navbar-nav navbar-right">
        <li>
          <a href="http://docs.veritrans.co.id">Docs</a>
        </li>
        <li>
          <a href="https://www.veritrans.co.id/contact.html">Contact</a>
        </li>
        <li>
          <a href="https://blog.veritrans.co.id">Blog</a>
        </li>
        <li>
          <a id="logInHeader" class="uppercase text-bold" href="#" data-toggle="modal" data-target="#login-modal">
            Log In
          </a>
        </li>
        <li>
          <a id="signUpHeader" href="https://my.sandbox.veritrans.co.id/register" class="btn btn-yellow uppercase">
             Sign Up
          </a>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>
<div class="nav-overlay visible-sm visible-xs"></div>

<!-- LOGIN MODAL -->
<div id="login-modal" class="modal fade">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-body">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <div class="row">
          <div class="col-sm-6 col-xs-12">
            <div class="production-box">
              <!-- <img src="images/banner-about.png"> -->
              <h5>PRODUCTION</h5>
              <p class="text-left">Jika Anda sudah terintegrasi dengan Veritrans. Log In untuk masuk ke Merchant Administration Portal Anda.</p>
              <a class="btn btn-trans-blue btn-med" href="https://my.veritrans.co.id">LOG IN<span class="arr-out">→</span></a>
            </div>
          </div>
          <div class="col-sm-6 col-xs-12">
            <div class="sandbox-box">
              <!-- <img src="images/banner-sandbox.png"> -->
              <h5>SANDBOX</h5>
              <p>Environment testing Veritrans untuk keperluan development dan uji coba Merchant Administration Portal. <a href="https://my.sandbox.veritrans.co.id" class="text-blue">Log In<span class="arr-out">→</span></a></p>
            </div>
          </div>
        </div>
        <br/><br/>
        <div class="row">
          <div class="col-xs-12 text-left">
            <div class="register-box">
              Belum terdaftar? <a href="https://my.sandbox.veritrans.co.id/register" class="text-blue signup-modal">Sign Up<span class="arr-out">→</span></a>
            </div>
          </div>
        </div>  
      </div>
    </div>
  </div>
</div>

    <div class="container">
      <div class="row row-offcanvas row-offcanvas-right">
        <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
	<div class="documentation-sidebar">
		<div class="docs-logo">
			<span>DOCS</span>
		</div>
		<div class="language-toggle"> <a href="../../api/other_features.html">English</a> / Bahasa Indonesia</div>
		<ul class="sidebar">
			
			<li>
        
          <a class="parent" href="../welcome/welcome.html">Selamat Datang</a>
        
			</li>
			
			<li>
        
          <a class="parent">VT-Web</a>
          <b class="caret"></b>
          <ul class="child-menu">
            
            <li class=""><a href="../vtweb/introduction.html">Perkenalan</a></li>
            
            <li class=""><a href="../vtweb/getting_started.html">Langkah Awal</a></li>
            
            <li class=""><a href="../vtweb/integration.html">Integrasi</a></li>
            
            <li class=""><a href="../vtweb/other_features.html">Fitur Tambahan</a></li>
            
            <li class=""><a href="../vtweb/going_live.html">Going Live</a></li>
            
          </ul>
        
			</li>
			
			<li>
        
          <a class="parent">VT-Direct</a>
          <b class="caret"></b>
          <ul class="child-menu">
            
            <li class=""><a href="../vtdirect/introduction.html">Perkenalan</a></li>
            
            <li class=""><a href="../vtdirect/getting_started.html">Langkah Awal</a></li>
            
            <li class=""><a href="../vtdirect/integration.html">Integrasi</a></li>
            
            <li class=""><a href="../vtdirect/other_features.html">Fitur Tambahan</a></li>
            
            <li class=""><a href="../vtdirect/other_commands.html">Perintah Lain</a></li>
            
            <li class=""><a href="../vtdirect/going_live.html">Going Live</a></li>
            
          </ul>
        
			</li>
			
			<li>
        
          <a class="parent">Referensi API</a>
          <b class="caret"></b>
          <ul class="child-menu">
            
            <li class=""><a href="../sandbox/introduction.html">Perkenalan</a></li>
            
            <li class=""><a href="../sandbox/charge.html">Charge Transaksi</a></li>
            
            <li class=""><a href="../sandbox/installment.html">Cicilan</a></li>
            
            <li class=""><a href="../sandbox/bin.html">BIN Promo</a></li>
            
            <li class=""><a href="../sandbox/other_features.html">Fitur Tambahan</a></li>
            
            <li class=""><a href="../sandbox/other_commands.html">Perintah Lain</a></li>
            
            <li class=""><a href="../sandbox/card_list.html">Daftar Kartu Uji Coba</a></li>
            
            <li class=""><a href="../sandbox/status_code.html">Status Kode</a></li>
            
          </ul>
        
			</li>
			
			<li>
        
          <a class="parent" href="../plugin/plugin.html">Plugin & Mobile Apps</a>
        
			</li>
			
			<li>
        
          <a class="parent" href="http://support.veritrans.co.id">FAQ</a>
        
			</li>
			
		</ul>
		<p class="question">
            Anda merasa ada yang kurang dari dokumentasi ini?<br>
            <a href="https://github.com/veritrans/veritrans.github.io">Buka issue atau ikut berkontribusi di Github</a>
        </p>
	</div>
</div><!--/span-->
        <div class="col-xs-12 col-sm-9 col-md-9" id="bodier">
          <p class="pull-right visible-xs">
            <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Menu</button>
          </p>
          <div class="id-api-other-features">
            <h2 id="fitur-tambahan">Fitur Tambahan</h2>

<p>Saat ini VT-Direct memiliki fitur tambahan untuk metode pembayaran dengan kartu kredit, yaitu:</p>

<ol>
  <li>Pre-Authorization &amp; Capture</li>
  <li>One Click</li>
  <li>Two Clicks</li>
</ol>

<p>Berikut adalah tutorial untuk melakukan integrasi menggunakan fitur - fitur sesuai dengan kebutuhan anda.
<br /><br /></p>

<!-- Nav tabs -->
<ul class="nav nav-tabs">
  <li class="active"><a href="#pre-authorization" data-toggle="tab">Pre-Authorization &amp; Capture</a></li>
  <li><a href="#one-click" data-toggle="tab">One Click</a></li>
  <li><a href="#two-click" data-toggle="tab">Two Clicks</a></li>
</ul>
<div class="tab-content">
  <div class="tab-pane active" id="pre-authorization">
    <!-- step 1-->
    <p><br /></p>

    <h2 id="pre-authorization--capture">Pre-Authorization &amp; Capture</h2>

    <p>Pre-authorization berfungsi untuk mengecek apakah suatu kartu kredit mampu melakukan transaksi dengan nilai tertentu, transaksi baru benar-benar terjadi saat capture dilakukan. Jenis charge transaksi ini hanya dapat dilakukan pada VT-Direct menggunakan <strong>kartu kredit</strong>. Keterangan lebih lengkap dapat dilihat di <a href="../vtdirect/other_features.html#pre-authorization">VT-Direct – Pre-authorization &amp; Capture</a>.</p>

    <h3 id="pre-authorization">Pre-authorization</h3>

    <p>Pada VT-Direct, anda harus memperoleh <a href="../vtdirect/other_features.html#pre-authorization">token ID authorization</a> terlebih dahulu. Perlu diperhatikan bahwa parameter request token untuk pre-authorization berbeda dengan <a href="../vtdirect/integration_cc.html#step1">token transaksi normal</a>. Anda harus menambahkan atribut <code>type</code> pada parameter request token.</p>

    <p>Setelah token pre-authorization diperoleh, tambahkan atribut <code>type</code> dalam <code>credit_card</code> saat charge. Spesifikasi fungsi pre-authorization sama dengan <a href="charge.html#specification">charge transaksi kartu kredit</a>.
<br /><br /></p>

<pre><code class="highlight json"><span class="p">{</span>
    <span class="c1">// Required</span>
    <span class="s2">"payment_type"</span><span class="p">:</span> <span class="s2">"credit_card"</span><span class="p">,</span>
    <span class="c1">// Required</span>
    <span class="s2">"credit_card"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"bank"</span><span class="p">:</span> <span class="s2">"bni"</span><span class="p">,</span>
        <span class="s2">"token_id"</span><span class="p">:</span> <span class="s2">"&lt; your token ID &gt;"</span><span class="p">,</span>
        <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"authorize"</span>
    <span class="p">},</span>
    <span class="c1">// Required</span>
    <span class="s2">"transaction_details"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"order_id"</span><span class="p">:</span> <span class="s2">"A27550"</span><span class="p">,</span>
        <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="mi">145000</span>
    <span class="p">},</span>
    <span class="c1">// Required</span>
    <span class="s2">"customer_details"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Andri"</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Litani"</span><span class="p">,</span> <span class="c1">// Optional</span>
        <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"andri@litani.com"</span><span class="p">,</span>
        <span class="s2">"phone"</span><span class="p">:</span> <span class="s2">"081122334455"</span><span class="p">,</span>
    <span class="c1">// Optional</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Andri"</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Litani"</span><span class="p">,</span>
        <span class="s2">"address"</span><span class="p">:</span> <span class="s2">"Mangga 20"</span><span class="p">,</span>
        <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Jakarta"</span><span class="p">,</span>
        <span class="s2">"postal_code"</span><span class="p">:</span> <span class="s2">"16602"</span><span class="p">,</span>
        <span class="s2">"phone"</span><span class="p">:</span> <span class="s2">"081122334455"</span><span class="p">,</span>
        <span class="s2">"country_code"</span><span class="p">:</span> <span class="s2">"IDN"</span>
    <span class="p">},</span>
    <span class="c1">// Optional</span>
    <span class="s2">"shipping_address"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Obet"</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Supriadi"</span><span class="p">,</span>
        <span class="s2">"address"</span><span class="p">:</span> <span class="s2">"Manggis 90"</span><span class="p">,</span>
        <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Jakarta"</span><span class="p">,</span>
        <span class="s2">"postal_code"</span><span class="p">:</span> <span class="s2">"16601"</span><span class="p">,</span>
        <span class="s2">"phone"</span><span class="p">:</span> <span class="s2">"08113366345"</span><span class="p">,</span>
        <span class="s2">"country_code"</span><span class="p">:</span> <span class="s2">"IDN"</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="c1">// Optional</span>
    <span class="s2">"item_details"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"a1"</span><span class="p">,</span>
            <span class="s2">"price"</span><span class="p">:</span> <span class="mi">50000</span><span class="p">,</span>
            <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Apel"</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"a2"</span><span class="p">,</span>
            <span class="s2">"price"</span><span class="p">:</span> <span class="mi">45000</span><span class="p">,</span>
            <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Jeruk"</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre>

    <p><br />
Struktur JSON response pre-authorization sama dengan <a href="charge.html#vtdirect-cc">charge transaksi kartu kredit</a>. Ketika proses berhasil, <code>transaction_status</code> akan bernilai <code>authorize</code>. Perlu diperhatikan bahwa transaksi <strong>belum</strong> terjadi. Transaksi baru terjadi saat fungsi capture dilakukan. Contoh JSON response pre-authorization sukses: 
<br /><br /></p>

<pre><code class="highlight json"><span class="p">{</span>
    <span class="s2">"status_code"</span><span class="p">:</span> <span class="s2">"200"</span><span class="p">,</span>
    <span class="s2">"status_message"</span><span class="p">:</span> <span class="s2">"Success, Credit Card 3D Secure transaction is successful"</span><span class="p">,</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"ac1a089d-a587-40f1-a936-a7770667d6dd"</span><span class="p">,</span>
    <span class="s2">"order_id"</span><span class="p">:</span> <span class="s2">"A27550"</span><span class="p">,</span>
    <span class="s2">"payment_type"</span><span class="p">:</span> <span class="s2">"credit_card"</span><span class="p">,</span>
    <span class="s2">"transaction_time"</span><span class="p">:</span> <span class="s2">"2014-08-25 10:20:54"</span><span class="p">,</span>
    <span class="s2">"transaction_status"</span><span class="p">:</span> <span class="s2">"authorize"</span><span class="p">,</span>
    <span class="s2">"fraud_status"</span><span class="p">:</span> <span class="s2">"accept"</span><span class="p">,</span>
    <span class="s2">"masked_card"</span><span class="p">:</span> <span class="s2">"481111-1114"</span><span class="p">,</span>
    <span class="s2">"bank"</span><span class="p">:</span> <span class="s2">"bni"</span><span class="p">,</span>
    <span class="s2">"approval_code"</span><span class="p">:</span> <span class="s2">"1408936854718"</span><span class="p">,</span>
    <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="s2">"145000.00"</span>
<span class="p">}</span>
</code></pre>

    <p><br /></p>

    <h3 id="capture">Capture</h3>

    <p>Setelah pre-authorization berhasil, charge transaksi dapat dilakukan dengan fungsi capture. Anda perlu mencatat <code>transaction_id</code> pre-authorization dan menggunakannya sebagai salah satu atribut JSON request capture. 
<br /><br /></p>

    <h4 id="spesifikasi">Spesifikasi</h4>

    <table>
      <thead>
        <tr>
          <th>Deskripsi</th>
          <th>Charge transaksi yang telah lolos pre-authorization</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Endpoint</td>
          <td><a href="introduction.html#url-endpoint">BASE_URL</a>/capture</td>
        </tr>
        <tr>
          <td>HTTP Method</td>
          <td>POST</td>
        </tr>
        <tr>
          <td>HTTP Header</td>
          <td>Accept: application/json <br />Content-Type: application/json <br />Authentication: Basic Base64(server_key:)</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <h4 id="json-request">JSON Request</h4>

    <p>Keterangan objek <code>JSON request</code> capture transaksi:</p>

    <table>
      <thead>
        <tr>
          <th>Atribut JSON</th>
          <th>Tipe Data</th>
          <th>Required</th>
          <th>Keterangan</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>transaction_id</td>
          <td>String</td>
          <td>Ya</td>
          <td>ID transaksi yang telah lolos pre-authorization</td>
        </tr>
        <tr>
          <td>gross_amount</td>
          <td>Long</td>
          <td>Ya</td>
          <td>Nilai transaksi yang akan dibayar oleh pelanggan.<br /><strong>Note</strong>: Tidak boleh melebihi nilai transaksi saat pre-authorization</td>
        </tr>
      </tbody>
    </table>

    <p><br />
Contoh JSON request capture:</p>

<pre><code class="highlight json"><span class="p">{</span>
    <span class="s2">"transaction_id"</span> <span class="p">:</span> <span class="s2">"1ac1a089d-a587-40f1-a936-a7770667d6dd"</span><span class="p">,</span>
    <span class="s2">"gross_amount"</span> <span class="p">:</span> <span class="mi">55000</span>
<span class="p">}</span>
</code></pre>

    <p>Perlu diperhatikan bahwa nilai transaksi pada contoh di atas lebih kecil dari nilai transaksi saat pre-authorization.</p>

    <p><br /></p>

    <h4 id="json-response">JSON Response</h4>

    <p>Keterangan JSON Response sama dengan <a href="charge.html#vtdirect-cc">charge transaksi normal</a>. Contoh JSON response capture sukses:
<br /><br /></p>

<pre><code class="highlight json"><span class="p">{</span>
    <span class="s2">"status_code"</span><span class="p">:</span> <span class="s2">"200"</span><span class="p">,</span>
    <span class="s2">"status_message"</span><span class="p">:</span> <span class="s2">"Success, Credit Card capture transaction is successful"</span><span class="p">,</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"1ac1a089d-a587-40f1-a936-a7770667d6dd"</span><span class="p">,</span>
    <span class="s2">"order_id"</span><span class="p">:</span> <span class="s2">"A27550"</span><span class="p">,</span>
    <span class="s2">"payment_type"</span><span class="p">:</span> <span class="s2">"credit_card"</span><span class="p">,</span>
    <span class="s2">"transaction_time"</span><span class="p">:</span> <span class="s2">"2014-08-25 10:20:54"</span><span class="p">,</span>
    <span class="s2">"transaction_status"</span><span class="p">:</span> <span class="s2">"capture"</span><span class="p">,</span>
    <span class="s2">"fraud_status"</span><span class="p">:</span> <span class="s2">"accept"</span><span class="p">,</span>
    <span class="s2">"masked_card"</span><span class="p">:</span> <span class="s2">"481111-1114"</span><span class="p">,</span>
    <span class="s2">"bank"</span><span class="p">:</span> <span class="s2">"bni"</span><span class="p">,</span>
    <span class="s2">"approval_code"</span><span class="p">:</span> <span class="s2">"1408937217061"</span><span class="p">,</span>
    <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="s2">"55000.00"</span>
<span class="p">}</span>
</code></pre>

  </div>
  <div class="tab-pane" id="one-click">
    <!-- step 2-->
    <p><br /></p>

    <h2 id="one-click">One Click</h2>

    <p>Fitur one click hanya dapat dilakukan pada transaksi <strong>VT-Direct kartu kredit 3D Secure</strong>. Fitur ini memungkinkan anda untuk menggunakan satu token pada beberapa transaksi. Token mewakili informasi nomor, expiry date dan CVV kartu kredit, serta autentikasi 3D Secure pelanggan anda. Hal ini akan mempermudah pelanggan anda dalam melakukan transaksi karena informasi kartu kredit hanya perlu diisi satu kali saja.</p>

    <p>Secara umum, ada dua tahapan dalam menggunakan fitur one click:</p>

    <ol>
      <li>Transaksi Pertama
        <ul>
          <li>Pelanggan anda memasukkan nomor, CVV, expiry date kartu kredit dan autentikasi 3D Secure</li>
          <li>Anda menerima token</li>
          <li>Anda menggunakan token untuk charge transaksi</li>
          <li>Jika transaksi berhasil, Anda menyimpan token pelanggan di database. Kita namakan token ini sebagai <code>saved_token</code></li>
        </ul>
      </li>
      <li>Transaksi Selanjutnya
        <ul>
          <li>Anda mengambil <code>saved_token</code> pelanggan tersebut dari database</li>
          <li>Anda menggunakan <code>saved_token</code> baru untuk charge transaksi</li>
        </ul>
      </li>
    </ol>

    <p><br /></p>

    <h3 id="first-charge">Charge Transaksi Pertama</h3>

    <p>Spesifikasi fungsi charge transaksi one click sama dengan <a href="charge.html#specification">charge transaksi kartu kredit</a>. Anda cukup menambahkan atribut <code>save_token_id</code> pada <code>credit_card</code> JSON request.
<br /><br /></p>

<pre><code class="highlight json"><span class="p">{</span>
    <span class="c1">// Required</span>
    <span class="s2">"payment_type"</span><span class="p">:</span> <span class="s2">"credit_card"</span><span class="p">,</span>
    <span class="s2">"credit_card"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"token_id"</span><span class="p">:</span> <span class="s2">"481111ac7c1182-7d25-4fd1-b31b-884e572950ce"</span><span class="p">,</span>
        <span class="s2">"bank"</span><span class="p">:</span> <span class="s2">"bni"</span><span class="p">,</span>
        <span class="s2">"save_token_id"</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="c1">// Required</span>
    <span class="s2">"transaction_details"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"order_id"</span><span class="p">:</span> <span class="s2">"A47550"</span><span class="p">,</span>
        <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="mi">145000</span>
    <span class="p">},</span>
    <span class="c1">// Required</span>
    <span class="s2">"customer_details"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Andri"</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Litani"</span><span class="p">,</span> <span class="c1">// optional</span>
        <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"andri@litani.com"</span><span class="p">,</span>
        <span class="s2">"phone"</span><span class="p">:</span> <span class="s2">"081122334455"</span><span class="p">,</span>
    <span class="c1">// Optional</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Andri"</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Litani"</span><span class="p">,</span>
        <span class="s2">"address"</span><span class="p">:</span> <span class="s2">"Mangga 20"</span><span class="p">,</span>
        <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Jakarta"</span><span class="p">,</span>
        <span class="s2">"postal_code"</span><span class="p">:</span> <span class="s2">"16602"</span><span class="p">,</span>
        <span class="s2">"phone"</span><span class="p">:</span> <span class="s2">"081122334455"</span><span class="p">,</span>
        <span class="s2">"country_code"</span><span class="p">:</span> <span class="s2">"IDN"</span>
        <span class="p">},</span>
    <span class="c1">// Optional</span>
    <span class="s2">"shipping_address"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Obet"</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Supriadi"</span><span class="p">,</span>
        <span class="s2">"address"</span><span class="p">:</span> <span class="s2">"Manggis 90"</span><span class="p">,</span>
        <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Jakarta"</span><span class="p">,</span>
        <span class="s2">"postal_code"</span><span class="p">:</span> <span class="s2">"16601"</span><span class="p">,</span>
        <span class="s2">"phone"</span><span class="p">:</span> <span class="s2">"08113366345"</span><span class="p">,</span>
        <span class="s2">"country_code"</span><span class="p">:</span> <span class="s2">"IDN"</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="c1">// Optional</span>
    <span class="s2">"item_details"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"a1"</span><span class="p">,</span>
            <span class="s2">"price"</span><span class="p">:</span> <span class="mi">50000</span><span class="p">,</span>
            <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Apel"</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"a2"</span><span class="p">,</span>
            <span class="s2">"price"</span><span class="p">:</span> <span class="mi">45000</span><span class="p">,</span>
            <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Jeruk"</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre>

    <p><br />
Response yang akan dikembalikan jika transaksi sukses:
<br /><br /></p>

<pre><code class="highlight json"><span class="p">{</span>
    <span class="s2">"status_code"</span><span class="p">:</span> <span class="s2">"200"</span><span class="p">,</span>
    <span class="s2">"status_message"</span><span class="p">:</span> <span class="s2">"Success, Credit Card 3D Secure transaction is successful"</span><span class="p">,</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"e9e88253-adc2-4c7a-914f-8278ddbaa387"</span><span class="p">,</span>
    <span class="s2">"order_id"</span><span class="p">:</span> <span class="s2">"A47550"</span><span class="p">,</span>
    <span class="s2">"payment_type"</span><span class="p">:</span> <span class="s2">"credit_card"</span><span class="p">,</span>
    <span class="s2">"transaction_time"</span><span class="p">:</span> <span class="s2">"2014-08-25 10:57:06"</span><span class="p">,</span>
    <span class="s2">"transaction_status"</span><span class="p">:</span> <span class="s2">"capture"</span><span class="p">,</span>
    <span class="s2">"fraud_status"</span><span class="p">:</span> <span class="s2">"accept"</span><span class="p">,</span>
    <span class="s2">"masked_card"</span><span class="p">:</span> <span class="s2">"481111-1114"</span><span class="p">,</span>
    <span class="s2">"saved_token_id"</span><span class="p">:</span> <span class="s2">"481111ac7c1182-7d25-4fd1-b31b-884e572950ce"</span><span class="p">,</span>
    <span class="s2">"saved_token_id_expired_at"</span><span class="p">:</span> <span class="s2">"2024-08-25 10:57:06"</span><span class="p">,</span>
    <span class="s2">"approval_code"</span><span class="p">:</span> <span class="s2">"1408939026844"</span><span class="p">,</span>
    <span class="s2">"bank"</span><span class="p">:</span> <span class="s2">"bni"</span><span class="p">,</span>
    <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="s2">"145000.00"</span>
<span class="p">}</span>
</code></pre>

    <p><br />
Dari response di atas, hasil <code>save_token_id</code> perlu disimpan oleh merchant, misalnya di database, sehingga dapat digunakan untuk pembayaran berikutnya.</p>

    <p><br /></p>

    <h3 id="charge-request-berikutnya">Charge Request Berikutnya</h3>

    <p>Untuk charge request berikutnya, anda harus menggunakan token id yang didapat dari response yang pertama, <code>"saved_token_id"</code>. Token id tersebut diletakkan di bagian <code>"credit_card"</code>. Spesifikasi fungsi charge transaksi one click sama dengan <a href="charge.html#specification">charge transaksi kartu kredit</a>.
<br /><br /></p>

<pre><code class="highlight json"><span class="p">{</span>
    <span class="c1">// Required</span>
    <span class="s2">"payment_type"</span><span class="p">:</span> <span class="s2">"credit_card"</span><span class="p">,</span>
    <span class="s2">"credit_card"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"token_id"</span><span class="p">:</span> <span class="s2">"481111ac7c1182-7d25-4fd1-b31b-884e572950ce"</span><span class="p">,</span>
        <span class="s2">"bank"</span><span class="p">:</span> <span class="s2">"bni"</span>
    <span class="p">},</span>
    <span class="c1">// Required</span>
    <span class="s2">"transaction_details"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"order_id"</span><span class="p">:</span> <span class="s2">"A37550"</span><span class="p">,</span>
        <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="mi">200000</span>
    <span class="p">},</span>
    <span class="c1">// Required</span>
    <span class="s2">"customer_details"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Andri"</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Litani"</span><span class="p">,</span> <span class="c1">// optional</span>
        <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"andri@litani.com"</span><span class="p">,</span>
        <span class="s2">"phone"</span><span class="p">:</span> <span class="s2">"081122334455"</span><span class="p">,</span>
    <span class="c1">// Optional</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Andri"</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Litani"</span><span class="p">,</span>
        <span class="s2">"address"</span><span class="p">:</span> <span class="s2">"Mangga 20"</span><span class="p">,</span>
        <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Jakarta"</span><span class="p">,</span>
        <span class="s2">"postal_code"</span><span class="p">:</span> <span class="s2">"16602"</span><span class="p">,</span>
        <span class="s2">"phone"</span><span class="p">:</span> <span class="s2">"081122334455"</span><span class="p">,</span>
        <span class="s2">"country_code"</span><span class="p">:</span> <span class="s2">"IDN"</span>
        <span class="p">},</span>
    <span class="c1">// Optional</span>
    <span class="s2">"shipping_address"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Obet"</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Supriadi"</span><span class="p">,</span>
        <span class="s2">"address"</span><span class="p">:</span> <span class="s2">"Manggis 90"</span><span class="p">,</span>
        <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Jakarta"</span><span class="p">,</span>
        <span class="s2">"postal_code"</span><span class="p">:</span> <span class="s2">"16601"</span><span class="p">,</span>
        <span class="s2">"phone"</span><span class="p">:</span> <span class="s2">"08113366345"</span><span class="p">,</span>
        <span class="s2">"country_code"</span><span class="p">:</span> <span class="s2">"IDN"</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="c1">// Optional</span>
    <span class="s2">"item_details"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"a1"</span><span class="p">,</span>
            <span class="s2">"price"</span><span class="p">:</span> <span class="mi">50000</span><span class="p">,</span>
            <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Apel"</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"a2"</span><span class="p">,</span>
            <span class="s2">"price"</span><span class="p">:</span> <span class="mi">25000</span><span class="p">,</span>
            <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Mangga"</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>

</code></pre>

    <p><br />
Jika response sukses akan mendapatkan hasil sebagai berikut:
<br /><br /></p>

<pre><code class="highlight json"><span class="p">{</span>
    <span class="s2">"status_code"</span><span class="p">:</span> <span class="s2">"200"</span><span class="p">,</span>
    <span class="s2">"status_message"</span><span class="p">:</span> <span class="s2">"Success, Credit Card transaction is successful"</span><span class="p">,</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"9946cade-d7d1-4dc2-801e-456c5523e48d"</span><span class="p">,</span>
    <span class="s2">"order_id"</span><span class="p">:</span> <span class="s2">"A37550"</span><span class="p">,</span>
    <span class="s2">"payment_type"</span><span class="p">:</span> <span class="s2">"credit_card"</span><span class="p">,</span>
    <span class="s2">"transaction_time"</span><span class="p">:</span> <span class="s2">"2014-08-25 10:58:14"</span><span class="p">,</span>
    <span class="s2">"transaction_status"</span><span class="p">:</span> <span class="s2">"capture"</span><span class="p">,</span>
    <span class="s2">"approval_code"</span><span class="p">:</span> <span class="s2">"1408939095146"</span><span class="p">,</span>
    <span class="s2">"bank"</span><span class="p">:</span> <span class="s2">"bni"</span><span class="p">,</span>
    <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="s2">"145000.00"</span>
<span class="p">}</span>
</code></pre>

  </div>
  <div class="tab-pane" id="two-click">
    <p><br /></p>

    <h2 id="two-clicks">Two Clicks</h2>

    <p>Mirip dengan fitur one click, two clicks memungkinkan pelanggan anda untuk melakukan beberapa transaksi lebih mudah dan cepat. Setelah transaksi pertama berhasil, anda dapat menyimpan token untuk transaksi berikutnya.</p>

    <p>Token pada two clicks mewakili nomor dan expiry date kartu kredit pelanggan anda. Pelanggan anda cukup mengisi CVV dan autentikasi 3D Secure pada saat transaksi kedua dan selanjutnya dilakukan. Berbeda dengan one click, fitur two clicks dapat digunakan pada transaksi kartu kredit biasa maupun 3D Secure. </p>

    <p>Secara umum, ada dua tahapan dalam menggunakan fitur two clicks:</p>

    <ol>
      <li>Transaksi Pertama
        <ul>
          <li>Pelanggan memasukkan nomor, CVV, dan expiry date kartu kredit</li>
          <li>Autentikasi 3D Secure jika digunakan</li>
          <li>Anda menerima token</li>
          <li>Anda menggunakan token untuk charge transaksi</li>
          <li>Jika transaksi berhasil, Anda menyimpan token pelanggan di database. Kita namakan token ini sebagai <code>saved_token</code></li>
        </ul>
      </li>
      <li>Transaksi Selanjutnya
        <ul>
          <li>Anda mengambil <code>saved_token</code> pelanggan tersebut dari database</li>
          <li>Pelanggan memasukkan CVV kartu kredit</li>
          <li>Autentikasi 3D Secure jika digunakan</li>
          <li>Anda menggunakan <code>saved_token</code> dan CVV untuk memperoleh token baru</li>
          <li>Anda menggunakan token baru untuk charge transaksi </li>
        </ul>
      </li>
    </ol>

    <p><br /></p>

    <h3 id="charge-transaksi-pertama">Charge Transaksi Pertama</h3>

    <p>Charge transaksi pertama untuk two clicks mempunyai format yang sama dengan <a href="/id/sandbox/one_click.html#first-charge">charge transaksi pertama one click</a>. Pada charge transaksi pertama, <code>"save_token_id"</code> harus di masukan di JSON request dalam bagian <code>"credit_card"</code>. Dengan demikian, token akan disimpan untuk pembayaran berikutnya.
<br /><br /></p>

<pre><code class="highlight json"><span class="p">{</span>
    <span class="c1">// Required</span>
    <span class="s2">"payment_type"</span><span class="p">:</span> <span class="s2">"credit_card"</span><span class="p">,</span>
    <span class="s2">"credit_card"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"token_id"</span><span class="p">:</span> <span class="s2">"4811117d16c884-2cc7-4624-b0a8-10273b7f6cc8"</span><span class="p">,</span>
        <span class="s2">"bank"</span><span class="p">:</span> <span class="s2">"bni"</span><span class="p">,</span>
        <span class="s2">"save_token_id"</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="c1">// Required</span>
    <span class="s2">"transaction_details"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"order_id"</span><span class="p">:</span> <span class="s2">"A87550"</span><span class="p">,</span>
        <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="mi">145000</span>
    <span class="p">},</span>
    <span class="c1">// Required</span>
    <span class="s2">"customer_details"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Andri"</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Litani"</span><span class="p">,</span> <span class="c1">// optional</span>
        <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"andri@litani.com"</span><span class="p">,</span>
        <span class="s2">"phone"</span><span class="p">:</span> <span class="s2">"081122334455"</span><span class="p">,</span>
    <span class="c1">// Optional</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Andri"</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Litani"</span><span class="p">,</span>
        <span class="s2">"address"</span><span class="p">:</span> <span class="s2">"Mangga 20"</span><span class="p">,</span>
        <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Jakarta"</span><span class="p">,</span>
        <span class="s2">"postal_code"</span><span class="p">:</span> <span class="s2">"16602"</span><span class="p">,</span>
        <span class="s2">"phone"</span><span class="p">:</span> <span class="s2">"081122334455"</span><span class="p">,</span>
        <span class="s2">"country_code"</span><span class="p">:</span> <span class="s2">"IDN"</span>
        <span class="p">},</span>
    <span class="c1">// Optional</span>
    <span class="s2">"shipping_address"</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Obet"</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Supriadi"</span><span class="p">,</span>
        <span class="s2">"address"</span><span class="p">:</span> <span class="s2">"Manggis 90"</span><span class="p">,</span>
        <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Jakarta"</span><span class="p">,</span>
        <span class="s2">"postal_code"</span><span class="p">:</span> <span class="s2">"16601"</span><span class="p">,</span>
        <span class="s2">"phone"</span><span class="p">:</span> <span class="s2">"08113366345"</span><span class="p">,</span>
        <span class="s2">"country_code"</span><span class="p">:</span> <span class="s2">"IDN"</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="c1">// Optional</span>
    <span class="s2">"item_details"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"a1"</span><span class="p">,</span>
            <span class="s2">"price"</span><span class="p">:</span> <span class="mi">50000</span><span class="p">,</span>
            <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Apel"</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"a2"</span><span class="p">,</span>
            <span class="s2">"price"</span><span class="p">:</span> <span class="mi">45000</span><span class="p">,</span>
            <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Jeruk"</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre>

    <p><br />
Response yang akan dikembalikan jika transaksi sukses:
<br /><br /></p>

<pre><code class="highlight json"><span class="p">{</span>
    <span class="s2">"status_code"</span><span class="p">:</span> <span class="s2">"200"</span><span class="p">,</span>
    <span class="s2">"status_message"</span><span class="p">:</span> <span class="s2">"Success, Credit Card 3D Secure transaction is successful"</span><span class="p">,</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"f50c0aef-b629-4a5b-957b-4c52f45e2e63"</span><span class="p">,</span>
    <span class="s2">"order_id"</span><span class="p">:</span> <span class="s2">"A87550"</span><span class="p">,</span>
    <span class="s2">"payment_type"</span><span class="p">:</span> <span class="s2">"credit_card"</span><span class="p">,</span>
    <span class="s2">"transaction_time"</span><span class="p">:</span> <span class="s2">"2014-08-25 11:21:48"</span><span class="p">,</span>
    <span class="s2">"transaction_status"</span><span class="p">:</span> <span class="s2">"capture"</span><span class="p">,</span>
    <span class="s2">"fraud_status"</span><span class="p">:</span> <span class="s2">"accept"</span><span class="p">,</span>
    <span class="s2">"masked_card"</span><span class="p">:</span> <span class="s2">"481111-1114"</span><span class="p">,</span>
    <span class="s2">"saved_token_id"</span><span class="p">:</span> <span class="s2">"4811117d16c884-2cc7-4624-b0a8-10273b7f6cc8"</span><span class="p">,</span>
    <span class="s2">"saved_token_id_expired_at"</span><span class="p">:</span> <span class="s2">"2024-08-25 11:21:48"</span><span class="p">,</span>
    <span class="s2">"approval_code"</span><span class="p">:</span> <span class="s2">"1408940508666"</span><span class="p">,</span>
    <span class="s2">"bank"</span><span class="p">:</span> <span class="s2">"bni"</span><span class="p">,</span>
    <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="s2">"145000.00"</span>
<span class="p">}</span>
</code></pre>

    <p><br />
Dari response di atas, hasil <code>saved_token_id</code> perlu disimpan oleh merchant, misalnya di database, sehingga dapat digunakan untuk pembayaran berikutnya.</p>

    <p><br /></p>

    <h3 id="charge-request-berikutnya-1">Charge Request Berikutnya</h3>

    <p>Pada transaksi selanjutnya, kita menggunakan <code>saved_token_id</code>, CVV, dan autentikasi 3DS (jika diaktifkan) yang dimasukkan oleh pelanggan untuk mendapatkan token baru. Atribut <code>two_click</code> juga perlu ditambahkan saat request token baru dilakukan. Token baru kemudian anda gunakan untuk melakukan charge transaksi berikutnya. Nilai token baru otomatis akan dimasukkan ke dalam <code>&lt;input id="token-id" name="token-id" type="hidden" /&gt;</code> oleh <code>veritrans.min.js</code>.
<br /><br />
Perlu diperhatikan bahwa anda <strong>tidak</strong> menggunakan <code>saved_token</code> untuk melakukan charge transaksi. Anda menggunakan <code>saved_token</code> sebagai salah satu syarat untuk memperoleh token baru. Anda <strong>tidak</strong> menyimpan token baru dari pelanggan tersebut ke database.
<br /><br />
Field nomor dan expiry date pada form dapat dihilangkan karena pelanggan anda cukup mengisi CVV dan melakukan autentikasi 3D Secure saja. Menggunakan kasus yang sama dengan <a href="../vtdirect/integration_cc.html#step2">charge transaksi</a>, Berikut adalah contoh request token baru menggunakan atribut <code>saved_token</code> dan CVV yang dimasukkan pelanggan:
<br /><br /></p>

<pre><code class="highlight html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>

<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  
  <span class="p">...</span>

  <span class="kd">var</span> <span class="nx">card</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="s1">'card_cvv'</span> <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#card-cvv"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="s1">'token_id'</span> <span class="p">:</span> <span class="s1">'&lt;retrieve this customer saved_token from your database&gt;'</span><span class="p">,</span>


      <span class="s1">'two_click'</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s1">'secure'</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s1">'bank'</span> <span class="p">:</span> <span class="s1">'bni'</span><span class="p">,</span>
      <span class="s1">'gross_amount'</span> <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#price"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="p">...</span>

<span class="nt">&lt;/script&gt;</span>
</code></pre>

    <p><br />
Saat token baru sudah diperoleh, anda dapat menggunakan token tersebut untuk melakukan charge transaksi seperti biasa. Spesifikasi fungsi charge transaksi two clicks sama dengan <a href="charge.html#specification">charge transaksi kartu kredit</a>.
<br /><br /></p>

<pre><code class="highlight json"><span class="p">{</span>
    <span class="c1">// Required</span>
    <span class="s2">"payment_type"</span><span class="p">:</span> <span class="s2">"credit_card"</span><span class="p">,</span>
    <span class="s2">"credit_card"</span><span class="p">:</span> <span class="p">{</span>
        <span class="c1">// New Token. Generated from saved_token_id, CVV, &amp; 3D Secure</span>
        <span class="s2">"token_id"</span><span class="p">:</span> <span class="s2">"481111-1114-7baba36c-5698-47cf-9170-80efd6a2e973"</span><span class="p">,</span>
        <span class="s2">"bank"</span><span class="p">:</span> <span class="s2">"bni"</span>
    <span class="p">},</span>
    <span class="c1">// Required</span>
    <span class="s2">"transaction_details"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"order_id"</span><span class="p">:</span> <span class="s2">"A87551"</span><span class="p">,</span>
        <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="mi">145000</span>
    <span class="p">},</span>
    <span class="c1">// Required</span>
    <span class="s2">"customer_details"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Andri"</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Litani"</span><span class="p">,</span> <span class="c1">// optional</span>
        <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"andri@litani.com"</span><span class="p">,</span>
        <span class="s2">"phone"</span><span class="p">:</span> <span class="s2">"081122334455"</span><span class="p">,</span>
    <span class="c1">//Optional</span>
    <span class="s2">"billing_address"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Andri"</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Litani"</span><span class="p">,</span>
        <span class="s2">"address"</span><span class="p">:</span> <span class="s2">"Mangga 20"</span><span class="p">,</span>
        <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Jakarta"</span><span class="p">,</span>
        <span class="s2">"postal_code"</span><span class="p">:</span> <span class="s2">"16602"</span><span class="p">,</span>
        <span class="s2">"phone"</span><span class="p">:</span> <span class="s2">"081122334455"</span><span class="p">,</span>
        <span class="s2">"country_code"</span><span class="p">:</span> <span class="s2">"IDN"</span>
        <span class="p">},</span>
    <span class="c1">// Optional</span>
    <span class="s2">"shipping_address"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"first_name"</span><span class="p">:</span> <span class="s2">"Obet"</span><span class="p">,</span>
        <span class="s2">"last_name"</span><span class="p">:</span> <span class="s2">"Supriadi"</span><span class="p">,</span>
        <span class="s2">"address"</span><span class="p">:</span> <span class="s2">"Manggis 90"</span><span class="p">,</span>
        <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"Jakarta"</span><span class="p">,</span>
        <span class="s2">"postal_code"</span><span class="p">:</span> <span class="s2">"16601"</span><span class="p">,</span>
        <span class="s2">"phone"</span><span class="p">:</span> <span class="s2">"08113366345"</span><span class="p">,</span>
        <span class="s2">"country_code"</span><span class="p">:</span> <span class="s2">"IDN"</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="c1">// Optional</span>
    <span class="s2">"item_details"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"a1"</span><span class="p">,</span>
            <span class="s2">"price"</span><span class="p">:</span> <span class="mi">50000</span><span class="p">,</span>
            <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Apel"</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"a2"</span><span class="p">,</span>
            <span class="s2">"price"</span><span class="p">:</span> <span class="mi">45000</span><span class="p">,</span>
            <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Jeruk"</span>
        <span class="p">}</span>

    <span class="p">]</span>
<span class="p">}</span>
</code></pre>

    <p><br />
Contoh response yang akan dikembalikan jika transaksi sukses:
<br /><br /></p>

<pre><code class="highlight json"><span class="p">{</span>
    <span class="s2">"status_code"</span><span class="p">:</span> <span class="s2">"200"</span><span class="p">,</span>
    <span class="s2">"status_message"</span><span class="p">:</span> <span class="s2">"Success, Credit Card 3D Secure transaction is successful"</span><span class="p">,</span>
    <span class="s2">"transaction_id"</span><span class="p">:</span> <span class="s2">"6612f7c2-f74e-4ee0-8353-90ee89865e30"</span><span class="p">,</span>
    <span class="s2">"order_id"</span><span class="p">:</span> <span class="s2">"A87551"</span><span class="p">,</span>
    <span class="s2">"payment_type"</span><span class="p">:</span> <span class="s2">"credit_card"</span><span class="p">,</span>
    <span class="s2">"transaction_time"</span><span class="p">:</span> <span class="s2">"2014-08-25 11:41:51"</span><span class="p">,</span>
    <span class="s2">"transaction_status"</span><span class="p">:</span> <span class="s2">"capture"</span><span class="p">,</span>
    <span class="s2">"fraud_status"</span><span class="p">:</span> <span class="s2">"accept"</span><span class="p">,</span>
    <span class="s2">"masked_card"</span><span class="p">:</span> <span class="s2">"481111-1114"</span><span class="p">,</span>
    <span class="s2">"approval_code"</span><span class="p">:</span> <span class="s2">"1408941711460"</span><span class="p">,</span>
    <span class="s2">"bank"</span><span class="p">:</span> <span class="s2">"bni"</span><span class="p">,</span>
    <span class="s2">"gross_amount"</span><span class="p">:</span> <span class="s2">"145000.00"</span>
<span class="p">}</span>
</code></pre>

  </div>
</div>


			<div class="pagination">
				<ul><li class="right">Selanjutnya: <a href="../vtweb/introduction.html">VT-Web : Perkenalan</a> »</li></ul>
			</div>
          </div>
        </div><!--/span-->
      </div><!--/row-->

    </div><!--/.container-->

    <script src="../../javascripts/jquery-1.10.2.min.js" type="text/javascript"></script>
<script src="../../javascripts/bootstrap.min.js" type="text/javascript"></script>
<script src="../../javascripts/dropdown.js" type="text/javascript"></script>
<script src="../../javascripts/tab_custom.js" type="text/javascript"></script>
    <footer>
  <div class="container">
    <div class="row footer-content">
      <div class="col-lg-3 col-md-3 col-sm-4 col-xs-6">
        <h4 class="text-gray">Veritrans</h4>
        <ul>
          <li>
            <a href="https://www.veritrans.co.id/">Home</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/payment_channels.html">Payment Channels</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/pricing.html">Product &amp; Pricing</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/event.html">Promo</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/https://www.veritrans.co.id/case_study.html">Case Study</a>
          </li>
          <!-- <li>
            <a href="aegis.html">Aegis</a>
          </li> -->
        </ul>
        <!-- <h4 class="text-gray">Shopping</h4>
        <ul>
          <li>
            <a href="event.html">Promo</a>
          </li>
          <li>
            <a href="directory.html">Directory</a>
          </li>
        </ul> -->
      </div>
      <div class="col-lg-2 col-md-3 col-sm-4 col-xs-6">
        <h4 class="text-gray">Devs</h4>
        <ul>
          <li>
            <a href="http://docs.veritrans.co.id">Documentations</a>
          </li>
          <li>
            <a href="#" data-toggle="modal" data-target="#underConstruction">Dev Notes</a>
          </li>
        </ul>
        <h4 class="text-gray about-footer">About</h4>
        <ul>
          <li>
            <a href="https://www.veritrans.co.id/about.html">Team</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/career.html">Career</a>
          </li>
        </ul>
      </div>
      <div class="col-lg-2 col-md-3 col-sm-4 col-xs-6">
        <h4 class="text-gray">Help</h4>
        <ul>
          <li>
            <a href="https://blog.veritrans.co.id">Blog</a>
          </li>
          <li>
            <a href="http://support.veritrans.co.id">FAQ</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/contact.html">Contact</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/privacy_policy.html">Privacy Policy</a>
          </li>
        </ul>
      </div>
      <div class="col-lg-2 col-md-3 col-sm-4 col-xs-6 find-us-footer">
        <h4 class="text-gray">Find Us</h4>
        <ul>
          <li>
            <a href="https://www.facebook.com/veritransID">Facebook</a>
          </li>
          <li>
            <a href="https://twitter.com/veritransid">Twitter</a>
          </li>
          <li>
            <a href="https://instagram.com/veritransid">Instagram</a>
          </li>
          <li>
            <a href="https://www.linkedin.com/company/pt-midtrans">LinkedIn</a>
          </li>
          <li>
            <a href="https://www.youtube.com/channel/UCtPNqTFgR1aXpEFA9B_djnw">YouTube</a>
          </li>
        </ul>
      </div>
      <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
        <h4 class="text-gray with-subtitle">
          Subscribe
        </h4>
        <small>
          tips &amp; berita terbaru seputar eCommerce
        </small>
        <div id="mc_embed_signup">
          <form action="//veritrans.us9.list-manage.com/subscribe/post?u=4ed5f88335112571098a4a51c&amp;id=12315939d2" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
            <div id="mc_embed_signup_scroll">
              <div class="mc-field-group">
                  <input type="email" value="" name="EMAIL" class="required email search-input" id="mce-EMAIL" placeholder="EMAIL" pattern="/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/" required/>
              </div>
              <div id="mce-responses" class="clear">
                  <div class="response" id="mce-error-response" style="display:none"></div>
                  <div class="response" id="mce-success-response" style="display:none"></div>
            </div>   
              <div style="position: absolute; left: -5000px;"><input type="text" name="b_4ed5f88335112571098a4a51c_12315939d2" tabindex="-1" value=""></div>
              <div class="clear"><input type="submit" value="submit" name="subscribe" id="mc-embedded-subscribe" class="btn btn-search"/></div>
              </div>
          </form>
        </div>
      </div>
    </div>
    <div class="copyright text-center">
      <br/>
      &copy; 2015 PT Midtrans
      <br/>
      <br/>
    </div>
  </div>
</footer>
<div class="modal fade" id="underConstruction" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title text-center" id="myModalLabel">Sorry!</h4>
      </div>
      <div class="modal-body text-center">
        We're still building this web page.<br/>
        Be the first to know when it's done by <a class="dotted" href="https://veritrans.us9.list-manage.com/subscribe/post?u=4ed5f88335112571098a4a51c&id=12315939d2">subscribing</a> to our newsletter.
      </div>
    </div>
  </div>
</div>
<script language="javascript" type="text/javascript">
  function popitup(url) {
    newwindow=window.open(url,'name','height=430,width=540');
    if (window.focus) {newwindow.focus()}
    return false;
  }
</script>
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-32232768-1', 'veritrans.co.id');
      ga('send', 'pageview');

    </script>
    <script>
    $(document).ready(function() {
      $('[data-toggle=offcanvas]').click(function() {
        $('.row-offcanvas').toggleClass('active');
      });
      $(function () {
        $('[data-toggle="tooltip"]').tooltip();
      });
    });
    </script>
  </body>
</html>
