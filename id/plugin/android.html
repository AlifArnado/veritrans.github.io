<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Veritrans API Documentation. Payment Gateway Indonesia, transaksi online lebih aman, mudah, cepat! Veritrans memberi solusi sistem payment gateway terbaik untuk e-commerce di Indonesia.">
    <meta name="keywords" content="Veritrans, Veritrans Indonesia, payment gateway indonesia, Pembayaran Online Indonesia, online payment Indonesia, sistem transaksi online"> 
    <link href="../../stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    <title>Docs - Veritrans Indonesia</title>
		<link rel="shortcut icon" href="/favicon.ico"/>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="header navbar navbar-default navbar-fixed-top">
      <div class="custom-container">
        <div class="col-md-3 col-sm-12 navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <h2 class="logo"><a href="https://www.veritrans.co.id/" title="Home"><span>Veritrans</span></a></h2>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="https://www.veritrans.co.id/whatwedo.html" title="What We Do">what we do</a></li>
            <li><a href="https://www.veritrans.co.id/product.html" title="Our Online Payment Products">product</a></li>
            
            <li class="dropdown hidden-xs hidden-sm hidden-md">
              <a href="about.html">about <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="https://www.veritrans.co.id/team.html" title="Team">team</a></li>
                <li><a href="https://www.veritrans.co.id/press.html" title="Press">press</a></li>
                <li><a href="https://www.veritrans.co.id/career.html" title="Career at Veritrans">career</a></li>
                <li><a href="https://www.veritrans.co.id/contact.html" title="Contact Us">contact</a></li>
                <li><a href="http://support.veritrans.co.id/" title="FAQ & How To">FAQ</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-lg">
              <a href="#">about <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="https://www.veritrans.co.id/about.html" title="Team">about us</a></li>
                <li><a href="https://www.veritrans.co.id/team.html" title="Team">team</a></li>
                <li><a href="https://www.veritrans.co.id/press.html" title="Press">press</a></li>
                <li><a href="https://www.veritrans.co.id/career.html" title="Career at Veritrans">career</a></li>
                <li><a href="https://www.veritrans.co.id/contact.html" title="Contact Us">contact</a></li>
                <li><a href="http://support.veritrans.co.id/" title="FAQ & How To">FAQ</a></li>
              </ul>
            </li>
            <!-- <li><a href="http://docs.veritrans.co.id" title="Product Documentations">docs</a></li> -->
            <li class="dropdown">
              <a href="#">developer <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="https://www.veritrans.co.id/sandbox.html">sandbox</a></li>
                <li><a href="http://docs.veritrans.co.id/">documentation</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#">community <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="http://blog.veritrans.co.id" title="Blog, News and Press Release">blog</a></li>
                <li><a href="https://www.veritrans.co.id/merchants.html" title="Merchants">merchants</a></li>
                <li><a href="https://www.veritrans.co.id/why-veritrans.html" title="Why Veritrans">why veritrans</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right register-login">
            <li class="pull-left"><a href="https://my.sandbox.veritrans.co.id/register" class="register">sign up</a></li>
            <li class="pull-left"><a href="https://my.veritrans.co.id/login">sign in</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

    <div class="custom-container">
      <div class="row row-offcanvas row-offcanvas-right">
        <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
	<div class="documentation-sidebar">
		<div class="docs-logo">
			<span>DOCS</span>
		</div>
		<div class="language-toggle"> <a href="../../plugin/android.html">English</a> / Bahasa Indonesia</div>
		<ul class="sidebar">
			
			<li>
        
          <a class="parent" href="../welcome/welcome.html">Selamat Datang</a>
        
			</li>
			
			<li>
        
          <a class="parent">VT-Web</a>
          <b class="caret"></b>
          <ul class="child-menu">
            
            <li class=""><a href="../vtweb/introduction.html">Perkenalan</a></li>
            
            <li class=""><a href="../vtweb/getting_started.html">Langkah Awal</a></li>
            
            <li class=""><a href="../vtweb/integration.html">Integrasi</a></li>
            
            <li class=""><a href="../vtweb/other_features.html">Fitur Tambahan</a></li>
            
            <li class=""><a href="../vtweb/going_live.html">Going Live</a></li>
            
          </ul>
        
			</li>
			
			<li>
        
          <a class="parent">VT-Direct</a>
          <b class="caret"></b>
          <ul class="child-menu">
            
            <li class=""><a href="../vtdirect/introduction.html">Perkenalan</a></li>
            
            <li class=""><a href="../vtdirect/getting_started.html">Langkah Awal</a></li>
            
            <li class=""><a href="../vtdirect/integration.html">Integrasi</a></li>
            
            <li class=""><a href="../vtdirect/other_features.html">Fitur Tambahan</a></li>
            
            <li class=""><a href="../vtdirect/other_commands.html">Perintah Lain</a></li>
            
            <li class=""><a href="../vtdirect/going_live.html">Going Live</a></li>
            
          </ul>
        
			</li>
			
			<li>
        
          <a class="parent">Referensi API</a>
          <b class="caret"></b>
          <ul class="child-menu">
            
            <li class=""><a href="../sandbox/introduction.html">Perkenalan</a></li>
            
            <li class=""><a href="../sandbox/charge.html">Charge Transaksi</a></li>
            
            <li class=""><a href="../sandbox/installment.html">Cicilan</a></li>
            
            <li class=""><a href="../sandbox/bin.html">BIN Promo</a></li>
            
            <li class=""><a href="../sandbox/other_features.html">Fitur Tambahan</a></li>
            
            <li class=""><a href="../sandbox/other_commands.html">Perintah Lain</a></li>
            
            <li class=""><a href="../sandbox/card_list.html">Daftar Kartu Uji Coba</a></li>
            
            <li class=""><a href="../sandbox/status_code.html">Status Kode</a></li>
            
          </ul>
        
			</li>
			
			<li>
        
          <a class="parent" href="plugin.html">Plugin & Mobile Apps</a>
        
			</li>
			
			<li>
        
          <a class="parent" href="http://support.veritrans.co.id">FAQ</a>
        
			</li>
			
		</ul>
		<p class="question">
            Anda merasa ada yang kurang dari dokumentasi ini?<br>
            <a href="https://github.com/veritrans/veritrans.github.io">Buka issue atau ikut berkontribusi di Github</a>
        </p>
	</div>
</div><!--/span-->
        <div class="col-xs-12 col-sm-7" id="bodier">
          <p class="pull-right visible-xs">
            <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Menu</button>
          </p>
          <div class="id-plugin-android">
            <h2 id="integrasi-android">Integrasi Android</h2>
<hr />

<h5 id="dokumentasi-pada-halaman-ini-bertujuan-untuk-membantu-anda-melakukan-integrasi-dengan-metode-pembayaran-kartu-kredit-pada-aplikasi-android-menggunakan-vt-direct-apabila-butuh-bantuan-silahkan-hubungi-kami-di-supportveritranscoidmailtosupportveritranscoid-email-support-atau-kunjungi-halaman-support-kamihttpsupportveritranscoid-veritrans-support"><em>Dokumentasi pada halaman ini bertujuan untuk membantu anda melakukan integrasi dengan metode pembayaran kartu kredit pada aplikasi android menggunakan VT-Direct. Apabila butuh bantuan, silahkan hubungi kami di <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#064;&#118;&#101;&#114;&#105;&#116;&#114;&#097;&#110;&#115;&#046;&#099;&#111;&#046;&#105;&#100;">&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#064;&#118;&#101;&#114;&#105;&#116;&#114;&#097;&#110;&#115;&#046;&#099;&#111;&#046;&#105;&#100;</a> atau kunjungi <a title="Veritrans Support" href="http://support.veritrans.co.id">halaman support kami</a>.</em></h5>
<hr />
<p><br /></p>

<h3 id="perkenalan">Perkenalan</h3>

<p>VTAndroidLib adalah library android yang digunakan untuk melakukan proses mendapatkan token dari Veritrans dengan menggunakan <a href="../vtdirect/introduction.html">VT-Direct</a>. Anda membutuhkan <a href="https://sites.google.com/site/gson/">Library Gson</a> yang harus di setting pada file Gradle (akan dijelaskan lebih lanjut di bawah) agar library ini dapat berjalan dengan baik.</p>

<p>Dengan mempergunakan library ini, anda bisa mendapatkan data kartu kredit secara aman tanpa harus menyimpan data tersebut di server milik anda, library ini juga sudah mendukung proses mendapatkan token 3D Secure.</p>

<pre><code class="highlight plaintext">Note: Untuk proses pengembangan dan testing, anda harus memiliki akun sandbox Veritrans.
</code></pre>

<p><br /></p>

<h3 id="alur-proses-transaksi">Alur Proses Transaksi</h3>

<p><img alt="vtdirect_mobile" class="img-responsive img-thumbnail" src="../../images/vtdirect-mobile-flow.png" /></p>

<p>Ada tiga pihak yang terlibat dalam proses pembayaran untuk VT-Direct: anda, pelanggan anda, dan Veritrans. Berikut adalah penjelasan bagaimana VT-Direct bekerja.</p>

<ol>
  <li>
    <p><strong>Klik Pay</strong>: Pelanggan anda memasukan detail kartu kredit di aplikasi android anda, dan menekan tombol <code>PAY</code> untuk menyelesaikan pembayaran.</p>
  </li>
  <li>
    <p><strong>Mengirim data</strong>: ketika pelanggan anda menekan tombol PAY, library android akan menggabungkan informasi kartu kredit yang sensitif dengan <em>client key</em>. Gabungan data tersebut dikirimkan ke server Veritrans untuk ditukar dengan <em>onetime-token</em> ("Token").</p>
  </li>
  <li>
    <p><strong>Mendapatkan Token</strong>: Veritrans akan mengembalikan Token ke aplikasi android anda. Token akan valid selama <strong>3 menit</strong> pada transaksi kartu kredit biasa dan <strong>10 menit</strong> jika fitur 3D Secure digunakan. Token tidak bisa digunakan lagi jika melewati durasi waktu tersebut.</p>
  </li>
  <li>
    <p><strong>Mengirim Token</strong>: Token kemudian dikirimkan ke server anda. Harap di perhatikan, anda hanya akan menerima Token sebagai pengganti detail dari kartu kredit. <strong>Anda tidak akan menyimpan ataupun memproses informasi dari kartu kredit.</strong> Karena hal tersebut, anda tidak perlu berurusan dengan PCI DSS compliance.</p>
  </li>
  <li>
    <p><strong>Request Charge</strong>: Anda melakukan charge transaksi ke Veritrans menggunakan Token ditambah beberapa informasi lainnya (contoh: detail pelanggan, detail produk, alamat).</p>
  </li>
  <li>
    <p><strong>Transaction Response Handling</strong>: Veritrans mengembalikan respon status transaksi, seperti</p>

    <ul>
      <li>Capture</li>
      <li>Settlement
<br /><br /></li>
    </ul>
  </li>
  <li>
    <p><strong>Memberikan informasi transaksi</strong>: Anda memberitahukan hasil transaksi kepada pelanggan anda.
<br /><br /></p>
  </li>
</ol>

<h3 id="step-1-instalasi">STEP 1: INSTALASI</h3>

<p>Kami menyarankan anda menggunakan Gradle untuk mengelola dependensi pekerjaan anda. Contoh di halaman ini menggunakan Gradle.</p>

<ul>
  <li>Download versi terbaru VTAndroidLib.aar dari <a href="https://github.com/muhammadanis/vtandroidlib/releases/">Github</a>, simpan di dalam folder libs. contoh: PROJECT_ROOT/app/libs.</li>
  <li>Menambahkan dependensi pada file <code>build.gradle</code> untuk VTAndroidLib dan Gson.</li>
</ul>

<p><br /></p>

<pre><code class="highlight plaintext">allprojects {
    repositories {
        jcenter()
        flatDir {
            dirs 'libs'
        }
    }
}
dependencies {
    compile 'com.google.code.gson:gson:2.2.4'
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile (name : 'VTAndroidAPI', ext: 'aar')
}
</code></pre>

<p><br /></p>

<h3 id="step-2-mendapatkan-token">STEP 2: Mendapatkan Token</h3>

<ul>
  <li>Set VTConfig ke mode Sandbox dan memasukan Client Key.</li>
</ul>

<pre><code class="highlight plaintext">//set environment
VTConfig.VT_IsProduction = false;

//set client key
VTConfig.CLIENT_KEY = "&lt; Your Client Key &gt;";
</code></pre>

<p><br /></p>

<ul>
  <li>Membuat objek VTDirect serta mengatur rincian data kartu untuk mendapatkan token.</li>
</ul>

<pre><code class="highlight plaintext">//Create VTDirect Object. It’s config is Based on VTConfig Static Class
VTDirect vtDirect = new VTDirect();

//Create VTCardDetails Object to be set to VTDirect Object
VTCardDetails cardDetails = new VTCardDetails();
	
//TODO: Set your card details based on user input.
//this is a sample
cardDetails.setCard_number("4811111111111114"); // 3DS Dummy CC 
cardDetails.setCard_cvv("123");
cardDetails.setCard_exp_month(1);
cardDetails.setCard_exp_year(2020);
	
//set true or false to enable or disable 3dsecure
cardDetails.setSecure(true);
cardDetails.setGross_amount("10000");
	
//Set VTCardDetails to VTDirect
vtDirect.setCard_details(cardDetails);
</code></pre>

<p><br /></p>

<ul>
  <li>Meminta Token</li>
</ul>

<pre><code class="highlight plaintext">//Simply Call getToken function and put your callback to handle data
vtDirect.getToken(new ITokenCallback() {
    @Override
   	public void onSuccess(VTToken token) {
    
    //use token anyhow you want, maybe send it to your server. Example here to check whether you are using 3dsecure feature or not.
        if(token.getRedirect_url() != null){
            
            //using 3d secure
			WebView webView = new 
				WebView(getActivity());
                          
				webView.getSettings().setJavaScriptEnabled(true);	
                webView.setOnTouchListener(new View.OnTouchListener(){

					@Override
    				public boolean onTouch(View v, MotionEvent event){
      					switch (event.getAction()){
                            case MotionEvent.ACTION_DOWN
                            case MotionEvent.ACTION_UP:
                            if (!v.hasFocus())
                            	{
                                    v.requestFocus();
                                }
                            break;
                        }
                            return false;
                    }
                });
                webView.loadUrl(token.getRedirect_url());
		}
        //print or send token
    }

    @Override
    public void onError(Exception e) {
					
		//Something is wrong, get details message by print e.getMessage()
    }
});
</code></pre>

<p><br /></p>

<h3 id="step-3-mengirim-token-ke-server">STEP 3: Mengirim token ke server</h3>

<p>Setelah mendapatkan token, anda harus mengirimkan token tersebut ke server agar dapat melakukan proses charge. Untuk melakukan ini, dapat menggunakan fitur AsyncTask dari android.</p>

<pre><code class="highlight plaintext">private class SendTokenAsync extends AsyncTask&lt;String, Void, String&gt;{

        @Override
        protected String doInBackground(String... strings) {
            HttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost("http://&lt;Your Server&gt;/index.php");

            List&lt;NameValuePair&gt; nameValuePairs = new ArrayList&lt;NameValuePair&gt;(1);
            try {
				
				//add post parameter called token-id and price
                nameValuePairs.add(new BasicNameValuePair("token-id", URLEncoder.encode(strings[0],"UTF-8")));
                nameValuePairs.add(new BasicNameValuePair("price",strings[1]));
                httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
				
				//get response from server
                HttpResponse response = httpClient.execute(httpPost);
                String jsonResponse = EntityUtils.toString(response.getEntity()).toString();
                return jsonResponse;
            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            }catch (IOException e) {
                e.printStackTrace();
            }
            return "";      
        }
    }
</code></pre>

<p><br /></p>

<h3 id="step-4-melakukan-proses-charge">STEP 4: Melakukan Proses Charge</h3>

<p>Setelah mengirimkan token ke server, sekarang saatnya melakukan proses charge dari server merchant ke server Veritrans dengan menggunakan server key. Contoh berikut menggunakan PHP sebagai processing server dengan menggunakan <a href="https://github.com/veritrans/veritrans-php">library PHP</a> milik Veritrans.</p>

<p>File : index.php</p>

<pre><code class="highlight php"><span class="cp">&lt;?php</span>
<span class="k">include_once</span><span class="p">(</span><span class="s2">"Veritrans.php"</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'token-id'</span><span class="p">])){</span>
        <span class="k">echo</span> <span class="s2">"Empty token-id"</span><span class="p">;</span>
        <span class="k">exit</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">Veritrans_Config</span><span class="o">::</span><span class="nv">$serverKey</span> <span class="o">=</span> <span class="s2">"&lt; Your server key &gt;"</span><span class="p">;</span>
<span class="nx">Veritrans_Config</span><span class="o">::</span><span class="nv">$isProduction</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="nv">$token_id</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'token-id'</span><span class="p">];</span>
<span class="c1">//echo $token_id;
</span>
<span class="nv">$transaction_details</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'order_id'</span>    <span class="o">=&gt;</span> <span class="nb">rand</span><span class="p">(),</span>
  <span class="s1">'gross_amount'</span>  <span class="o">=&gt;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'price'</span><span class="p">]</span>
<span class="p">);</span>

<span class="nv">$transaction_data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'payment_type'</span>      <span class="o">=&gt;</span> <span class="s1">'credit_card'</span><span class="p">,</span>
  <span class="s1">'credit_card'</span>       <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'token_id'</span>  <span class="o">=&gt;</span> <span class="nv">$token_id</span><span class="p">,</span>
    <span class="s1">'bank'</span>    <span class="o">=&gt;</span> <span class="s1">'bni'</span>
    <span class="p">),</span>
  <span class="s1">'transaction_details'</span>   <span class="o">=&gt;</span> <span class="nv">$transaction_details</span><span class="p">,</span>
  <span class="p">);</span>
<span class="k">try</span><span class="p">{</span>
        <span class="nv">$result</span> <span class="o">=</span> <span class="nx">Veritrans_VtDirect</span><span class="o">::</span><span class="na">charge</span><span class="p">(</span><span class="nv">$transaction_data</span><span class="p">);</span>
        <span class="nv">$json</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
        <span class="k">echo</span> <span class="s2">"{\"</span><span class="nx">status\</span><span class="s2">":</span><span class="se">\"</span><span class="s2">success</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">body</span><span class="se">\"</span><span class="s2"> : </span><span class="nv">$json</span><span class="s2">}"</span><span class="p">;</span>
<span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">){</span>
        <span class="k">echo</span> <span class="s2">"{\"</span><span class="nx">status\</span><span class="s2">":</span><span class="se">\"</span><span class="s2">error</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">body</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">.</span><span class="nv">$e</span><span class="s2">.</span><span class="se">\"</span><span class="s2">}"</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">?&gt;</span>
</code></pre>

<p>Bila anda menggunakan bahasa pemrograman lain, silahkan cek library kami di <a href="plugin.html">sini</a>.</p>

<p>Anda dapat melihat contoh toko sederhana dari aplikasi yang menggunakan library kami di <a href="https://github.com/muhammadanis/vtsamplestoreAndroid">sini</a>.</p>

<p><br /></p>


			<div class="pagination">
				<ul><li class="right">Selanjutnya: <a href="../vtweb/introduction.html">VT-Web : Perkenalan</a> »</li></ul>
			</div>
          </div>
        </div><!--/span-->
      </div><!--/row-->

    </div><!--/.container-->

    <script src="../../javascripts/jquery-1.10.2.min.js" type="text/javascript"></script>
<script src="../../javascripts/bootstrap.min.js" type="text/javascript"></script>
<script src="../../javascripts/dropdown.js" type="text/javascript"></script>
<script src="../../javascripts/tab_custom.js" type="text/javascript"></script>
    <div class="custom-container footer">
  <div class="wrapper">
    <div class="row">
      <div class="col-md-12 copyright">
        <div class="content text-center">
          <span>&copy;2014 PT. Midtrans (Veritrans Indonesia). All Rights Reserved</span>
          <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/privacy.html" title="Privacy Policy">Privacy Policy</a>
        </div>
      </div>
    </div>
  </div>
</div>
    
    </script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-32232768-1', 'veritrans.co.id');
      ga('send', 'pageview');

    </script>
    <script>
    $(document).ready(function() {
      $('[data-toggle=offcanvas]').click(function() {
        $('.row-offcanvas').toggleClass('active');
      });
      $(function () {
        $('[data-toggle="tooltip"]').tooltip();
      });
    });
    </script>
  </body>
</html>
