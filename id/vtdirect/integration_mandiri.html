<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <!-- Bing Validate -->
    <meta name="msvalidate.01" content="846642D2B12ABB4747D70776D2056651"/>
    <!-- Google Webmaster Validate -->
    <meta name="google-site-verification" content="uUeOdHBzl0nbyvdyeRHKGIHPxnIpJDTTnWv-QfgkxRs" />
    <!-- FB OG -->
    <meta property="og:title" content="Docs || Online Payment Gateway for Indonesia eCommerce"/>
    <meta property="og:site_name" content="Veritrans"/>
    <meta property="og:description" content="Payment Gateway Solution for eCommerce merchants in Indonesia to send and receive online payment with credit/debit card, internet and mobile banking"/>
    <meta property="fb:app_id" content="404252079606310"/>
    <meta property="og:image" content="http://veritrans.co.id/images/veritrans-og.png"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Veritrans API Documentation. Payment Gateway Indonesia, transaksi online lebih aman, mudah, cepat! Veritrans memberi solusi sistem payment gateway terbaik untuk e-commerce di Indonesia.">
    <meta name="keywords" content="Veritrans, Veritrans Indonesia, payment gateway indonesia, Pembayaran Online Indonesia, online payment Indonesia, sistem transaksi online"> 
    <meta name="google-site-verification" content="uUeOdHBzl0nbyvdyeRHKGIHPxnIpJDTTnWv-QfgkxRs" />
    <meta name="msvalidate.01" content="846642D2B12ABB4747D70776D2056651">
    
    <link href="../../stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    
    <title>Veritrans - API Documentation</title>
		<link rel="icon" type="image/x-icon" href="/favicon/veritrans.ico" />
    <script src="../../javascripts/jquery-1.10.2.min.js" type="text/javascript"></script>

    <!-- start Mixpanel -->
    <script type="text/javascript">(function(f,b){if(!b.__SV){var a,e,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
        for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=f.createElement("script");a.type="text/javascript";a.async=!0;a.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";e=f.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}})(document,window.mixpanel||[]);
        mixpanel.init("f93e9c92cf8729b32c4491fb6794689b");
    </script>
    <!-- end mixpanel -->

    <!-- Optimizely -->
    <script src="//cdn.optimizely.com/js/2982491356.js"></script>
    <!-- end Optimizely -->
    
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <nav class="navbar navbar-fixed-top with-shadow">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand logo" href="https://veritrans.co.id"></a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav">
        <li><a class="uppercase" href="https://www.veritrans.co.id/payment_channels.html">Payments</a></li>
        <li><a class="uppercase" href="https://www.veritrans.co.id/product_pricing.html">Product & Pricing</a></li>
        <li><a class="uppercase" href="https://www.veritrans.co.id/promo.html">Promo</a></li>
      </ul>

      <ul class="nav navbar-nav navbar-right">
        <li class="active">
          <a href="http://docs.veritrans.co.id">Docs</a>
        </li>
        <li>
          <a href="https://www.veritrans.co.id/contact.html">Contact</a>
        </li>
        <li>
          <a href="https://blog.veritrans.co.id">Blog</a>
        </li>
        <li>
          <a href="https://veritrans.co.id/career.html">Career</a>
        </li>
        <li>
          <a id="logInHeader" class="uppercase text-bold" href="https://my.veritrans.co.id/login">
            Log In
          </a>
        </li>
        <li>
          <div>
            <a id="signUpHeader" href="https://my.veritrans.co.id/register" class="btn btn-yellow">
               Sign Up
            </a>
          </div>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>
<div class="nav-overlay visible-sm visible-xs"></div>


    <div class="custom-container container">
      <div class="row row-offcanvas row-offcanvas-right">
        <div class="col-xs-6 col-sm-4 col-md-3 sidebar-offcanvas" id="sidebar" role="navigation">
  <div class="documentation-sidebar affix">
    <div class="docs-logo">
      <span>DOCS</span>
    </div>
    <div class="language-toggle"> <a href="../../en/vtdirect/integration_mandiri.html">English</a> / Bahasa Indonesia</div>
    <ul class="sidebar">
      
        <li>
          
            <a class="parent">Langkah Awal</a>
            <b class="caret"></b>
            <ul class="child-menu">
              
                <li class=""><a href="../welcome/index.html">Perkenalan</a></li>
              
                <li class=""><a href="../welcome/preparation.html">Persiapan Awal</a></li>
              
                <li class=""><a href="../welcome/pluginlibrary.html">Library & Plugin</a></li>
              
            </ul>
          
        </li>
      
        <li>
          
            <a class="parent">VT-Web</a>
            <b class="caret"></b>
            <ul class="child-menu">
              
                <li class=""><a href="../vtweb/integration.html">Integrasi</a></li>
              
                <li class=""><a href="../vtweb/other_features.html">Fitur Tambahan</a></li>
              
                <li class=""><a href="../vtweb/going_live.html">Going Live</a></li>
              
            </ul>
          
        </li>
      
        <li>
          
            <a class="parent">VT-Direct</a>
            <b class="caret"></b>
            <ul class="child-menu">
              
                <li class="active"><a href="integration.html">Integrasi</a></li>
              
                <li class=""><a href="other_features.html">Fitur Tambahan</a></li>
              
                <li class=""><a href="other_commands.html">Perintah Lain</a></li>
              
                <li class=""><a href="going_live.html">Going Live</a></li>
              
            </ul>
          
        </li>
      
        <li>
          
            <a class="parent" href="../vtlink/index.html">VT-Link</a>
          
        </li>
      
        <li>
          
            <a class="parent" href="../mobile/index.html">Mobile</a>
          
        </li>
      
        <li>
          
            <a class="parent">Referensi API</a>
            <b class="caret"></b>
            <ul class="child-menu">
              
                <li class=""><a href="../api/introduction.html">Perkenalan</a></li>
              
                <li class=""><a href="../api/methods.html">API Methods</a></li>
              
                <li class=""><a href="../api/status_code.html">Status Kode</a></li>
              
            </ul>
          
        </li>
      
        <li>
          
            <a class="parent" href="../api/test_credentials.html">Testing</a>
          
        </li>
      
        <li>
          
            <a class="parent" href="../dashboard/index.html">Dashboard</a>
          
        </li>
      
        <li>
          
            <a class="parent" href="http://support.veritrans.co.id">FAQ</a>
          
        </li>
      
    </ul>
    <p class="question">
      Anda merasa ada yang kurang dari dokumentasi ini?<br>
      <a href="https://github.com/veritrans/veritrans.github.io">Buka issue atau ikut berkontribusi di Github</a>
    </p>
  </div>
</div><!--/span-->
        <div class="col-xs-12 col-sm-8 col-md-9" id="bodier">
          <p class="pull-right visible-xs">
            <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Menu</button>
          </p>
          <div class="id-vtdirect-integration-mandiri">
            <h2 id="integrasi-vt-direct-mandiri-clickpay">Integrasi VT-Direct (Mandiri Clickpay)</h2>
<hr />

<h5 id="setiap-metode-pembayaran-memiliki-tahapan-integrasi-yang-berbeda-dokumentasi-pada-halaman-ini-bertujuan-untuk-membantu-anda-melakukan-integrasi-vt-direct-dengan-metode-pembayaran-mandiri-clickpay-apabila-butuh-bantuan-silahkan-hubungi-kami-di-supportveritranscoidmailtosupportveritranscoid-email-support-atau-kunjungi-halaman-support-kamihttpsupportveritranscoid-veritrans-support"><em>Setiap metode pembayaran memiliki tahapan integrasi yang berbeda. Dokumentasi pada halaman ini bertujuan untuk membantu anda melakukan integrasi VT-Direct dengan metode pembayaran Mandiri Clickpay. Apabila butuh bantuan, silahkan hubungi kami di <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#064;&#118;&#101;&#114;&#105;&#116;&#114;&#097;&#110;&#115;&#046;&#099;&#111;&#046;&#105;&#100;">&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#064;&#118;&#101;&#114;&#105;&#116;&#114;&#097;&#110;&#115;&#046;&#099;&#111;&#046;&#105;&#100;</a> atau kunjungi <a title="Veritrans Support" href="http://support.veritrans.co.id">halaman support kami</a>.</em></h5>
<hr />
<p><br /></p>

<div class="row">
  <div class="col-md-2 col-sm-3 col-xs-12">
    <div class="thumbnail">
    <a href="integration_cc.html"><img src="../../images/cc_icon_gray.jpg" /></a>
    </div>
  </div>
  <div class="col-md-2 col-sm-3 col-xs-12">
    <div class="thumbnail">
    <a href="integration_mandiri.html"><img src="../../images/mc_icon.jpg" /></a>
    </div>
  </div>
  <div class="col-md-2 col-sm-3 col-xs-12">
    <div class="thumbnail">
    <a href="integration_cimb.html"><img src="../../images/cic_icon_gray.jpg" /></a>
    </div>
  </div>
  <div class="col-md-2 col-sm-3 col-xs-12">
    <div class="thumbnail">
    <a href="integration_va.html"><img src="../../images/va_icon_gray.png" /></a>
    </div>
  </div>
  <div class="col-md-2 col-sm-3 col-xs-12">
    <div class="thumbnail">
    <a href="integration_bripay.html"><img src="../../images/bri_icon_gray.jpg" /></a>
    </div>
  </div>
  <div class="col-md-2 col-sm-3 col-xs-12">
    <div class="thumbnail">
    <a href="integration_tcash.html"><img src="../../images/tcash_icon_gray.jpg" /></a>
    </div>
  </div>
  <div class="col-md-2 col-sm-3 col-xs-12">
    <div class="thumbnail">
    <a href="integration_xltunai.html"><img src="../../images/xltunai_icon_gray.jpg" /></a>
    </div>
  </div>
  <div class="col-md-2 col-sm-3 col-xs-12">
      <div class="thumbnail">
      <a href="integration_mbill.html"><img src="../../images/mbill_icon_grey.jpg" /></a>
      </div>
  </div>
  <div class="col-md-2 col-sm-3 col-xs-12">
    <div class="thumbnail">
    <a href="integration_bbmmoney.html"><img src="../../images/icon_bbmmoney_gray.png" /></a>
    </div>
  </div>
  <div class="col-sm-2 col-xs-12">
      <div class="thumbnail">
      <a href="integration_indomrt.html"><img src="../../images/indomrt_icon_grey.png" /></a>
      </div>
  </div>
  <div class="col-md-2 col-sm-3 col-xs-12">
      <div class="thumbnail">
        <a href="integration_dompetku.html"><img src="../../images/dompetku_icon_gray.png" /></a>
      </div>
  </div>
  <div class="col-md-2 col-sm-3 col-xs-12">
      <div class="thumbnail">
        <a href="../../en/vtdirect/integration_mandiriecash.html"><img src="../../images/mandiriecash_icon_grey.png" /></a>
      </div>
  </div>
</div>
<hr />

<p><br />
Mandiri Clickpay merupakan salah satu fitur pembayaran dari mandiri debit. Metode ini memungkinkan pelanggan melakukan transaksi pembayaran dengan memasukkan 16 digit nomor kartu mandiri debit dan Token PIN Mandiri sebagai validasi transaksi. </p>

<p>Untuk mengaktifkan metode pembayaran Mandiri Clickpay (otomatis aktif pada mode Sandbox), anda perlu menghubungi sales representative Veritrans.
<br /><br /></p>

<h3 id="alur-proses-transaksi">Alur Proses Transaksi</h3>

<p><img alt="Mandiri Flow" class="img-responsive img-thumbnail" src="../../images/mandiri_flow.png" />
<br /><br /></p>

<h3 id="tahapan-integrasi-vt-direct-mandiri-clickpay">Tahapan Integrasi VT-Direct Mandiri Clickpay</h3>

<ol>
  <li>Membuat Form</li>
  <li>Charge Transaksi</li>
  <li>Status Transaksi
<br /><br /></li>
</ol>

<!-- Nav tabs -->
<ul class="nav nav-tabs">
  <li class="active"><a href="#form-mandiri" data-toggle="tab"><span>Tahap 1</span>Membuat Form</a></li>
  <li><a href="#charge-mandiri" data-toggle="tab"><span>Tahap 2</span>Charge Transaksi</a></li>
  <li><a href="#status-mandiri" data-toggle="tab"><span>Tahap 3</span>Status Transaksi</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="form-mandiri">
    <!-- step 1-->
    <!-- satu -->
    <p><br /></p>

    <h2 id="membuat-form">Membuat Form</h2>

    <p>Pada tahap ini, kita akan mencoba membuat form transaksi Mandiri Clickpay pada file <code>form_vtdirect_mandiri.html</code>. Kami telah mempersiapkan aset gambar/icon untuk mempermudah pembuatan form yang dapat anda download di <a href="https://github.com/veritrans/logo">sini</a>. Form Mandiri Clickpay harus memiliki <em>field</em> seperti gambar dibawah ini :
<br /><br />
  <img alt="Mandiri Form" class="img-responsive img-thumbnail" src="../../images/mandiri_form.png" />
<br /><br /></p>

    <table>
      <thead>
        <tr>
          <th>Nama Field</th>
          <th>Tipe Data</th>
          <th style="text-align: center">Panjang</th>
          <th>Keterangan</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Nomor Kartu Debit</td>
          <td>String</td>
          <td style="text-align: center">16</td>
          <td>Nomor kartu Mandiri</td>
        </tr>
        <tr>
          <td>Input-1</td>
          <td>String</td>
          <td style="text-align: center">10</td>
          <td>10 digit terakhir nomor kartu</td>
        </tr>
        <tr>
          <td>Input-2</td>
          <td>String</td>
          <td style="text-align: center">16</td>
          <td>Nilai transaksi</td>
        </tr>
        <tr>
          <td>Input-3</td>
          <td>String</td>
          <td style="text-align: center">5</td>
          <td>5 digit nomor acak yang diberikan ke pelanggan</td>
        </tr>
        <tr>
          <td>Token Response</td>
          <td>String</td>
          <td style="text-align: center">6</td>
          <td>Angka yang diberikan oleh mesin token pelanggan</td>
        </tr>
      </tbody>
    </table>

    <p><br />
Berikut adalah contoh form Mandiri Clickpay di file <code>form_vtdirect_mandiri.html</code>:
<br /><br /></p>

<pre><code class="highlight html"><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Contoh Form VT-Direct<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  
  <span class="nx">updateInput1</span><span class="p">();</span>

  <span class="nx">$</span><span class="p">(</span><span class="s1">'#card-number'</span><span class="p">).</span><span class="nx">keyup</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">updateInput1</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="nx">$</span><span class="p">(</span><span class="s1">'#input3'</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">random5digit</span><span class="p">());</span>

  <span class="kd">function</span> <span class="nx">updateInput1</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">ccNumber</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#card-number'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">ccNumber</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">9</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'#input1'</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">ccNumber</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">ccNumber</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">ccNumber</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">10</span><span class="p">));</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">paddy</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">pad_char</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">c</span> <span class="o">!==</span> <span class="s1">'undefined'</span> <span class="p">?</span> <span class="nx">c</span> <span class="p">:</span> <span class="s1">'0'</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">pad</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="nx">p</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="nx">pad_char</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">pad</span> <span class="o">+</span> <span class="nx">n</span><span class="p">).</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="nx">pad</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">random5digit</span><span class="p">(){</span>
    <span class="k">return</span> <span class="nx">paddy</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">99999</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span> 
  <span class="p">}</span>

<span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Transaksi Mandiri Clickpay<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;ol&gt;</span>
      <span class="nt">&lt;li&gt;</span>Aktifkan Mandiri Token anda<span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span>Masukkan password Mandiri Token<span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span>Tekan 3 ketika layar tampilan Mandiri Token adalah APPLI<span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span>Masukkan "Input 1": 10 digit terakhir nomor kartu kredit anda<span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span>Masukkan "Input 2": Jumlah transaksi<span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span>Masukkan "Input 3": Request Number<span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span>Masukkan respon dari Mandiri Token anda ke "Challenge Token"<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ll&gt;</span>

    <span class="nt">&lt;hr</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"checkout_mandiri.php"</span> <span class="na">method=</span><span class="s">"POST"</span> <span class="na">id=</span><span class="s">"payment-form"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;label&gt;</span>Card Number<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"card-number"</span> <span class="na">name=</span><span class="s">"card-number"</span> <span class="na">size=</span><span class="s">"20"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"4111111111111111"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
      
      <span class="nt">&lt;label&gt;</span>Input 1<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"input1"</span> <span class="na">name=</span><span class="s">"input1"</span> <span class="na">size=</span><span class="s">"10"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">readonly=</span><span class="s">"readonly"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>

      <span class="nt">&lt;label&gt;</span>Input 2<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"input2"</span> <span class="na">name=</span><span class="s">"input2"</span> <span class="na">size=</span><span class="s">"20"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"200500"</span> <span class="na">readonly=</span><span class="s">"readonly"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>

      <span class="nt">&lt;label&gt;</span>Input 3<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"input3"</span> <span class="na">name=</span><span class="s">"input3"</span> <span class="na">size=</span><span class="s">"5"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">readonly=</span><span class="s">"readonly"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>

      <span class="nt">&lt;label&gt;</span>Challenge Token<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"token"</span> <span class="na">name=</span><span class="s">"token"</span> <span class="na">size=</span><span class="s">"10"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"000000"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>

      <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"submit-button"</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Pay<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;/form&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
</code></pre>

    <p><br />
Form di atas menggunakan library jQuery dan dapat anda modifikasi sesuai kebutuhan. Saat form pertama kali ditampilkan, <em>field</em> input 2 dan input 3 sudah otomatis terisi. Input 2 merupakan nilai total transaksi, input 3 merupakan 5 digit numeric yang di generate secara acak oleh Javascript.</p>

    <p>Javascript juga memungkinkan field input 1 otomatis terisi ketika pelanggan anda memasukkan nomor kartu debit Mandiri. Pelanggan anda tinggal menggunakan token Mandiri untuk mengisi field challenge token dan informasi akan disubmit ke <code>checkout_mandiri.php</code>. File ini berisi implementasi charge transaksi menggunakan Mandiri clickpay yang akan dibahas selanjutnya.</p>

    <p>Untuk mempermudah proses transaksi, kami sangat menyarankan agar petunjuk transaksi Mandiri Clickpay anda sampaikan dengan jelas pada halaman form.</p>
  </div>
  <div class="tab-pane" id="charge-mandiri">
    <!-- step 2-->
    <!-- dua -->
    <p><br /></p>

    <h2 id="charge-transaksi">Charge Transaksi</h2>

    <p>Untuk melakukan charge transaksi menggunakan Mandiri ClickPay, beberapa langkah harus dilakukan sebagai berikut:</p>

    <ul>
      <li><code>payment_type</code> harus di-set menjadi <code>mandiri_clickpay</code></li>
      <li>
        <p>JSON object baru harus ditambahkan, dengan nama <code>mandiri_clickpay</code>, dan mempunyai nama/value pasangan sebagai berikut:</p>

        <ul>
          <li>"card_number" → nomor kartu debit</li>
          <li>"input1" → 10 angka terakhir dari nomor kartu debit</li>
          <li>"input2" → jumlah total transaksi</li>
          <li>"input3" → 5 digit angka acak</li>
          <li>"token" → token yang diisi oleh customer</li>
        </ul>
      </li>
    </ul>

    <p>Beberapa informasi dari form <code>form_vtdirect_mandiri.html</code> dapat diakses pada file ini, seperti: nomor kartu mandiri, input 1, input 2, input 3, dan challenge token.</p>

    <p>Untuk melakukan charge transaksi Mandiri Clickpay, kita dapat menggunakan library Veritrans-PHP. Berikut adalah contoh implementasi charge transaksi pada file <code>checkout_mandiri.php</code>:
<br /><br /></p>

<pre><code class="highlight php"><span class="cp">&lt;?php</span>

<span class="k">include_once</span><span class="p">(</span><span class="s1">'Veritrans.php'</span><span class="p">);</span>

<span class="c1">// TODO: change with your actual server_key that can be found on Merchant Administration Portal (MAP)
</span><span class="nx">Veritrans_Config</span><span class="o">::</span><span class="nv">$serverKey</span> <span class="o">=</span> <span class="s2">"&lt; Your Server Key&gt;"</span><span class="p">;</span>
<span class="nx">Veritrans_Config</span><span class="o">::</span><span class="nv">$isProduction</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="nv">$card_number</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'card-number'</span><span class="p">];</span>
<span class="nv">$input1</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'input1'</span><span class="p">];</span>
<span class="nv">$input2</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'input2'</span><span class="p">];</span>
<span class="nv">$input3</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'input3'</span><span class="p">];</span>
<span class="nv">$token</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'token'</span><span class="p">];</span>

<span class="nv">$transaction_details</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'order_id'</span>    <span class="o">=&gt;</span> <span class="nb">rand</span><span class="p">(),</span>
  <span class="s1">'gross_amount'</span>  <span class="o">=&gt;</span> <span class="nv">$input2</span>
<span class="p">);</span>

<span class="nv">$customer_details</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'first_name'</span>    <span class="o">=&gt;</span> <span class="s2">"Andri"</span><span class="p">,</span>
    <span class="s1">'last_name'</span>     <span class="o">=&gt;</span> <span class="s2">"Litani"</span><span class="p">,</span>
    <span class="s1">'email'</span>         <span class="o">=&gt;</span> <span class="s2">"andri@litani.com"</span><span class="p">,</span>
    <span class="s1">'phone'</span>         <span class="o">=&gt;</span> <span class="s2">"081122334455"</span>
    <span class="p">);</span>

<span class="c1">// Data yang akan dikirim untuk request charge transaction dengan Mandiri Clickpay.
</span><span class="nv">$transaction_data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'payment_type'</span>      <span class="o">=&gt;</span> <span class="s1">'mandiri_clickpay'</span><span class="p">,</span>
  <span class="s1">'mandiri_clickpay'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
      <span class="s1">'card_number'</span> <span class="o">=&gt;</span> <span class="nv">$card_number</span><span class="p">,</span>
      <span class="s1">'input1'</span> <span class="o">=&gt;</span> <span class="nv">$input1</span><span class="p">,</span>
      <span class="s1">'input2'</span> <span class="o">=&gt;</span> <span class="nv">$input2</span><span class="p">,</span>
      <span class="s1">'input3'</span> <span class="o">=&gt;</span> <span class="nv">$input3</span><span class="p">,</span>
      <span class="s1">'token'</span> <span class="o">=&gt;</span> <span class="nv">$token</span>
    <span class="p">),</span>
  <span class="s1">'transaction_details'</span> <span class="o">=&gt;</span> <span class="nv">$transaction_details</span><span class="p">,</span>
  <span class="s1">'customer_details'</span> <span class="o">=&gt;</span> <span class="nv">$customer_details</span>
  <span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nx">Veritrans_VtDirect</span><span class="o">::</span><span class="na">charge</span><span class="p">(</span><span class="nv">$transaction_data</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>

    <p><br />
Pada contoh di atas, kita menggunakan data Mandiri Clickpay, transaksi, dan pelanggan sebagai parameter charge transaksi. Anda sebenarnya dapat menambahkan data lain saat charge transaksi, seperti: alamat pelanggan, alamat pengiriman, dan informasi barang. Untuk menambahkan data ini, anda dapat melihat <a href="../api/methods.html">Referensi API - API Methods</a>.</p>

    <p>Ketika transaksi selesai, pelanggan anda dapat kembali ke website anda. Untuk melakukan hal ini, anda perlu mengisi konfigurasi callback URL di MAP (Merchant Administration Portal), silahkan melihat menu <a href="/id/welcome/preparation.htm">langkah awal</a> untuk informasi lebih lengkap.
<br /><br /></p>

    <h3 id="kesalahan-dalam-charge-transaksi">Kesalahan dalam Charge Transaksi</h3>

    <p>Pada beberapa kasus, charge transaksi VT-Direct bisa gagal. Veritrans akan mengembalikan pesan error ketika terjadi kegagalan. Penyebab gagalnya charge transaksi VT-Direct dapat dilihat dari status code yang ada di dalam pesan error, status code yang umumnya muncul adalah:</p>

    <table>
      <thead>
        <tr>
          <th>Kode Error</th>
          <th>Keterangan</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>400</code> Validation error</td>
          <td>Format atau konten data transaksi tidak valid. Contoh: Salah tipe variabel, metode pembayaran tidak valid.</td>
        </tr>
        <tr>
          <td><code>401</code> Access Denied</td>
          <td>Client atau server key tidak valid.</td>
        </tr>
        <tr>
          <td><code>402</code> Access Denied</td>
          <td>Merchant tidak memiliki izin menggunakan metode pembayaran tertentu.</td>
        </tr>
        <tr>
          <td><code>406</code> Duplicate Order ID</td>
          <td>Order ID telah digunakan dan dibayar sebelumnya.</td>
        </tr>
        <tr>
          <td><code>410</code> Account Inactive</td>
          <td>Akun merchant tidak aktif dalam waktu lama</td>
        </tr>
      </tbody>
    </table>

    <p><br />
Daftar status code lengkap dapat dilihat di <a href="../api/status_code.html">Referensi API - Status Code</a>.</p>

    <p>Ketika proses charge transaksi berhasil dilakukan, anda dapat melihat status transaksi. Cara melihat status transaksi akan dibahas pada langkah selanjutnya.</p>

  </div>
  <div class="tab-pane" id="status-mandiri">
    <!-- step 3-->
    <!-- tiga -->
    <p><br /></p>

    <h2 id="status-transaksi">Status Transaksi</h2>

    <p>Pada saat charge transaksi berhasil, status transaksi tersebut akan menjadi success. Anda dapat mengetahui perubahan status transaksi melalui MAP.</p>

    <p>Status pada MAP saat pembayaran sudah selesai dilakukan adalah seperti gambar berikut:
<br /><br />
  <img alt="Mandiri Clickpay MAP Settlement" class="img-responsive img-thumbnail" src="../../images/mandiri-clickpay-settlement.png" />
<br /><br />
Status pada MAP apabila pembayaran Mandiri Clickpay gagal adalah seperti gambar berikut:
<br /><br />
  <img alt="Mandiri Clickpay MAP Failure" class="img-responsive img-thumbnail" src="../../images/Mandiri-clickpay-failure.png" />
<br /><br /></p>

    <p>Server Veritrans akan mengembalikan respon untuk setiap charge transaksi dalam bentuk JSON. Library Veritrans-PHP akan melakukan konversi JSON menjadi object PHP secara otomatis. Contoh respon JSON yang dikembalikan oleh veritrans adalah sebagai berikut:
<br /><br /></p>

<pre><code class="highlight php">$result = array(
    "transaction_id" =&gt; "cddd6c1f-3b03-4c89-b0a8-0ea7dccf5217",
    "order_id" =&gt; "201404031721",
    "gross_amount" =&gt; "10000.00",
    "payment_type" =&gt; "mandiri_clickpay",
    "transaction_time" =&gt; "2014-04-03 17:21:46",
    "transaction_status" =&gt; "settlement",
    "status_code" =&gt; "200",
    "approval_code" =&gt; "1405402217483",
    "masked_card":"411111-1111"
    "status_message" =&gt; "Success, Mandiri Clickpay transaction is successful"
);
</code></pre>

    <p><br />
Salah satu informasi yang paling penting dalam respon JSON adalah transaction status. Dua transaction status penting pada respon charge transaksi Mandiri Clickpay:</p>

    <ul>
      <li><strong>settlement</strong>: Transaksi berhasil.</li>
      <li><strong>deny</strong>: Transaksi ditolak oleh bank.</li>
    </ul>

    <p>Anda dapat menambahkan kode PHP berikut pada bagian akhir file <code>checkout_mandiri.php</code> untuk menyampaikan status transaksi pada pelanggan anda:
<br /><br /></p>

<pre><code class="highlight php"><span class="cp">&lt;?php</span>
<span class="k">include_once</span><span class="p">(</span><span class="s1">'Veritrans.php'</span><span class="p">);</span>

<span class="o">...</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nx">Veritrans_VtDirect</span><span class="o">::</span><span class="na">charge</span><span class="p">(</span><span class="nv">$transaction_data</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">transaction_status</span> <span class="o">==</span> <span class="s2">"settlement"</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">//success
</span>  <span class="k">echo</span> <span class="s2">"Transaksi Mandiri Clickpay berhasil. &lt;br /&gt;"</span><span class="p">;</span>
  <span class="k">echo</span> <span class="s2">"Transaction status untuk order id "</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">order_id</span><span class="o">.</span><span class="s2">": "</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">transaction_status</span><span class="p">;</span>
  <span class="k">echo</span> <span class="s2">"&lt;h3&gt;Detail transaksi:&lt;/h3&gt;"</span><span class="p">;</span>
  <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">transaction_status</span> <span class="o">==</span> <span class="s2">"deny"</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">//deny
</span>  <span class="k">echo</span> <span class="s2">"Transaksi Mandiri Clickpay Gagal. &lt;br /&gt;"</span><span class="p">;</span>
  <span class="k">echo</span> <span class="s2">"Transaction status untuk order id "</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">order_id</span><span class="o">.</span><span class="s2">": "</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">transaction_status</span><span class="p">;</span>
  <span class="k">echo</span> <span class="s2">"&lt;h3&gt;Detail transaksi:&lt;/h3&gt;"</span><span class="p">;</span>
  <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="c1">//error
</span>  <span class="k">echo</span> <span class="s2">"Terjadi kesalahan pada data transaksi yang dikirim.&lt;br /&gt;"</span><span class="p">;</span>
  <span class="k">echo</span> <span class="s2">"&lt;h3&gt;Result:&lt;/h3&gt;"</span><span class="p">;</span>
  <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre>

    <p><br />
Sampai di sini, proses pembayaran Mandiri Clickpay telah selesai. Jika nilai <code>transaction_status</code> adalah <code>settlement</code>, nominal transaksi akan ditambahkan ke bagian settlement akun anda. Selain menyampaikan status transaksi ke pelanggan, anda juga dapat menambah kode di atas untuk meng-update database terkait, misalnya menandai bahwa transaksi dengan <code>order_id</code> tersebut telah terbayar. </p>

    <p>Status transaksi juga dapat anda ketahui di Merchant Administration Portal(MAP). Anda perlu untuk login ke MAP untuk melihat detail informasi transaksi tersebut. Alternatif lain untuk melihat status transaksi adalah menggunakan perintah <a href="other_commands.html">get status</a>.</p>

  </div>
</div>


            <div class="pagination">
              <ul><li class="left">« Sebelumnya: <a href="../vtweb/going_live.html">VT-Web : Going Live</a></li><li class="right">Selanjutnya: <a href="other_features.html">VT-Direct : Fitur Tambahan</a> »</li></ul>
            </div>
          </div>
        </div><!--/span-->
      </div><!--/row-->
    </div><!--/.container-->

    <footer>
  <div class="container">
    <div class="row footer-content">
      <div class="col-lg-3 col-md-3 col-sm-4 col-xs-6">
        <h4 class="text-gray">Veritrans</h4>
        <ul>
          <li>
            <a href="https://www.veritrans.co.id/">Home</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/payment_channels.html">Payment Channels</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/product_pricing.html">Product &amp; Pricing</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/promo.html">Promo</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/case_study.html">Case Study</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/aegis.html">Aegis</a>
          </li>
        </ul>
        <!-- <h4 class="text-gray">Shopping</h4>
        <ul>
          <li>
            <a href="event.html">Promo</a>
          </li>
          <li>
            <a href="directory.html">Directory</a>
          </li>
        </ul> -->
      </div>
      <div class="col-lg-2 col-md-3 col-sm-4 col-xs-6">
        <h4 class="text-gray">Devs</h4>
        <ul>
          <li>
            <a href="http://docs.veritrans.co.id">Documentations</a>
          </li>
        </ul>
        <h4 class="text-gray about-footer">About</h4>
        <ul>
          <li>
            <a href="https://www.veritrans.co.id/about.html">Team</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/career.html">Career</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/press.html">Press</a>
          </li>
        </ul>
      </div>
      <div class="col-lg-2 col-md-3 col-sm-4 col-xs-6">
        <h4 class="text-gray">Help</h4>
        <ul>
          <li>
            <a href="https://blog.veritrans.co.id">Blog</a>
          </li>
          <li>
            <a href="http://support.veritrans.co.id">FAQ</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/contact.html">Contact</a>
          </li>
          <li>
            <a href="https://www.veritrans.co.id/privacy_policy.html">Privacy Policy</a>
          </li>
        </ul>
      </div>
      <div class="col-lg-2 col-md-3 col-sm-4 col-xs-6 find-us-footer">
        <h4 class="text-gray">Find Us</h4>
        <ul>
          <li>
            <a href="https://www.facebook.com/veritransID">Facebook</a>
          </li>
          <li>
            <a href="https://twitter.com/veritransid">Twitter</a>
          </li>
          <li>
            <a href="https://instagram.com/veritransid">Instagram</a>
          </li>
          <li>
            <a href="https://www.linkedin.com/company/pt-midtrans">LinkedIn</a>
          </li>
          <li>
            <a href="https://www.youtube.com/channel/UCtPNqTFgR1aXpEFA9B_djnw">YouTube</a>
          </li>
        </ul>
      </div>
      <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
        <h4 class="text-gray with-subtitle">
          Subscribe
        </h4>
        <small>
          tips &amp; berita terbaru seputar eCommerce
        </small>
        <div id="mc_embed_signup">
          <form action="//veritrans.us9.list-manage.com/subscribe/post?u=4ed5f88335112571098a4a51c&amp;id=12315939d2" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
            <div id="mc_embed_signup_scroll">
              <div class="mc-field-group">
                  <input type="email" value="" name="EMAIL" class="required email search-input" id="mce-EMAIL" placeholder="EMAIL" pattern="/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/" required/>
              </div>
              <div id="mce-responses" class="clear">
                  <div class="response" id="mce-error-response" style="display:none"></div>
                  <div class="response" id="mce-success-response" style="display:none"></div>
            </div>   
              <div style="position: absolute; left: -5000px;"><input type="text" name="b_4ed5f88335112571098a4a51c_12315939d2" tabindex="-1" value=""></div>
              <div class="clear"><input type="submit" value="submit" name="subscribe" id="mc-embedded-subscribe" class="btn btn-search"/></div>
              </div>
          </form>
        </div>
      </div>
    </div>
    <div class="copyright text-center">
      <br/>
      &copy; 2015 PT Midtrans
      <br/>
      <br/>
    </div>
  </div>
</footer>
<div class="modal fade" id="underConstruction" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title text-center" id="myModalLabel">Sorry!</h4>
      </div>
      <div class="modal-body text-center">
        We're still building this web page.<br/>
        Be the first to know when it's done by <a class="dotted" href="https://veritrans.us9.list-manage.com/subscribe/post?u=4ed5f88335112571098a4a51c&id=12315939d2">subscribing</a> to our newsletter.
      </div>
    </div>
  </div>
</div>
<script language="javascript" type="text/javascript">
  function popitup(url) {
    newwindow=window.open(url,'name','height=430,width=540');
    if (window.focus) {newwindow.focus()}
    return false;
  }
</script>
    <script src="../../javascripts/bootstrap.min.js" type="text/javascript"></script>
<script src="../../javascripts/dropdown.js" type="text/javascript"></script>
<script src="../../javascripts/tab_custom.js" type="text/javascript"></script>
<script src="../../javascripts/useragent.js" type="text/javascript"></script>
<script src="../../javascripts/mixpanel_tracking.js" type="text/javascript"></script>
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-32232768-12', 'auto');
      ga('send', 'pageview');
    </script>
    <script>
      $(document).ready(function() {
        $('[data-toggle=offcanvas]').click(function() {
          $('.row-offcanvas').toggleClass('active');
        });
        $(function () {
          $('[data-toggle="tooltip"]').tooltip();
        });

        mixpanel.track('id docs page viewed',{
          'url' : location.href
        });
      });
    </script>
  </body>
</html><!-- Veritrans.3.0-20150423 -->
