<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Veritrans API Documentation. Payment Gateway Indonesia, transaksi online lebih aman, mudah, cepat! Veritrans memberi solusi sistem payment gateway terbaik untuk e-commerce di Indonesia.">
    <meta name="keywords" content="Veritrans, Veritrans Indonesia, payment gateway indonesia, Pembayaran Online Indonesia, online payment Indonesia, sistem transaksi online"> 
    <link href="../../stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    <title>Docs - Veritrans Indonesia</title>
		<link rel="shortcut icon" href="/favicon.ico"/>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="header navbar navbar-default navbar-fixed-top">
      <div class="custom-container">
        <div class="col-md-3 col-sm-12 navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <h2 class="logo"><a href="https://www.veritrans.co.id/" title="Home"><span>Veritrans</span></a></h2>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="https://www.veritrans.co.id/whatwedo.html" title="What We Do">what we do</a></li>
            <li><a href="https://www.veritrans.co.id/product.html" title="Our Online Payment Products">product</a></li>
            
            <li class="dropdown hidden-xs hidden-sm hidden-md">
              <a href="about.html">about <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="https://www.veritrans.co.id/team.html" title="Team">team</a></li>
                <li><a href="https://www.veritrans.co.id/press.html" title="Press">press</a></li>
                <li><a href="https://www.veritrans.co.id/career.html" title="Career at Veritrans">career</a></li>
                <li><a href="https://www.veritrans.co.id/contact.html" title="Contact Us">contact</a></li>
                <li><a href="http://support.veritrans.co.id/" title="FAQ & How To">FAQ</a></li>
              </ul>
            </li>
            <li class="dropdown hidden-lg">
              <a href="#">about <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="https://www.veritrans.co.id/about.html" title="Team">about us</a></li>
                <li><a href="https://www.veritrans.co.id/team.html" title="Team">team</a></li>
                <li><a href="https://www.veritrans.co.id/press.html" title="Press">press</a></li>
                <li><a href="https://www.veritrans.co.id/career.html" title="Career at Veritrans">career</a></li>
                <li><a href="https://www.veritrans.co.id/contact.html" title="Contact Us">contact</a></li>
                <li><a href="http://support.veritrans.co.id/" title="FAQ & How To">FAQ</a></li>
              </ul>
            </li>
            <!-- <li><a href="http://docs.veritrans.co.id" title="Product Documentations">docs</a></li> -->
            <li class="dropdown">
              <a href="#">developer <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="https://www.veritrans.co.id/sandbox.html">sandbox</a></li>
                <li><a href="http://docs.veritrans.co.id/">documentation</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#">community <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="http://blog.veritrans.co.id" title="Blog, News and Press Release">blog</a></li>
                <li><a href="https://www.veritrans.co.id/merchants.html" title="Merchants">merchants</a></li>
                <li><a href="https://www.veritrans.co.id/why-veritrans.html" title="Why Veritrans">why veritrans</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right register-login">
            <li class="pull-left"><a href="https://my.sandbox.veritrans.co.id/register" class="register">sign up</a></li>
            <li class="pull-left"><a href="https://my.veritrans.co.id/login">sign in</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

    <div class="custom-container">
      <div class="row row-offcanvas row-offcanvas-right">
        <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
	<div class="documentation-sidebar">
		<div class="docs-logo">
			<span>DOCS</span>
		</div>
		<div class="language-toggle"> <a href="../../vtdirect/integration_cc.html">English</a> / Bahasa Indonesia</div>
		<ul class="sidebar">
			
			<li>
        
          <a class="parent" href="../welcome/welcome.html">Selamat Datang</a>
        
			</li>
			
			<li>
        
          <a class="parent">VT-Web</a>
          <b class="caret"></b>
          <ul class="child-menu">
            
            <li class=""><a href="../vtweb/introduction.html">Perkenalan</a></li>
            
            <li class=""><a href="../vtweb/getting_started.html">Langkah Awal</a></li>
            
            <li class=""><a href="../vtweb/integration.html">Integrasi</a></li>
            
            <li class=""><a href="../vtweb/other_features.html">Fitur Tambahan</a></li>
            
            <li class=""><a href="../vtweb/going_live.html">Going Live</a></li>
            
          </ul>
        
			</li>
			
			<li>
        
          <a class="parent">VT-Direct</a>
          <b class="caret"></b>
          <ul class="child-menu">
            
            <li class=""><a href="introduction.html">Perkenalan</a></li>
            
            <li class=""><a href="getting_started.html">Langkah Awal</a></li>
            
            <li class="active"><a href="integration.html">Integrasi</a></li>
            
            <li class=""><a href="other_features.html">Fitur Tambahan</a></li>
            
            <li class=""><a href="other_commands.html">Perintah Lain</a></li>
            
            <li class=""><a href="going_live.html">Going Live</a></li>
            
          </ul>
        
			</li>
			
			<li>
        
          <a class="parent">Referensi API</a>
          <b class="caret"></b>
          <ul class="child-menu">
            
            <li class=""><a href="../sandbox/introduction.html">Perkenalan</a></li>
            
            <li class=""><a href="../sandbox/charge.html">Charge Transaksi</a></li>
            
            <li class=""><a href="../sandbox/installment.html">Cicilan</a></li>
            
            <li class=""><a href="../sandbox/bin.html">BIN Promo</a></li>
            
            <li class=""><a href="../sandbox/other_features.html">Fitur Tambahan</a></li>
            
            <li class=""><a href="../sandbox/other_commands.html">Perintah Lain</a></li>
            
            <li class=""><a href="../sandbox/card_list.html">Daftar Kartu Uji Coba</a></li>
            
            <li class=""><a href="../sandbox/status_code.html">Status Kode</a></li>
            
          </ul>
        
			</li>
			
			<li>
        
          <a class="parent" href="../plugin/plugin.html">Plugin & Mobile Apps</a>
        
			</li>
			
			<li>
        
          <a class="parent" href="http://support.veritrans.co.id">FAQ</a>
        
			</li>
			
		</ul>
		<p class="question">
            Anda merasa ada yang kurang dari dokumentasi ini?<br>
            <a href="https://github.com/veritrans/veritrans.github.io">Buka issue atau ikut berkontribusi di Github</a>
        </p>
	</div>
</div><!--/span-->
        <div class="col-xs-12 col-sm-7" id="bodier">
          <p class="pull-right visible-xs">
            <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Menu</button>
          </p>
          <div class="id-vtdirect-integration-cc">
            <h2 id="integrasi-vt-direct-kartu-kredit">Integrasi VT-Direct (Kartu Kredit)</h2>
<hr />

<h5 id="setiap-metode-pembayaran-memiliki-tahapan-integrasi-yang-berbeda-dokumentasi-pada-halaman-ini-bertujuan-untuk-membantu-anda-melakukan-integrasi-vt-direct-dengan-metode-pembayaran-kartu-kredit-apabila-butuh-bantuan-silahkan-hubungi-kami-di-supportveritranscoidmailtosupportveritranscoid-email-support-atau-kunjungi-halaman-support-kamihttpsupportveritranscoid-veritrans-support"><em>Setiap metode pembayaran memiliki tahapan integrasi yang berbeda. Dokumentasi pada halaman ini bertujuan untuk membantu anda melakukan integrasi VT-Direct dengan metode pembayaran kartu kredit. Apabila butuh bantuan, silahkan hubungi kami di <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#064;&#118;&#101;&#114;&#105;&#116;&#114;&#097;&#110;&#115;&#046;&#099;&#111;&#046;&#105;&#100;">&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#064;&#118;&#101;&#114;&#105;&#116;&#114;&#097;&#110;&#115;&#046;&#099;&#111;&#046;&#105;&#100;</a> atau kunjungi <a title="Veritrans Support" href="http://support.veritrans.co.id">halaman support kami</a>.</em></h5>
<hr />
<p><br /></p>

<div class="row">
  <div class="col-sm-2 col-xs-12">
    <div class="thumbnail">
    <a href="integration_cc.html"><img src="../../images/cc_icon.jpg" /></a>
    </div>
  </div>
  <div class="col-sm-2 col-xs-12">
    <div class="thumbnail">
    <a href="integration_mandiri.html"><img src="../../images/mc_icon_gray.jpg" /></a>
    </div>
  </div>
  <div class="col-sm-2 col-xs-12">
    <div class="thumbnail">
    <a href="integration_cimb.html"><img src="../../images/cic_icon_gray.jpg" /></a>
    </div>
  </div>
  <div class="col-sm-2 col-xs-12">
    <div class="thumbnail">
    <a href="integration_va.html"><img src="../../images/va_icon_gray.png" /></a>
    </div>
  </div>
  <div class="col-sm-2 col-xs-12">
    <div class="thumbnail">
    <a href="integration_bripay.html"><img src="../../images/bri_icon_gray.jpg" /></a>
    </div>
  </div>
  <div class="col-sm-2 col-xs-12">
    <div class="thumbnail">
    <a href="integration_tcash.html"><img src="../../images/tcash_icon_gray.jpg" /></a>
    </div>
  </div>
  <div class="col-sm-2 col-xs-12">
    <div class="thumbnail">
    <a href="integration_xltunai.html"><img src="../../images/xltunai_icon_gray.jpg" /></a>
    </div>
  </div>
</div>
<hr />
<p><br /></p>

<h3 id="tahapan-integrasi-vt-direct-kartu-kredit">Tahapan Integrasi VT-Direct Kartu Kredit</h3>

<ol>
  <li>Mendapatkan Token</li>
  <li>Melakukan Charge Transaksi</li>
  <li>Status Transaksi
<br /><br /></li>
</ol>

<!-- Nav tabs -->
<ul class="nav nav-tabs">
  <li class="active"><a href="#step1" data-toggle="tab"><span>Tahap 1</span>Mendapatkan Token</a></li>
  <li><a href="#step2" data-toggle="tab"><span>Tahap 2</span>Melakukan Charge Transaksi</a></li>
  <li><a href="#step3" data-toggle="tab"><span>Tahap 3</span>Status Transaksi</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="step1">
    <!-- step 1-->
    <!-- satu -->
    <p><br /></p>

    <h2 id="mendapatkan-token">Mendapatkan Token</h2>

    <p><img alt="vtdirect_intro1" class="img-responsive img-thumbnail" src="../../images/vtdirect_introduction_1.png" /></p>

    <p><em>Proses VT-Direct (langkah 1 - 3)</em>
<br /><br />
Tahap ini mencakup langkah 1-3 dari diagram alur proses VT-Direct. Pada tahap ini, kita akan mencoba memperoleh token ID untuk suatu transaksi. Token ID adalah nilai unik yang berelasi dengan informasi pembayaran pelanggan (nomor kartu kredit, expiry date, CVV) pada suatu transaksi. Anda memerlukan token ID untuk melakukan charge transaksi pada tahap selanjutnya.</p>

    <p>Untuk mendapatkan token, ada tiga komponen yang harus dipersiapkan:</p>

    <ol>
      <li><a href="#form-pembayaran">Form Pembayaran</a></li>
      <li><a href="#javascript">Library Javascript Veritrans</a></li>
      <li><a href="#script-tambahan">Script Tambahan</a></li>
    </ol>

    <p><br /></p>

    <h3 id="form-pembayaran">Form Pembayaran</h3>

    <p>Form pembayaran akan kita simpan pada file HTML bernama <code>form_vtdirect.html</code>. Contoh yang akan diberikan masih sangat sederhana dan dapat dimodifikasi sesuai kebutuhan anda.</p>

    <p>Pada metode pembayaran kartu kredit, setidaknya ada 4 field yang harus ada pada form:</p>

    <ol>
      <li>Nomor kartu kredit</li>
      <li>Bulan kadaluarsa kartu kredit</li>
      <li>Tahun kadaluarsa kartu kredit</li>
      <li>CVV (Card Verification Value)</li>
    </ol>

    <p>Berikut adalah contoh form pada file <code>form_vtdirect.html</code>:
<br /><br /></p>

<pre><code class="highlight html"><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Contoh Form VT-Direct<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Checkout<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"checkout.php"</span> <span class="na">method=</span><span class="s">"POST"</span> <span class="na">id=</span><span class="s">"payment-form"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;label&gt;</span>Card Number<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"card-number"</span> <span class="na">size=</span><span class="s">"20"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"4811111111111114"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>

      <span class="nt">&lt;label&gt;</span>Expiration (MM/YYYY)<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"card-expiry-month"</span> <span class="na">size=</span><span class="s">"2"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"01"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;span&gt;</span> / <span class="nt">&lt;/span&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"card-expiry-year"</span> <span class="na">size=</span><span class="s">"4"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"2020"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
      
      <span class="nt">&lt;label&gt;</span>CVV<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"card-cvv"</span> <span class="na">size=</span><span class="s">"3"</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">value=</span><span class="s">"123"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
      
      <span class="c">&lt;!-- Additional Field --&gt;</span>
      <span class="nt">&lt;label&gt;</span>Harga<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"price"</span> <span class="na">name=</span><span class="s">"price"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"200500"</span><span class="nt">/&gt;</span>

      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"token-id"</span> <span class="na">name=</span><span class="s">"token-id"</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"submit-button"</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Pay<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;/form&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>
    <p><br /></p>

    <h3 id="javascript">Library Javascript Veritrans</h3>

    <p>Library ini memungkinkan informasi kartu kredit pelanggan anda dikirimkan ke server Veritrans dengan aman. Setelah informasi kartu kredit dikirimkan, Server Veritrans akan mengembalikan sebuah token ID. Demi alasan keamanan, kami melarang pihak merchant untuk mengimplementasikan Javascript sendiri. Jika ada fitur tambahan yang ingin ditambahkan ke dalam library Javascript, harap hubungi <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#064;&#118;&#101;&#114;&#105;&#116;&#114;&#097;&#110;&#115;&#046;&#099;&#111;&#046;&#105;&#100;">Veritrans support</a>.</p>

    <p>Untuk menggunakan library ini, anda cukup menambahkan satu baris kode HTML pada <code>form_vtdirect.html</code> dalam tag <code>&lt;head&gt;</code>.
<br /><br /></p>

<pre><code class="highlight html">
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://api.sandbox.veritrans.co.id/v2/assets/js/veritrans.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

</code></pre>

    <p><br />
Isi awal dari file <code>form_vtdirect.html</code> jika anda menggunakan akun sandbox adalah sebagai berikut:
<br /><br /></p>

<pre><code class="highlight html"><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Contoh Form VT-Direct<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">”https://api.sandbox.veritrans.co.id/v2/assets/js/veritrans.min.js”</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/head&gt;</span>

  ...

<span class="nt">&lt;/html&gt;</span>
</code></pre>
    <p><br /></p>

    <h3 id="script-tambahan">Script Tambahan</h3>

    <p>Script tambahan digunakan untuk menghubungkan konten form yang telah kita buat dengan <code>veritrans.min.js</code>. Script pertama yang digunakan adalah <strong>jQuery</strong>. jQuery akan mempermudah akses elemen HTML dan menambahkan event saat form di-submit. Untuk menggunakan jQuery, tambahkan kode berikut pada tag <code>head</code> file <code>form_vtdirect.html</code>:
<br /><br /></p>

<pre><code class="highlight html"><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>
    <p><br />
Script kedua yang digunakan adalah <strong>jQuery fancybox</strong>. jQuery fancybox berperan dalam pembuatan tampilan form konfirmasi 3D secure yang dinamis. Anda dapat mengunduh jQuery fancybox di <a href="https://github.com/fancyapps/fancyBox">sini</a>. Extract library tersebut dan tambahkan kode berikut ke dalam tag <code>head</code> file <code>form_vtdirect.html</code>:
<br /><br /></p>

<pre><code class="highlight html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"fancybox/jquery.fancybox.pack.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"fancybox/jquery.fancybox.css"</span> <span class="na">type=</span><span class="s">"text/css"</span> <span class="na">media=</span><span class="s">"screen"</span> <span class="nt">/&gt;</span>
</code></pre>
    <p><br /></p>

    <p>Pastikan path file javascript dan CSS fancybox sesuai dengan struktur folder project anda.</p>

    <p>Script terakhir digunakan untuk mengintegrasikan semua komponen yang telah kita buat sebelumnya. Pada script ini, anda harus memastikan bahwa <strong>client key</strong> dan <strong>URL API Veritrans</strong> sudah tepat. Client key dapat anda peroleh di halaman <a href="https://my.sandbox.veritrans.co.id/settings/config_info">Merchant Administration Portal</a>. URL API Veritrans untuk environment Sandbox adalah:
<br /><br /></p>

<pre><code class="highlight plaintext">https://api.sandbox.veritrans.co.id/v2/token
</code></pre>
    <p><br /></p>

    <p>Untuk meningkatkan keamanan transaksi online, kami sangat menyarankan anda untuk mengaktifkan fitur 3D Secure. Ada 2 informasi yang perlu diberikan agar fitur ini dapat digunakan: acquiring bank (Bank Penerbit Kartu Kredit Merchant) dan nilai transaksi.</p>

    <p>Jika anda menggunakan environment sandbox, acquiring bank adalah BNI, dan nilai transaksi adalah Rp 200.000,00, contoh script yang ditambakan ke dalam tag <code>head</code> file <code>form_vtdirect.html</code>:
<br /><br /></p>

<pre><code class="highlight html"><span class="c">&lt;!-- Javascript to generate token and show 3DSecure Dialog --&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="c1">// Sandbox API URL. TODO: Change with Production API URL when you're ready to go live.</span>
  <span class="nx">Veritrans</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="s2">"https://api.sandbox.veritrans.co.id/v2/token"</span><span class="p">;</span>

  <span class="c1">// TODO: Change with your actual client key that can be found at Merchant Administration Portal &gt;&gt; Settings &gt;&gt; Access Key</span>
  <span class="nx">Veritrans</span><span class="p">.</span><span class="nx">client_key</span> <span class="o">=</span> <span class="s2">"&lt; Your Client Key&gt;"</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">card</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="s1">'card_number'</span>     <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#card-number"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="s1">'card_exp_month'</span>  <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#card-expiry-month"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="s1">'card_exp_year'</span>   <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#card-expiry-year"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="s1">'card_cvv'</span>        <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#card-cvv"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>

      <span class="c1">// Set 'secure', 'bank', and 'gross_amount', if the merchant wants transaction to be processed with 3D Secure</span>
      <span class="s1">'secure'</span>       <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s1">'bank'</span>       <span class="p">:</span> <span class="s1">'bni'</span><span class="p">,</span>
      <span class="s1">'gross_amount'</span>   <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#price"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="c1">// no decimal allowed for creditcard</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="c1">// handler when user click the 'Pay' button.</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'#submit-button'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"disabled"</span><span class="p">,</span> <span class="s2">"disabled"</span><span class="p">);</span> 
    <span class="nx">Veritrans</span><span class="p">.</span><span class="nx">token</span><span class="p">(</span><span class="nx">card</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">redirect_url</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// 3Dsecure transaction. Open 3Dsecure dialog</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Open Dialog 3Dsecure'</span><span class="p">);</span>
      <span class="nx">openDialog</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">redirect_url</span><span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status_code</span> <span class="o">==</span> <span class="s1">'200'</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// success 3d secure or success normal</span>
      <span class="c1">//close 3d secure dialog if any</span>
      <span class="nx">closeDialog</span><span class="p">();</span>

      <span class="c1">// store token data in input #token_id and then submit form to merchant server</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#token-id"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">token_id</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#payment-form"</span><span class="p">).</span><span class="nx">submit</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="c1">// failed request token</span>
      <span class="c1">//close 3d secure dialog if any</span>
      <span class="nx">closeDialog</span><span class="p">();</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'#submit-button'</span><span class="p">).</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s1">'disabled'</span><span class="p">);</span>
      <span class="c1">// Show status message.</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'#message'</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status_message</span><span class="p">);</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">));</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="c1">// Open 3DSecure dialog box</span>
  <span class="kd">function</span> <span class="nx">openDialog</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">fancybox</span><span class="p">.</span><span class="nx">open</span><span class="p">({</span>
          <span class="na">href</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
          <span class="na">type</span><span class="p">:</span> <span class="s1">'iframe'</span><span class="p">,</span>
          <span class="na">autoSize</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="na">width</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span>
          <span class="na">height</span><span class="p">:</span> <span class="mi">420</span><span class="p">,</span>
          <span class="na">closeBtn</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="na">modal</span><span class="p">:</span> <span class="kc">true</span>
      <span class="p">});</span>
  <span class="p">}</span>

  <span class="c1">// Close 3DSecure dialog box</span>
  <span class="kd">function</span> <span class="nx">closeDialog</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">fancybox</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>
    <p><br /></p>

    <p>Ketika pelanggan menekan tombol <code>Pay</code>, javascript akan mengumpulkan nilai <em>field</em> <code>card_number</code>, <code>card_exp_month</code>, <code>card_exp_year</code>, <code>cvv</code>,  dan <code>amount</code> dari form HTML. Nilai dari <em>field-field</em> ini kemudian dikirim secara aman ke server Veritrans. Jika nilai <em>field</em> yang dikirimkan valid, server Veritrans akan mengembalikan sebuah token ID yang dapat digunakan untuk melakukan charge transaksi. </p>

    <p>Ketika token ID diperoleh, <em>hidden field</em> <code>token_id</code> akan otomatis terisi dan dikirimkan ke server merchant. Perlu diperhatikan bahwa data sensitif pelanggan tidak dikirim ke server merchant (tidak memiliki atribut <code>name</code>). Server anda hanya menerima data <code>amount</code> dan <code>token_id</code>.</p>

    <p>Penggunaan jQuery dan jQuery fancybox bersifat opsional. Anda dapat menggunakan framework javascript lain atau menggunakan script sendiri untuk menampilkan dialog 3D Secure.</p>

    <p>Contoh akun kartu kredit yang dapat digunakan untuk transaksi 3DS adalah:
<br /><br /></p>

    <table>
      <thead>
        <tr>
          <th>Jenis</th>
          <th>Visa</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Nomor Kartu</td>
          <td>4811 1111 1111 1114</td>
        </tr>
        <tr>
          <td>CVV</td>
          <td>123</td>
        </tr>
        <tr>
          <td>Exp. Month</td>
          <td>01</td>
        </tr>
        <tr>
          <td>Exp. Year</td>
          <td>2020</td>
        </tr>
      </tbody>
    </table>

    <p><br /></p>

    <p>Informasi lebih lengkap terkait akun yang dapat digunakan untuk testing dapat dilihat di <a href="../sandbox/card_list.html">Referensi API - Daftar kartu uji coba</a>.</p>

  </div>
  <!-- end of step 1-->

  <div class="tab-pane" id="step2">
    <!-- step 2-->

    <!-- dua -->
    <p><br /></p>

    <h2 id="melakukan-charge-transaksi">Melakukan Charge Transaksi</h2>

    <p><img alt="vtdirect_intro2" class="img-responsive img-thumbnail" src="../../images/vtdirect_introduction_2.png" /></p>

    <p><em>Proses VT-Direct (Langkah 4 - 6)</em>
<br /><br />
Tahap ini membahas cara charge transaksi menggunakan VT-Direct, implementasi charge transaksi diasumsikan ada di file PHP bernama <code>checkout.php</code>. Pada <code>checkout.php</code>, atribut <code>token_id</code> dan <code>price</code> dapat diakses untuk melakukan charge transaksi. Kedua atribut ini dikirim oleh form file <code>form_checkout.html</code> yang ada pada bagian <strong>Mendapatkan Token</strong>.</p>

    <p>Untuk melakukan charge transaksi, ada beberapa hal yang harus dipersiapkan:</p>

    <ol>
      <li>Token ID</li>
      <li>Nilai transaksi</li>
      <li>Acquirer bank</li>
      <li>Server key</li>
      <li>Order ID</li>
      <li>Data transaksi
        <ul>
          <li>Data pelanggan</li>
          <li>Data barang (Opsional)</li>
        </ul>
      </li>
    </ol>

    <p><br />
Tiga komponen pertama dapat diperoleh berdasarkan informasi <em>field</em> pada <code>form_checkout.html</code>. Server key dapat anda peroleh di halaman <a href="https://my.sandbox.veritrans.co.id/settings/config_info">Merchant Administration Portal</a>. Order ID adalah nilai unik dari suatu transaksi yang bebas anda ditentukan. </p>

    <p>Data transaksi dapat berisi informasi tentang barang dan pelanggan anda. Data transaksi akan disimpan di dalam server Veritrans dan dapat anda ambil sewaktu-waktu. Data ini bersifat opsional.  Umumnya, data transaksi diperoleh dengan menambahkan field yang ada di <code>form_checkout.html</code>. Detail struktur dan keterangan data transaksi dapat dilihat di <a href="../sandbox/charge.html#specification">sini</a>.</p>

    <p>Contoh isi file <code>checkout.php</code> untuk melakukan charge transaksi (simple transaction data):
<br /><br /></p>

<pre><code class="highlight php"><span class="cp">&lt;?php</span>

<span class="k">include_once</span><span class="p">(</span><span class="s1">'Veritrans.php'</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'token-id'</span><span class="p">]))</span> 
<span class="p">{</span>
  <span class="k">echo</span> <span class="s2">"Empty token-id."</span><span class="p">;</span>
  <span class="k">exit</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// TODO: change with your actual server_key that can be found on Merchant Administration Portal (MAP)
</span><span class="nx">Veritrans_Config</span><span class="o">::</span><span class="nv">$serverKey</span> <span class="o">=</span> <span class="s2">"&lt; Your Server Key&gt;"</span><span class="p">;</span>
<span class="nx">Veritrans_Config</span><span class="o">::</span><span class="nv">$isProduction</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="c1">// token_id merepresentasikan credit card yang akan di-carge.
// token_id didapatkan dari request yang dilakukan melalui veritrans.min.js
</span><span class="nv">$token_id</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'token-id'</span><span class="p">];</span>

<span class="nv">$transaction_details</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'order_id'</span>    <span class="o">=&gt;</span> <span class="nb">rand</span><span class="p">(),</span>
  <span class="s1">'gross_amount'</span>  <span class="o">=&gt;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'price'</span><span class="p">]</span> <span class="c1">// no decimal allowed for creditcard
</span><span class="p">);</span>

<span class="c1">// Data yang akan dikirim untuk request charge transaction dengan credit card.
</span><span class="nv">$transaction_data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'payment_type'</span>      <span class="o">=&gt;</span> <span class="s1">'credit_card'</span><span class="p">,</span> 
  <span class="s1">'credit_card'</span>       <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'token_id'</span>  <span class="o">=&gt;</span> <span class="nv">$token_id</span><span class="p">,</span>
    <span class="s1">'bank'</span>    <span class="o">=&gt;</span> <span class="s1">'bni'</span>
    <span class="p">),</span>
  <span class="s1">'transaction_details'</span>   <span class="o">=&gt;</span> <span class="nv">$transaction_details</span><span class="p">,</span>
  <span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nx">Veritrans_VtDirect</span><span class="o">::</span><span class="na">charge</span><span class="p">(</span><span class="nv">$transaction_data</span><span class="p">);</span>

<span class="cp">?&gt;</span>
</code></pre>
    <p><br /></p>

    <p>Contoh isi file <code>checkout.php</code> untuk melakukan charge transaksi (full transaction data):
<br /><br /></p>

<pre><code class="highlight php"><span class="cp">&lt;?php</span>

<span class="k">include_once</span><span class="p">(</span><span class="s1">'Veritrans.php'</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'token-id'</span><span class="p">]))</span> 
<span class="p">{</span>
  <span class="k">echo</span> <span class="s2">"Empty token-id."</span><span class="p">;</span>
  <span class="k">exit</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// TODO: change with your actual server_key that can be found on Merchant Administration Portal (MAP)
</span><span class="nx">Veritrans_Config</span><span class="o">::</span><span class="nv">$serverKey</span> <span class="o">=</span> <span class="s2">"&lt; Your Server Key&gt;"</span><span class="p">;</span>
<span class="nx">Veritrans_Config</span><span class="o">::</span><span class="nv">$isProduction</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="c1">// token_id merepresentasikan credit card yang akan di-carge.
// token_id didapatkan dari request yang dilakukan melalui veritrans.min.js
</span><span class="nv">$token_id</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'token-id'</span><span class="p">];</span>

<span class="c1">//Required
</span><span class="nv">$transaction_details</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'order_id'</span>    <span class="o">=&gt;</span> <span class="nb">rand</span><span class="p">(),</span>
  <span class="s1">'gross_amount'</span>  <span class="o">=&gt;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'price'</span><span class="p">]</span> <span class="c1">// no decimal allowed for creditcard
</span><span class="p">);</span>

<span class="c1">//Opsional
</span><span class="nv">$item1_details</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="s1">'a1'</span><span class="p">,</span>
    <span class="s1">'price'</span> <span class="o">=&gt;</span> <span class="mi">500000</span><span class="p">,</span>
    <span class="s1">'quantity'</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'Apel'</span>
    <span class="p">);</span>

<span class="c1">//Opsional
</span><span class="nv">$item2_details</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="s1">'a2'</span><span class="p">,</span>
    <span class="s1">'price'</span> <span class="o">=&gt;</span> <span class="mi">100500</span><span class="p">,</span>
    <span class="s1">'quantity'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'Jeruk'</span>
    <span class="p">);</span>

<span class="c1">// Opsional
</span><span class="nv">$items_details</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span><span class="nv">$item1_details</span><span class="p">,</span> <span class="nv">$item2_details</span><span class="p">);</span>

<span class="c1">//Opsional
</span><span class="nv">$billing_address</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'first_name'</span>    <span class="o">=&gt;</span> <span class="s2">"Andri"</span><span class="p">,</span>
    <span class="s1">'last_name'</span>     <span class="o">=&gt;</span> <span class="s2">"Litani"</span><span class="p">,</span>
    <span class="s1">'address'</span>       <span class="o">=&gt;</span> <span class="s2">"Mangga 20"</span><span class="p">,</span>
    <span class="s1">'city'</span>          <span class="o">=&gt;</span> <span class="s2">"Jakarta"</span><span class="p">,</span>
    <span class="s1">'postal_code'</span>   <span class="o">=&gt;</span> <span class="s2">"16602"</span><span class="p">,</span>
    <span class="s1">'phone'</span>         <span class="o">=&gt;</span> <span class="s2">"081122334455"</span><span class="p">,</span>
    <span class="s1">'country_code'</span>  <span class="o">=&gt;</span> <span class="s1">'IDN'</span>
    <span class="p">);</span>

<span class="c1">// Opsional
</span><span class="nv">$shipping_address</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'first_name'</span>    <span class="o">=&gt;</span> <span class="s2">"Obet"</span><span class="p">,</span>
    <span class="s1">'last_name'</span>     <span class="o">=&gt;</span> <span class="s2">"Supriadi"</span><span class="p">,</span>
    <span class="s1">'address'</span>       <span class="o">=&gt;</span> <span class="s2">"Manggis 90"</span><span class="p">,</span>
    <span class="s1">'city'</span>          <span class="o">=&gt;</span> <span class="s2">"Jakarta"</span><span class="p">,</span>
    <span class="s1">'postal_code'</span>   <span class="o">=&gt;</span> <span class="s2">"16601"</span><span class="p">,</span>
    <span class="s1">'phone'</span>         <span class="o">=&gt;</span> <span class="s2">"08113366345"</span><span class="p">,</span>
    <span class="s1">'country_code'</span>  <span class="o">=&gt;</span> <span class="s1">'IDN'</span>
    <span class="p">);</span>

<span class="c1">// Required
</span><span class="nv">$customer_details</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'first_name'</span>    <span class="o">=&gt;</span> <span class="s2">"Andri"</span><span class="p">,</span>
    <span class="s1">'last_name'</span>     <span class="o">=&gt;</span> <span class="s2">"Litani"</span><span class="p">,</span>
    <span class="s1">'email'</span>         <span class="o">=&gt;</span> <span class="s2">"andri@litani.com"</span><span class="p">,</span>
    <span class="s1">'phone'</span>         <span class="o">=&gt;</span> <span class="s2">"081122334455"</span><span class="p">,</span>
    <span class="s1">'billing_address'</span>  <span class="o">=&gt;</span> <span class="nv">$billing_address</span><span class="p">,</span>
    <span class="s1">'shipping_address'</span> <span class="o">=&gt;</span> <span class="nv">$shipping_address</span>
    <span class="p">);</span>

<span class="c1">// Data that will be send for credit card charge transaction request.
// Required
</span><span class="nv">$transaction_data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'payment_type'</span>    <span class="o">=&gt;</span> <span class="s1">'credit_card'</span><span class="p">,</span> 
  <span class="s1">'credit_card'</span>     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'token_id'</span>      <span class="o">=&gt;</span> <span class="nv">$token_id</span><span class="p">,</span>
    <span class="s1">'bank'</span>          <span class="o">=&gt;</span> <span class="s1">'bni'</span>
    <span class="p">),</span>
  <span class="s1">'transaction_details'</span>   <span class="o">=&gt;</span> <span class="nv">$transaction_details</span><span class="p">,</span>
  <span class="s1">'item_details'</span>          <span class="o">=&gt;</span> <span class="nv">$items</span><span class="p">,</span>
  <span class="s1">'customer_details'</span>      <span class="o">=&gt;</span> <span class="nv">$customer_details</span>
  <span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nx">Veritrans_VtDirect</span><span class="o">::</span><span class="na">charge</span><span class="p">(</span><span class="nv">$transaction_data</span><span class="p">);</span>

<span class="cp">?&gt;</span>
</code></pre>
    <p><br /></p>

    <h3 id="kesalahan-dalam-charge-transaksi">Kesalahan dalam Charge Transaksi</h3>

    <p>Pada beberapa kasus, charge transaksi VT-Direct bisa gagal. Veritrans akan mengembalikan pesan error ketika terjadi kegagalan. Penyebab gagalnya charge transaksi VT-Direct dapat dilihat dari status code yang ada di dalam pesan error, status code yang umumnya muncul adalah:
<br /><br /></p>

    <table>
      <thead>
        <tr>
          <th>Kode Error</th>
          <th>Keterangan</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>400</code> Validation error</td>
          <td>Format atau konten data transaksi tidak valid. Contoh: Salah tipe variabel, metode pembayaran tidak valid.</td>
        </tr>
        <tr>
          <td><code>401</code> Access Denied</td>
          <td>Client atau server key tidak valid.</td>
        </tr>
        <tr>
          <td><code>402</code> Access Denied</td>
          <td>Merchant tidak memiliki izin menggunakan metode pembayaran tertentu.</td>
        </tr>
        <tr>
          <td><code>406</code> Duplicate Order ID</td>
          <td>Order ID telah digunakan dan dibayar sebelumnya.</td>
        </tr>
        <tr>
          <td><code>410</code> Account Inactive</td>
          <td>Akun merchant tidak aktif dalam waktu lama</td>
        </tr>
        <tr>
          <td><code>411</code> Token error</td>
          <td>Token hilang, tidak valid, atau kadaluarsa</td>
        </tr>
      </tbody>
    </table>

    <p><br />
Daftar status code lengkap dapat dilihat di <a href="../sandbox/status_code.html">Referensi API - Status Code</a>. Jika mengalami kesulitan, silahkan <a href="https://www.veritrans.co.id/contact.html">hubungi kami</a>.</p>

    <p>Ketika proses charge transaksi berhasil dilakukan, anda dapat melihat status transaksi. Cara melihat status transaksi akan dibahas pada <a href="integration_cc.html#step3">langkah selanjutnya</a>.</p>

  </div>
  <!-- end of step 2-->

  <div class="tab-pane" id="step3">
    <!-- step 3-->

    <!-- tiga -->
    <p><br /></p>

    <h2 id="status-transaksi">Status Transaksi</h2>

    <p>Server Veritrans akan mengembalikan respon untuk setiap charge transaksi dalam bentuk JSON. Library Veritrans-PHP akan melakukan konversi JSON menjadi object PHP secara otomatis, contoh respon JSON yang dikembalikan oleh Veritrans adalah sebagai berikut:
<br /><br /></p>

    <h3 id="respon-sukses">Respon Sukses</h3>

<pre><code class="highlight php">$result = array(
    "transaction_id" =&gt; "93c6a0ff-b270-4b00-adba-f1738ff90261",
    "order_id" =&gt; "201303131610",
    "gross_amount" =&gt; 10000.00,
    "payment_type" =&gt; "credit_card",
    "transaction_time" =&gt; "2014-03-13 16:10:15",
    "transaction_status" =&gt; "capture",
    "fraud_status" =&gt; "accept",
    "masked_card" =&gt; "481111-1114",
    "status_code" =&gt; "200",
    "bank" =&gt; "bni",
    "approval_code" =&gt; "140540",
    "status_message" =&gt; "Success, Credit Card transaction is successful"
);
</code></pre>
    <p><br /></p>

    <h3 id="respon-gagal">Respon Gagal</h3>

<pre><code class="highlight php">$result = array(
    "transaction_id" =&gt; "f5507d7c-a46f-4a00-97a1-8a0b29d34ab3",
    "order_id" =&gt; "201303121701",
    "payment_type" =&gt; "credit_card",
    "transaction_time" =&gt; "2014-07-15 16:01:30",
    "transaction_status" =&gt; "deny",
    "fraud_status" =&gt; "accept",
    "masked_card" =&gt; "491111-1113",
    "gross_amount" =&gt; "10000.00"
    "status_code" =&gt; "202",
    "bank" =&gt; "bni",
    "status_message" =&gt; "Deny by Bank [BNI] with code [05] and message [Do not honour]"
);
</code></pre>

    <p><br />
Salah satu informasi yang paling penting dalam respon JSON adalah status transaksi. Status transaksi dapat dilihat di atribut <code>transaction_status</code>. Ada 3 macam status transaksi:</p>

    <ol>
      <li><strong>Capture</strong>: Transaksi berhasil.</li>
      <li><strong>Deny</strong>: Transaksi ditolak oleh bank atau Fraud Detection System (FDS).</li>
      <li><strong>Challenge</strong>: Transaksi ditolak oleh FDS. Anda harus melakukan konfirmasi di Merchant Administration Portal (MAP).</li>
    </ol>

    <p>Anda dapat menambahkan kode PHP berikut ke dalam bagian akhir file <code>checkout.php</code> untuk menyampaikan status transaksi pada pelanggan anda:
<br /><br /></p>

<pre><code class="highlight php"><span class="cp">&lt;?php</span>

<span class="k">include_once</span><span class="p">(</span><span class="s1">'Veritrans.php'</span><span class="p">);</span>

<span class="o">...</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nx">Veritrans_VtDirect</span><span class="o">::</span><span class="na">charge</span><span class="p">(</span><span class="nv">$transaction_data</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">transaction_status</span> <span class="o">==</span> <span class="s2">"capture"</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">//success
</span>  <span class="k">echo</span> <span class="s2">"Transaksi berhasil. &lt;br /&gt;"</span><span class="p">;</span>
  <span class="k">echo</span> <span class="s2">"Status transaksi untuk order id "</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">order_id</span><span class="o">.</span><span class="s2">": "</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">transaction_status</span><span class="p">;</span>
  <span class="k">echo</span> <span class="s2">"&lt;h3&gt;Detail transaksi:&lt;/h3&gt;"</span><span class="p">;</span>
  <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">transaction_status</span> <span class="o">==</span> <span class="s2">"deny"</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">//deny
</span>  <span class="k">echo</span> <span class="s2">"Transaksi ditolak. &lt;br /&gt;"</span><span class="p">;</span>
  <span class="k">echo</span> <span class="s2">"Status transaksi untuk order id "</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">order_id</span><span class="o">.</span><span class="s2">": "</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">transaction_status</span><span class="p">;</span>

  <span class="k">echo</span> <span class="s2">"&lt;h3&gt;Detail transaksi:&lt;/h3&gt;"</span><span class="p">;</span>
  <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">transaction_status</span> <span class="o">==</span> <span class="s2">"challenge"</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">//challenge
</span>  <span class="k">echo</span> <span class="s2">"Transaksi challenge. &lt;br /&gt;"</span><span class="p">;</span>
  <span class="k">echo</span> <span class="s2">"Status transaksi untuk order id "</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">order_id</span><span class="o">.</span><span class="s2">": "</span><span class="o">.</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">transaction_status</span><span class="p">;</span>

  <span class="k">echo</span> <span class="s2">"&lt;h3&gt;Detail transaksi:&lt;/h3&gt;"</span><span class="p">;</span>
  <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
  <span class="c1">//error
</span>  <span class="k">echo</span> <span class="s2">"Terjadi kesalahan pada data transaksi yang dikirim.&lt;br /&gt;"</span><span class="p">;</span>
  <span class="k">echo</span> <span class="s2">"&lt;h3&gt;Result:&lt;/h3&gt;"</span><span class="p">;</span>
  <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre>
    <p><br /></p>

    <p>Sampai di sini, proses pembayaran suatu transaksi telah selesai. Jika nilai <code>transaction_status</code> adalah <code>capture</code>, kartu kredit pelanggan anda sudah di-charge ke akun anda. Selain menyampaikan status transaksi ke pelanggan, anda juga dapat menggunakan kode di atas untuk meng-update database terkait, misalnya menandai bahwa transaksi dengan <code>order_id</code> tersebut telah terbayar. </p>

    <p>Status transaksi juga dapat anda ketahui di Merchant Administration Portal(MAP). Anda perlu untuk login ke MAP untuk melihat detail informasi transaksi tersebut. Alternatif lain untuk melihat status transaksi adalah menggunakan perintah <a href="other_commands.html#status">VT-Direct – Mendapatkan Status Transaksi</a>.</p>

  </div>
  <!-- end of step 3-->
</div>
<!-- end of tab-content-->



			<div class="pagination">
				<ul><li class="left">« Sebelumnya: <a href="getting_started.html">VT-Direct : Langkah Awal</a></li><li class="right">Selanjutnya: <a href="other_features.html">VT-Direct : Fitur Tambahan</a> »</li></ul>
			</div>
          </div>
        </div><!--/span-->
      </div><!--/row-->

    </div><!--/.container-->

    <script src="../../javascripts/jquery-1.10.2.min.js" type="text/javascript"></script>
<script src="../../javascripts/bootstrap.min.js" type="text/javascript"></script>
<script src="../../javascripts/dropdown.js" type="text/javascript"></script>
<script src="../../javascripts/tab_custom.js" type="text/javascript"></script>
    <div class="custom-container footer">
  <div class="wrapper">
    <div class="row">
      <div class="col-md-12 copyright">
        <div class="content text-center">
          <span>&copy;2014 PT. Midtrans (Veritrans Indonesia). All Rights Reserved</span>
          <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/privacy.html" title="Privacy Policy">Privacy Policy</a>
        </div>
      </div>
    </div>
  </div>
</div>
    
    </script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-32232768-1', 'veritrans.co.id');
      ga('send', 'pageview');

    </script>
    <script>
    $(document).ready(function() {
      $('[data-toggle=offcanvas]').click(function() {
        $('.row-offcanvas').toggleClass('active');
      });
      $(function () {
        $('[data-toggle="tooltip"]').tooltip();
      });
    });
    </script>
  </body>
</html>
